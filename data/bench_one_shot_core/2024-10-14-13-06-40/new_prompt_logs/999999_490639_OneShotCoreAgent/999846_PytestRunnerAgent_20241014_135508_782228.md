Role: system
Content: 
__________________
Role: info
Content: Starting Pytest run
__________________
Role: info
Content: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform linux -- Python 3.11.10, pytest-7.3.1, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, sugar-0.9.7, html-3.2.0, metadata-3.1.1, anyio-4.6.2, Faker-30.3.0, timeout-2.3.1, cov-4.1.0, time-machine-2.16.0
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py .                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f"starting random run iteration {i}")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player("HumanPlayer")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:557: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:673: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:717: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene("MainGameScene")
../../../../mge2/mini_game_engine/engine/lib.py:427: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_... enable_leaderboard_persistence=False, supabase_url='', supabase_key='', supabase_jwt_secret='', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print("---> Fetching data", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = {**dehydrated_scene}
                                del scene_kwargs["__type"]
                                new_scene = self.scene_registry.get(dehydrated_scene["__type"]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception("The scene {scene_id} is not registered, "
                                f"all scenes should be registered using `register_scene` before `app.run()`") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get("player") is not None:
                    raise Exception("player argument cannot be used on a multiplayer scene, you must use 'players'")
                if kwargs.get("players") is None:
                    raise Exception("players argument must be set on a multiplayer scene")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f"""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """)
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:676: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 1
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 2
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 3
Bubwool used Tackle and dealt 5 damage!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Scizard!'}
Bubwool used Lick and dealt 6 damage!
Default Player swapped to Dumbird!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
Dumbird used Tackle and dealt 5 damage!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Scizard!'}
Default Player swapped to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Scizard!'}
Bubwool used Tackle and dealt 5 damage!
Default Player swapped to Dumbird!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball and dealt 13 damage!'}
Dumbird used Tackle and dealt 1 damage!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball and dealt 13 damage!'}
Dumbird used Tackle and dealt 1 damage!
Dumbird has been knocked out!
Default Player swapped to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 8 damage!'}
No creatures available to swap!
No creatures available to swap!
Bubwool used Tackle and dealt 5 damage!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
No creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Bubwool used Lick and dealt 7 damage!
No creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Scizard!'}
Bubwool used Tackle and dealt 5 damage!
No creatures available to swap!
Bubwool used Tackle and dealt 5 damage!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Scizard!'}
Bubwool used Lick and dealt 6 damage!
Bubwool used Lick and dealt 6 damage!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Bubwool used Tackle and dealt 9 damage!
Default Player wins the battle!
=============================== warnings summary ===============================
temp/ladder/creature_battler_05_7/main_game/tests/test_main_game_scene.py::TestMainGameSceneRandomRun::test_main_game_scene_random_run
  [REDACT]/volter-monorepo/.venv/lib/python3.11/site-packages/_pytest/unraisableexception.py:78: PytestUnraisableExceptionWarning: Exception ignored in: <function MainGameScene.__del__ at 0x[REDACTED]>
  
  Traceback (most recent call last):
    File "[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_7/main_game/scenes/main_game_scene.py", line 166, in __del__
      self._transition_to_scene("MainMenuScene")
    File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 427, in _transition_to_scene
      self._app.transition_to_scene(scene_name, player=self.player)
    File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 673, in transition_to_scene
      self.__run_scene(scene)
    File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 717, in __run_scene
      scene.run()
    File "[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_7/main_game/scenes/main_menu_scene.py", line 21, in run
      choice = self._wait_for_choice(self.player, choices)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 412, in _wait_for_choice
      choice = player._listener.on_wait_for_choice(self, choices)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 310, in on_wait_for_choice
      raise RandomModeGracefulExit()
  mini_game_engine.engine.lib.RandomModeGracefulExit: HumanListener is in random mode and the current run is now over. This is exception is expected
  
    warnings.warn(pytest.PytestUnraisableExceptionWarning(msg))

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots - common.exceptions.FixableException: 
Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
`quit_whole_game` to signal that the game has ended.
==================== 1 failed, 2 passed, 1 warning in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1
Exception ignored in: <function MainGameScene.__del__ at 0x[REDACTED]>
Traceback (most recent call last):
  File "[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_7/main_game/scenes/main_game_scene.py", line 166, in __del__
    self._transition_to_scene("MainMenuScene")
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 427, in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 673, in transition_to_scene
    self.__run_scene(scene)
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 717, in __run_scene
    scene.run()
  File "[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_7/main_game/scenes/main_menu_scene.py", line 21, in run
    choice = self._wait_for_choice(self.player, choices)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 412, in _wait_for_choice
    choice = player._listener.on_wait_for_choice(self, choices)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 310, in on_wait_for_choice
    raise RandomModeGracefulExit()
mini_game_engine.engine.lib.RandomModeGracefulExit: HumanListener is in random mode and the current run is now over. This is exception is expected
Exception ignored in: <function MainGameScene.__del__ at 0x[REDACTED]>
Traceback (most recent call last):
  File "[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_7/main_game/scenes/main_game_scene.py", line 166, in __del__
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 427, in _transition_to_scene
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 671, in transition_to_scene
  File "[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_7/main_game/scenes/main_menu_scene.py", line 6, in __init__
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 376, in __init__
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/new_mydantic/mydantic.py", line 338, in __init__
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/new_mydantic/mydantic.py", line 33, in __init__
  File "/opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/typing.py", line 2377, in get_type_hints
  File "/opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/typing.py", line 395, in _eval_type
  File "/opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/typing.py", line 905, in _evaluate
  File "<string>", line 1, in <module>
NameError: name 'AbstractApp' is not defined

__________________
Role: info
Content: Traceback (most recent call last):
  File "/home/runner/work/volter-monorepo/volter-monorepo/volter-monorepo/packages/lib-volter-mge2/mge_agents/internal/game/pytest_runner_agent/logic.py", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/volter-monorepo/volter-monorepo/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py", line 119, in run_pytest
    raise AssertionError(f"Pytest failed with exit code {exit_code}. Output:\n{output}")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform linux -- Python 3.11.10, pytest-7.3.1, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, sugar-0.9.7, html-3.2.0, metadata-3.1.1, anyio-4.6.2, Faker-30.3.0, timeout-2.3.1, cov-4.1.0, time-machine-2.16.0
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py .                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f"starting random run iteration {i}")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player("HumanPlayer")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:557: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:673: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:717: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene("MainGameScene")
../../../../mge2/mini_game_engine/engine/lib.py:427: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_... enable_leaderboard_persistence=False, supabase_url='', supabase_key='', supabase_jwt_secret='', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print("---> Fetching data", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = {**dehydrated_scene}
                                del scene_kwargs["__type"]
                                new_scene = self.scene_registry.get(dehydrated_scene["__type"]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception("The scene {scene_id} is not registered, "
                                f"all scenes should be registered using `register_scene` before `app.run()`") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get("player") is not None:
                    raise Exception("player argument cannot be used on a multiplayer scene, you must use 'players'")
                if kwargs.get("players") is None:
                    raise Exception("players argument must be set on a multiplayer scene")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f"""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """)
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:676: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 1
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 2
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 3
Bubwool used Tackle and dealt 5 damage!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Scizard!'}
Bubwool used Lick and dealt 6 damage!
Default Player swapped to Dumbird!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
Dumbird used Tackle and dealt 5 damage!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Scizard!'}
Default Player swapped to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Scizard!'}
Bubwool used Tackle and dealt 5 damage!
Default Player swapped to Dumbird!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball and dealt 13 damage!'}
Dumbird used Tackle and dealt 1 damage!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball and dealt 13 damage!'}
Dumbird used Tackle and dealt 1 damage!
Dumbird has been knocked out!
Default Player swapped to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 8 damage!'}
No creatures available to swap!
No creatures available to swap!
Bubwool used Tackle and dealt 5 damage!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
No creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Bubwool used Lick and dealt 7 damage!
No creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Scizard!'}
Bubwool used Tackle and dealt 5 damage!
No creatures available to swap!
Bubwool used Tackle and dealt 5 damage!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Scizard!'}
Bubwool used Lick and dealt 6 damage!
Bubwool used Lick and dealt 6 damage!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Bubwool used Tackle and dealt 9 damage!
Default Player wins the battle!
=============================== warnings summary ===============================
temp/ladder/creature_battler_05_7/main_game/tests/test_main_game_scene.py::TestMainGameSceneRandomRun::test_main_game_scene_random_run
  [REDACT]/volter-monorepo/.venv/lib/python3.11/site-packages/_pytest/unraisableexception.py:78: PytestUnraisableExceptionWarning: Exception ignored in: <function MainGameScene.__del__ at 0x[REDACTED]>
  
  Traceback (most recent call last):
    File "[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_7/main_game/scenes/main_game_scene.py", line 166, in __del__
      self._transition_to_scene("MainMenuScene")
    File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 427, in _transition_to_scene
      self._app.transition_to_scene(scene_name, player=self.player)
    File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 673, in transition_to_scene
      self.__run_scene(scene)
    File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 717, in __run_scene
      scene.run()
    File "[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_7/main_game/scenes/main_menu_scene.py", line 21, in run
      choice = self._wait_for_choice(self.player, choices)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 412, in _wait_for_choice
      choice = player._listener.on_wait_for_choice(self, choices)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 310, in on_wait_for_choice
      raise RandomModeGracefulExit()
  mini_game_engine.engine.lib.RandomModeGracefulExit: HumanListener is in random mode and the current run is now over. This is exception is expected
  
    warnings.warn(pytest.PytestUnraisableExceptionWarning(msg))

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots - common.exceptions.FixableException: 
Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
`quit_whole_game` to signal that the game has ended.
==================== 1 failed, 2 passed, 1 warning in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1
Exception ignored in: <function MainGameScene.__del__ at 0x[REDACTED]>
Traceback (most recent call last):
  File "[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_7/main_game/scenes/main_game_scene.py", line 166, in __del__
    self._transition_to_scene("MainMenuScene")
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 427, in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 673, in transition_to_scene
    self.__run_scene(scene)
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 717, in __run_scene
    scene.run()
  File "[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_7/main_game/scenes/main_menu_scene.py", line 21, in run
    choice = self._wait_for_choice(self.player, choices)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 412, in _wait_for_choice
    choice = player._listener.on_wait_for_choice(self, choices)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 310, in on_wait_for_choice
    raise RandomModeGracefulExit()
mini_game_engine.engine.lib.RandomModeGracefulExit: HumanListener is in random mode and the current run is now over. This is exception is expected
Exception ignored in: <function MainGameScene.__del__ at 0x[REDACTED]>
Traceback (most recent call last):
  File "[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_7/main_game/scenes/main_game_scene.py", line 166, in __del__
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 427, in _transition_to_scene
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 671, in transition_to_scene
  File "[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_7/main_game/scenes/main_menu_scene.py", line 6, in __init__
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/lib.py", line 376, in __init__
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/new_mydantic/mydantic.py", line 338, in __init__
  File "[REDACT]/volter-monorepo/packages/mge2/mini_game_engine/engine/new_mydantic/mydantic.py", line 33, in __init__
  File "/opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/typing.py", line 2377, in get_type_hints
  File "/opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/typing.py", line 395, in _eval_type
  File "/opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/typing.py", line 905, in _evaluate
  File "<string>", line 1, in <module>
NameError: name 'AbstractApp' is not defined


__________________
