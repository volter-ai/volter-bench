timestamp,run_id,agent_id,ladder,run,status,error,traceback,logs,project_directory,commit_url
2024-10-09 15:56:32,1c2910ec-507a-41cd-a3ee-6ce33b79f07d,OneShotCoreAgent,creature_battler_01,1,success,,,['new_prompt_logs/999773_564402_OneShotCoreAgent'],ladder/creature_battler_01_1/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 15:56:38,f658f40c-0ad0-4092-a534-b0d291d203b7,OneShotCoreAgent,creature_battler_01,2,success,,,['new_prompt_logs/999772_515723_OneShotCoreAgent'],ladder/creature_battler_01_2/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 15:56:50,7719babf-6d9c-4865-955c-ea8793669e2d,OneShotCoreAgent,creature_battler_02,2,success,,,['new_prompt_logs/999766_454228_OneShotCoreAgent'],ladder/creature_battler_02_2/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 15:57:18,16a13226-660c-4203-a477-1d575b83f60b,OneShotCoreAgent,creature_battler_02,3,success,,,['new_prompt_logs/999763_467179_OneShotCoreAgent'],ladder/creature_battler_02_3/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 15:57:24,de68e948-0551-402e-b69c-fa3b75b8702f,OneShotCoreAgent,creature_battler_02,4,success,,,['new_prompt_logs/999764_973040_OneShotCoreAgent'],ladder/creature_battler_02_4/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 15:57:28,3dd573fe-3bee-4256-b744-8063b88f87d4,OneShotCoreAgent,creature_battler_02,1,success,,,['new_prompt_logs/999767_903081_OneShotCoreAgent'],ladder/creature_battler_02_1/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 15:57:33,0ed6f465-529a-436e-ab82-721c68c362a4,OneShotCoreAgent,creature_battler_02,5,success,,,['new_prompt_logs/999762_505197_OneShotCoreAgent'],ladder/creature_battler_02_5/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 15:57:38,4ec55999-6dc0-4544-941a-a9efab200f11,OneShotCoreAgent,creature_battler_01,5,success,,,['new_prompt_logs/999768_324076_OneShotCoreAgent'],ladder/creature_battler_01_5/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 15:58:03,8ee71344-0f77-404a-9282-3b098b6c51ff,OneShotCoreAgent,creature_battler_01,4,success,,,['new_prompt_logs/999769_183918_OneShotCoreAgent'],ladder/creature_battler_01_4/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 15:58:03,dfb26ec2-d51b-45fe-857f-979ec9332e01,OneShotCoreAgent,creature_battler_02,6,success,,,['new_prompt_logs/999773_564402_OneShotCoreAgent'],ladder/creature_battler_02_6/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 15:58:07,2065c836-16b1-42e3-8c32-a0852cf98efb,OneShotCoreAgent,creature_battler_01,7,success,,,['new_prompt_logs/999765_217733_OneShotCoreAgent'],ladder/creature_battler_01_7/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 15:58:07,97fbf069-3498-4266-aa16-4018e3b43023,OneShotCoreAgent,creature_battler_01,3,success,,,['new_prompt_logs/999771_556901_OneShotCoreAgent'],ladder/creature_battler_01_3/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 15:58:10,4c6876bc-f13d-4fb3-9797-dcbafede0c0d,OneShotCoreAgent,creature_battler_01,6,success,,,['new_prompt_logs/999770_450201_OneShotCoreAgent'],ladder/creature_battler_01_6/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 15:58:32,1a526250-2efa-4fe6-870c-c846a3ba8fca,OneShotCoreAgent,creature_battler_03,4,failure,'2b8ae806-050b-41cc-ad54-66d934849c5f',"Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 92, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 62, in execute
    await file_writer.execute()
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/basic_agents/file_writer_agent/simple.py"", line 104, in execute
    await self.perform_action(action, excerpts)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/basic_agents/file_writer_agent/simple.py"", line 147, in perform_action
    content = remove_language_markers(sanitize_code_blocks(excerpts[excerpt_id]))
                                                           ~~~~~~~~^^^^^^^^^^^^
KeyError: '2b8ae806-050b-41cc-ad54-66d934849c5f'
",['new_prompt_logs/999767_903081_OneShotCoreAgent'],ladder/creature_battler_03_4/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 15:58:42,731e826f-e3fa-49ea-8680-8ed75a3be8e4,OneShotCoreAgent,creature_battler_03,1,success,,,['new_prompt_logs/999766_454228_OneShotCoreAgent'],ladder/creature_battler_03_1/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 15:59:24,d09c52c7-370e-48e4-b0cc-ff640877d042,OneShotCoreAgent,creature_battler_02,7,success,,,['new_prompt_logs/999772_515723_OneShotCoreAgent'],ladder/creature_battler_02_7/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 15:59:58,f5cf0569-d19b-4b5e-ba81-a662a95eaf40,OneShotCoreAgent,creature_battler_03,2,success,,,['new_prompt_logs/999763_467179_OneShotCoreAgent'],ladder/creature_battler_03_2/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:00:22,bc7e96c4-c687-41ec-a754-426c074b1083,OneShotCoreAgent,creature_battler_03,7,success,,,['new_prompt_logs/999769_183918_OneShotCoreAgent'],ladder/creature_battler_03_7/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:00:24,6ff8c51c-1ec8-43df-8e72-2b3c47957a4b,OneShotCoreAgent,creature_battler_03,6,success,,,['new_prompt_logs/999768_324076_OneShotCoreAgent'],ladder/creature_battler_03_6/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:00:51,14597900-9dd9-4fda-aa93-3aba2cb00891,OneShotCoreAgent,creature_battler_03,3,success,,,['new_prompt_logs/999764_973040_OneShotCoreAgent'],ladder/creature_battler_03_3/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:01:35,3b71c7e2-26ed-4321-9a63-ecb5c68276df,OneShotCoreAgent,creature_battler_04,2,success,,,['new_prompt_logs/999765_217733_OneShotCoreAgent'],ladder/creature_battler_04_2/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:02:05,5f0a591d-ed01-40b2-bf1b-ebe9f8542d8c,OneShotCoreAgent,creature_battler_04,3,success,,,['new_prompt_logs/999771_556901_OneShotCoreAgent'],ladder/creature_battler_04_3/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:02:40,8dcce9e8-35ba-4030-9e86-2f5b3876fa51,OneShotCoreAgent,creature_battler_04,7,success,,,['new_prompt_logs/999772_515723_OneShotCoreAgent'],ladder/creature_battler_04_7/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:03:12,d9072637-edca-442c-bc13-eec31bbe05b7,OneShotCoreAgent,creature_battler_04,4,success,,,['new_prompt_logs/999770_450201_OneShotCoreAgent'],ladder/creature_battler_04_4/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:03:44,505c20b3-358c-492f-93dc-4b46365245a6,OneShotCoreAgent,creature_battler_04,1,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 2. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 0 items / 3 errors

==================================== ERRORS ====================================
_ ERROR collecting temp/ladder/creature_battler_04_1/main_game/tests/test_main_game_scene.py _
main_game/tests/test_main_game_scene.py:4: in <module>
    from main_game.main import App
main_game/main.py:3: in <module>
    from main_game.models import Player
main_game/models.py:24: in <module>
    class Player(AbstractPlayer):
<frozen abc>:106: in __new__
    ???
../../../../mge2/mini_game_engine/engine/lib.py:231: in __init_subclass__
    raise AttributeError(
E   AttributeError: Player is a pure data model and methods like reset_creatures cannot be added to it. All logic should be implemented in scenes
_ ERROR collecting temp/ladder/creature_battler_04_1/main_game/tests/test_main_menu_scene.py _
main_game/tests/test_main_menu_scene.py:4: in <module>
    from main_game.main import App
main_game/main.py:3: in <module>
    from main_game.models import Player
main_game/models.py:24: in <module>
    class Player(AbstractPlayer):
<frozen abc>:106: in __new__
    ???
../../../../mge2/mini_game_engine/engine/lib.py:231: in __init_subclass__
    raise AttributeError(
E   AttributeError: Player is a pure data model and methods like reset_creatures cannot be added to it. All logic should be implemented in scenes
_ ERROR collecting temp/ladder/creature_battler_04_1/main_game/tests/test_whole_game.py _
main_game/tests/test_whole_game.py:5: in <module>
    from main_game.main import App
main_game/main.py:3: in <module>
    from main_game.models import Player
main_game/models.py:24: in <module>
    class Player(AbstractPlayer):
<frozen abc>:106: in __new__
    ???
../../../../mge2/mini_game_engine/engine/lib.py:231: in __init_subclass__
    raise AttributeError(
E   AttributeError: Player is a pure data model and methods like reset_creatures cannot be added to it. All logic should be implemented in scenes
=========================== short test summary info ============================
ERROR main_game/tests/test_main_game_scene.py - AttributeError: Player is a p...
ERROR main_game/tests/test_main_menu_scene.py - AttributeError: Player is a p...
ERROR main_game/tests/test_whole_game.py - AttributeError: Player is a pure d...
!!!!!!!!!!!!!!!!!!! Interrupted: 3 errors during collection !!!!!!!!!!!!!!!!!!!!
============================== 3 errors in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 2
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 274, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 2. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 0 items / 3 errors

==================================== ERRORS ====================================
_ ERROR collecting temp/ladder/creature_battler_04_1/main_game/tests/test_main_game_scene.py _
main_game/tests/test_main_game_scene.py:4: in <module>
    from main_game.main import App
main_game/main.py:3: in <module>
    from main_game.models import Player
main_game/models.py:24: in <module>
    class Player(AbstractPlayer):
<frozen abc>:106: in __new__
    ???
../../../../mge2/mini_game_engine/engine/lib.py:231: in __init_subclass__
    raise AttributeError(
E   AttributeError: Player is a pure data model and methods like reset_creatures cannot be added to it. All logic should be implemented in scenes
_ ERROR collecting temp/ladder/creature_battler_04_1/main_game/tests/test_main_menu_scene.py _
main_game/tests/test_main_menu_scene.py:4: in <module>
    from main_game.main import App
main_game/main.py:3: in <module>
    from main_game.models import Player
main_game/models.py:24: in <module>
    class Player(AbstractPlayer):
<frozen abc>:106: in __new__
    ???
../../../../mge2/mini_game_engine/engine/lib.py:231: in __init_subclass__
    raise AttributeError(
E   AttributeError: Player is a pure data model and methods like reset_creatures cannot be added to it. All logic should be implemented in scenes
_ ERROR collecting temp/ladder/creature_battler_04_1/main_game/tests/test_whole_game.py _
main_game/tests/test_whole_game.py:5: in <module>
    from main_game.main import App
main_game/main.py:3: in <module>
    from main_game.models import Player
main_game/models.py:24: in <module>
    class Player(AbstractPlayer):
<frozen abc>:106: in __new__
    ???
../../../../mge2/mini_game_engine/engine/lib.py:231: in __init_subclass__
    raise AttributeError(
E   AttributeError: Player is a pure data model and methods like reset_creatures cannot be added to it. All logic should be implemented in scenes
=========================== short test summary info ============================
ERROR main_game/tests/test_main_game_scene.py - AttributeError: Player is a p...
ERROR main_game/tests/test_main_menu_scene.py - AttributeError: Player is a p...
ERROR main_game/tests/test_whole_game.py - AttributeError: Player is a pure d...
!!!!!!!!!!!!!!!!!!! Interrupted: 3 errors during collection !!!!!!!!!!!!!!!!!!!!
============================== 3 errors in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 2


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 92, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 2. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 0 items / 3 errors

==================================== ERRORS ====================================
_ ERROR collecting temp/ladder/creature_battler_04_1/main_game/tests/test_main_game_scene.py _
main_game/tests/test_main_game_scene.py:4: in <module>
    from main_game.main import App
main_game/main.py:3: in <module>
    from main_game.models import Player
main_game/models.py:24: in <module>
    class Player(AbstractPlayer):
<frozen abc>:106: in __new__
    ???
../../../../mge2/mini_game_engine/engine/lib.py:231: in __init_subclass__
    raise AttributeError(
E   AttributeError: Player is a pure data model and methods like reset_creatures cannot be added to it. All logic should be implemented in scenes
_ ERROR collecting temp/ladder/creature_battler_04_1/main_game/tests/test_main_menu_scene.py _
main_game/tests/test_main_menu_scene.py:4: in <module>
    from main_game.main import App
main_game/main.py:3: in <module>
    from main_game.models import Player
main_game/models.py:24: in <module>
    class Player(AbstractPlayer):
<frozen abc>:106: in __new__
    ???
../../../../mge2/mini_game_engine/engine/lib.py:231: in __init_subclass__
    raise AttributeError(
E   AttributeError: Player is a pure data model and methods like reset_creatures cannot be added to it. All logic should be implemented in scenes
_ ERROR collecting temp/ladder/creature_battler_04_1/main_game/tests/test_whole_game.py _
main_game/tests/test_whole_game.py:5: in <module>
    from main_game.main import App
main_game/main.py:3: in <module>
    from main_game.models import Player
main_game/models.py:24: in <module>
    class Player(AbstractPlayer):
<frozen abc>:106: in __new__
    ???
../../../../mge2/mini_game_engine/engine/lib.py:231: in __init_subclass__
    raise AttributeError(
E   AttributeError: Player is a pure data model and methods like reset_creatures cannot be added to it. All logic should be implemented in scenes
=========================== short test summary info ============================
ERROR main_game/tests/test_main_game_scene.py - AttributeError: Player is a p...
ERROR main_game/tests/test_main_menu_scene.py - AttributeError: Player is a p...
ERROR main_game/tests/test_whole_game.py - AttributeError: Player is a pure d...
!!!!!!!!!!!!!!!!!!! Interrupted: 3 errors during collection !!!!!!!!!!!!!!!!!!!!
============================== 3 errors in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 2

",['new_prompt_logs/999773_564402_OneShotCoreAgent'],ladder/creature_battler_04_1/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:03:52,fbf40235-52ba-48db-836e-45bc1307ae7c,OneShotCoreAgent,creature_battler_05,1,success,,,['new_prompt_logs/999763_467179_OneShotCoreAgent'],ladder/creature_battler_05_1/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:04:15,d9f65292-d4f6-44cb-b7f5-86b292bb4f51,OneShotCoreAgent,creature_battler_05,2,success,,,['new_prompt_logs/999769_183918_OneShotCoreAgent'],ladder/creature_battler_05_2/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:04:24,1fcfe5db-66c3-4613-9aaf-fbb51966a16a,OneShotCoreAgent,creature_battler_04,6,success,,,['new_prompt_logs/999766_454228_OneShotCoreAgent'],ladder/creature_battler_04_6/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:04:27,626eca3b-8ee7-49c3-9815-1bd4e3b56a9a,OneShotCoreAgent,creature_battler_03,5,success,,,['new_prompt_logs/999762_505197_OneShotCoreAgent'],ladder/creature_battler_03_5/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:04:47,c889d7d9-4f4b-4888-9292-5c4ceff961d7,OneShotCoreAgent,creature_battler_05,3,success,,,['new_prompt_logs/999768_324076_OneShotCoreAgent'],ladder/creature_battler_05_3/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:05:02,8db8a8cf-a342-40ea-8917-0197e0b0a8df,OneShotCoreAgent,creature_battler_04,5,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 2. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 0 items / 3 errors

==================================== ERRORS ====================================
_ ERROR collecting temp/ladder/creature_battler_04_5/main_game/tests/test_main_game_scene.py _
ImportError while importing test module '[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/tests/test_main_game_scene.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
main_game/tests/test_main_game_scene.py:4: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:2: in <module>
    from main_game.models import Creature, create_from_game_database
E   ImportError: cannot import name 'create_from_game_database' from 'main_game.models' ([REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/models.py)
_ ERROR collecting temp/ladder/creature_battler_04_5/main_game/tests/test_main_menu_scene.py _
ImportError while importing test module '[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/tests/test_main_menu_scene.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
main_game/tests/test_main_menu_scene.py:4: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:2: in <module>
    from main_game.models import Creature, create_from_game_database
E   ImportError: cannot import name 'create_from_game_database' from 'main_game.models' ([REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/models.py)
_ ERROR collecting temp/ladder/creature_battler_04_5/main_game/tests/test_whole_game.py _
ImportError while importing test module '[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/tests/test_whole_game.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
main_game/tests/test_whole_game.py:5: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:2: in <module>
    from main_game.models import Creature, create_from_game_database
E   ImportError: cannot import name 'create_from_game_database' from 'main_game.models' ([REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/models.py)
=========================== short test summary info ============================
ERROR main_game/tests/test_main_game_scene.py
ERROR main_game/tests/test_main_menu_scene.py
ERROR main_game/tests/test_whole_game.py
!!!!!!!!!!!!!!!!!!! Interrupted: 3 errors during collection !!!!!!!!!!!!!!!!!!!!
============================== 3 errors in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 2
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 274, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 2. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 0 items / 3 errors

==================================== ERRORS ====================================
_ ERROR collecting temp/ladder/creature_battler_04_5/main_game/tests/test_main_game_scene.py _
ImportError while importing test module '[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/tests/test_main_game_scene.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
main_game/tests/test_main_game_scene.py:4: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:2: in <module>
    from main_game.models import Creature, create_from_game_database
E   ImportError: cannot import name 'create_from_game_database' from 'main_game.models' ([REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/models.py)
_ ERROR collecting temp/ladder/creature_battler_04_5/main_game/tests/test_main_menu_scene.py _
ImportError while importing test module '[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/tests/test_main_menu_scene.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
main_game/tests/test_main_menu_scene.py:4: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:2: in <module>
    from main_game.models import Creature, create_from_game_database
E   ImportError: cannot import name 'create_from_game_database' from 'main_game.models' ([REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/models.py)
_ ERROR collecting temp/ladder/creature_battler_04_5/main_game/tests/test_whole_game.py _
ImportError while importing test module '[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/tests/test_whole_game.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
main_game/tests/test_whole_game.py:5: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:2: in <module>
    from main_game.models import Creature, create_from_game_database
E   ImportError: cannot import name 'create_from_game_database' from 'main_game.models' ([REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/models.py)
=========================== short test summary info ============================
ERROR main_game/tests/test_main_game_scene.py
ERROR main_game/tests/test_main_menu_scene.py
ERROR main_game/tests/test_whole_game.py
!!!!!!!!!!!!!!!!!!! Interrupted: 3 errors during collection !!!!!!!!!!!!!!!!!!!!
============================== 3 errors in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 2


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 92, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 2. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 0 items / 3 errors

==================================== ERRORS ====================================
_ ERROR collecting temp/ladder/creature_battler_04_5/main_game/tests/test_main_game_scene.py _
ImportError while importing test module '[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/tests/test_main_game_scene.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
main_game/tests/test_main_game_scene.py:4: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:2: in <module>
    from main_game.models import Creature, create_from_game_database
E   ImportError: cannot import name 'create_from_game_database' from 'main_game.models' ([REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/models.py)
_ ERROR collecting temp/ladder/creature_battler_04_5/main_game/tests/test_main_menu_scene.py _
ImportError while importing test module '[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/tests/test_main_menu_scene.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
main_game/tests/test_main_menu_scene.py:4: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:2: in <module>
    from main_game.models import Creature, create_from_game_database
E   ImportError: cannot import name 'create_from_game_database' from 'main_game.models' ([REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/models.py)
_ ERROR collecting temp/ladder/creature_battler_04_5/main_game/tests/test_whole_game.py _
ImportError while importing test module '[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/tests/test_whole_game.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
main_game/tests/test_whole_game.py:5: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:2: in <module>
    from main_game.models import Creature, create_from_game_database
E   ImportError: cannot import name 'create_from_game_database' from 'main_game.models' ([REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_5/main_game/models.py)
=========================== short test summary info ============================
ERROR main_game/tests/test_main_game_scene.py
ERROR main_game/tests/test_main_menu_scene.py
ERROR main_game/tests/test_whole_game.py
!!!!!!!!!!!!!!!!!!! Interrupted: 3 errors during collection !!!!!!!!!!!!!!!!!!!!
============================== 3 errors in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 2

",['new_prompt_logs/999767_903081_OneShotCoreAgent'],ladder/creature_battler_04_5/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:05:54,74cc9cc7-c1f6-4bce-8d4b-f5389ef84ffe,OneShotCoreAgent,creature_battler_05,4,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
__________ TestMainGameSceneRandomRun.test_main_game_scene_random_run __________

self = <tests.test_main_game_scene.TestMainGameSceneRandomRun object at 0x[REDACTED]>
app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene_random_run(self, app):
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 30  # More moves needed for the complex MainGameScene
    
            player = app.create_player(f""player_{i}"")
>           main_game_scene = MainGameScene(app, player)

main_game/tests/test_main_game_scene.py:20: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:10: in __init__
    self.initial_creature_states = self._store_initial_creature_states()
main_game/scenes/main_game_scene.py:26: in _store_initial_creature_states
    states[player] = {creature: creature.dict() for creature in player.creatures}
main_game/scenes/main_game_scene.py:26: in <dictcomp>
    states[player] = {creature: creature.dict() for creature in player.creatures}
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.models.Creature object at 0x[REDACTED]>

    def __hash__(self):
>       raise FixableException(
            ""Attempt detected to use an AbstractThing as a hashable ID.  Instead, you should use [obj].prototype_id"")
E       common.exceptions.FixableException: Attempt detected to use an AbstractThing as a hashable ID.  Instead, you should use [obj].prototype_id

../../../../mge2/mini_game_engine/engine/lib.py:136: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:552: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:668: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:712: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:422: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:666: in transition_to_scene
    scene: AbstractGameScene = scene_factory(app=self, **kwargs)
main_game/scenes/main_game_scene.py:10: in __init__
    self.initial_creature_states = self._store_initial_creature_states()
main_game/scenes/main_game_scene.py:26: in _store_initial_creature_states
    states[player] = {creature: creature.dict() for creature in player.creatures}
main_game/scenes/main_game_scene.py:26: in <dictcomp>
    states[player] = {creature: creature.dict() for creature in player.creatures}
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.models.Creature object at 0x[REDACTED]>

    def __hash__(self):
>       raise FixableException(
            ""Attempt detected to use an AbstractThing as a hashable ID.  Instead, you should use [obj].prototype_id"")
E       common.exceptions.FixableException: Attempt detected to use an AbstractThing as a hashable ID.  Instead, you should use [obj].prototype_id

../../../../mge2/mini_game_engine/engine/lib.py:136: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::TestMainGameSceneRandomRun::test_main_game_scene_random_run
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 274, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
__________ TestMainGameSceneRandomRun.test_main_game_scene_random_run __________

self = <tests.test_main_game_scene.TestMainGameSceneRandomRun object at 0x[REDACTED]>
app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene_random_run(self, app):
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 30  # More moves needed for the complex MainGameScene
    
            player = app.create_player(f""player_{i}"")
>           main_game_scene = MainGameScene(app, player)

main_game/tests/test_main_game_scene.py:20: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:10: in __init__
    self.initial_creature_states = self._store_initial_creature_states()
main_game/scenes/main_game_scene.py:26: in _store_initial_creature_states
    states[player] = {creature: creature.dict() for creature in player.creatures}
main_game/scenes/main_game_scene.py:26: in <dictcomp>
    states[player] = {creature: creature.dict() for creature in player.creatures}
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.models.Creature object at 0x[REDACTED]>

    def __hash__(self):
>       raise FixableException(
            ""Attempt detected to use an AbstractThing as a hashable ID.  Instead, you should use [obj].prototype_id"")
E       common.exceptions.FixableException: Attempt detected to use an AbstractThing as a hashable ID.  Instead, you should use [obj].prototype_id

../../../../mge2/mini_game_engine/engine/lib.py:136: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:552: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:668: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:712: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:422: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:666: in transition_to_scene
    scene: AbstractGameScene = scene_factory(app=self, **kwargs)
main_game/scenes/main_game_scene.py:10: in __init__
    self.initial_creature_states = self._store_initial_creature_states()
main_game/scenes/main_game_scene.py:26: in _store_initial_creature_states
    states[player] = {creature: creature.dict() for creature in player.creatures}
main_game/scenes/main_game_scene.py:26: in <dictcomp>
    states[player] = {creature: creature.dict() for creature in player.creatures}
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.models.Creature object at 0x[REDACTED]>

    def __hash__(self):
>       raise FixableException(
            ""Attempt detected to use an AbstractThing as a hashable ID.  Instead, you should use [obj].prototype_id"")
E       common.exceptions.FixableException: Attempt detected to use an AbstractThing as a hashable ID.  Instead, you should use [obj].prototype_id

../../../../mge2/mini_game_engine/engine/lib.py:136: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::TestMainGameSceneRandomRun::test_main_game_scene_random_run
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 92, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
__________ TestMainGameSceneRandomRun.test_main_game_scene_random_run __________

self = <tests.test_main_game_scene.TestMainGameSceneRandomRun object at 0x[REDACTED]>
app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene_random_run(self, app):
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 30  # More moves needed for the complex MainGameScene
    
            player = app.create_player(f""player_{i}"")
>           main_game_scene = MainGameScene(app, player)

main_game/tests/test_main_game_scene.py:20: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:10: in __init__
    self.initial_creature_states = self._store_initial_creature_states()
main_game/scenes/main_game_scene.py:26: in _store_initial_creature_states
    states[player] = {creature: creature.dict() for creature in player.creatures}
main_game/scenes/main_game_scene.py:26: in <dictcomp>
    states[player] = {creature: creature.dict() for creature in player.creatures}
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.models.Creature object at 0x[REDACTED]>

    def __hash__(self):
>       raise FixableException(
            ""Attempt detected to use an AbstractThing as a hashable ID.  Instead, you should use [obj].prototype_id"")
E       common.exceptions.FixableException: Attempt detected to use an AbstractThing as a hashable ID.  Instead, you should use [obj].prototype_id

../../../../mge2/mini_game_engine/engine/lib.py:136: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:552: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:668: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:712: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:422: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:666: in transition_to_scene
    scene: AbstractGameScene = scene_factory(app=self, **kwargs)
main_game/scenes/main_game_scene.py:10: in __init__
    self.initial_creature_states = self._store_initial_creature_states()
main_game/scenes/main_game_scene.py:26: in _store_initial_creature_states
    states[player] = {creature: creature.dict() for creature in player.creatures}
main_game/scenes/main_game_scene.py:26: in <dictcomp>
    states[player] = {creature: creature.dict() for creature in player.creatures}
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.models.Creature object at 0x[REDACTED]>

    def __hash__(self):
>       raise FixableException(
            ""Attempt detected to use an AbstractThing as a hashable ID.  Instead, you should use [obj].prototype_id"")
E       common.exceptions.FixableException: Attempt detected to use an AbstractThing as a hashable ID.  Instead, you should use [obj].prototype_id

../../../../mge2/mini_game_engine/engine/lib.py:136: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::TestMainGameSceneRandomRun::test_main_game_scene_random_run
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/999764_973040_OneShotCoreAgent'],ladder/creature_battler_05_4/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:06:28,4fb06945-793a-443c-8e6c-5f3c51c3bbb9,OneShotCoreAgent,creature_battler_05,7,success,,,['new_prompt_logs/999772_515723_OneShotCoreAgent'],ladder/creature_battler_05_7/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:07:15,76d0a4e3-ffbb-4c8d-9292-340b68225400,OneShotCoreAgent,creature_battler_05,5,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
__________ TestMainGameSceneRandomRun.test_main_game_scene_random_run __________

self = <tests.test_main_game_scene.TestMainGameSceneRandomRun object at 0x[REDACTED]>
app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene_random_run(self, app):
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 30  # Increased to 30 for more complex scene
    
            player = app.create_player(f""player_{i}"")
            main_game_scene = MainGameScene(app, player)
    
            class TransitionFromScene(Exception):
                pass
    
            def exit_scene(*args, **kwargs):
                raise TransitionFromScene()
    
            with patch.object(MainGameScene, '_transition_to_scene', side_effect=exit_scene) as mock_transition, \
                    patch.object(MainGameScene, '_quit_whole_game') as mock_quit:
    
                try:
>                   main_game_scene.run()

main_game/tests/test_main_game_scene.py:32: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:27: in run
    self._resolution_phase(turn_queue)
main_game/scenes/main_game_scene.py:80: in _resolution_phase
    self._execute_skill(opponent, opponent_action[2], player.active_creature)
main_game/scenes/main_game_scene.py:96: in _execute_skill
    self._show_text(defender_creature, f""{defender_creature.display_name} took {final_damage} damage!"")
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
player = <main_game.models.Creature object at 0x[REDACTED]>
text = 'Dumbird took 9 damage!'

    def _show_text(self, player: AbstractPlayer, text: str):
        """""" this shows text as a popup """"""
>       player._listener.on_show_event(""show_text"", {""text"": text})
E       AttributeError: 'Creature' object has no attribute '_listener'

../../../../mge2/mini_game_engine/engine/lib.py:416: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped Scizard for Dumbird!'}
Default Player's Bubwool used Tackle!
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:552: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:668: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:712: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:25: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:422: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:668: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:712: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:27: in run
    self._resolution_phase(turn_queue)
main_game/scenes/main_game_scene.py:80: in _resolution_phase
    self._execute_skill(opponent, opponent_action[2], player.active_creature)
main_game/scenes/main_game_scene.py:96: in _execute_skill
    self._show_text(defender_creature, f""{defender_creature.display_name} took {final_damage} damage!"")
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
player = <main_game.models.Creature object at 0x[REDACTED]>
text = 'Dumbird took 13 damage!'

    def _show_text(self, player: AbstractPlayer, text: str):
        """""" this shows text as a popup """"""
>       player._listener.on_show_event(""show_text"", {""text"": text})
E       AttributeError: 'Creature' object has no attribute '_listener'

../../../../mge2/mini_game_engine/engine/lib.py:416: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
Default Player swapped Bubwool for Dumbird!
BotListener:on_show_event:show_text: {'text': ""Basic Opponent's Scizard used Fireball!""}
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::TestMainGameSceneRandomRun::test_main_game_scene_random_run
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 274, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
__________ TestMainGameSceneRandomRun.test_main_game_scene_random_run __________

self = <tests.test_main_game_scene.TestMainGameSceneRandomRun object at 0x[REDACTED]>
app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene_random_run(self, app):
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 30  # Increased to 30 for more complex scene
    
            player = app.create_player(f""player_{i}"")
            main_game_scene = MainGameScene(app, player)
    
            class TransitionFromScene(Exception):
                pass
    
            def exit_scene(*args, **kwargs):
                raise TransitionFromScene()
    
            with patch.object(MainGameScene, '_transition_to_scene', side_effect=exit_scene) as mock_transition, \
                    patch.object(MainGameScene, '_quit_whole_game') as mock_quit:
    
                try:
>                   main_game_scene.run()

main_game/tests/test_main_game_scene.py:32: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:27: in run
    self._resolution_phase(turn_queue)
main_game/scenes/main_game_scene.py:80: in _resolution_phase
    self._execute_skill(opponent, opponent_action[2], player.active_creature)
main_game/scenes/main_game_scene.py:96: in _execute_skill
    self._show_text(defender_creature, f""{defender_creature.display_name} took {final_damage} damage!"")
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
player = <main_game.models.Creature object at 0x[REDACTED]>
text = 'Dumbird took 9 damage!'

    def _show_text(self, player: AbstractPlayer, text: str):
        """""" this shows text as a popup """"""
>       player._listener.on_show_event(""show_text"", {""text"": text})
E       AttributeError: 'Creature' object has no attribute '_listener'

../../../../mge2/mini_game_engine/engine/lib.py:416: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped Scizard for Dumbird!'}
Default Player's Bubwool used Tackle!
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:552: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:668: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:712: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:25: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:422: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:668: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:712: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:27: in run
    self._resolution_phase(turn_queue)
main_game/scenes/main_game_scene.py:80: in _resolution_phase
    self._execute_skill(opponent, opponent_action[2], player.active_creature)
main_game/scenes/main_game_scene.py:96: in _execute_skill
    self._show_text(defender_creature, f""{defender_creature.display_name} took {final_damage} damage!"")
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
player = <main_game.models.Creature object at 0x[REDACTED]>
text = 'Dumbird took 13 damage!'

    def _show_text(self, player: AbstractPlayer, text: str):
        """""" this shows text as a popup """"""
>       player._listener.on_show_event(""show_text"", {""text"": text})
E       AttributeError: 'Creature' object has no attribute '_listener'

../../../../mge2/mini_game_engine/engine/lib.py:416: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
Default Player swapped Bubwool for Dumbird!
BotListener:on_show_event:show_text: {'text': ""Basic Opponent's Scizard used Fireball!""}
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::TestMainGameSceneRandomRun::test_main_game_scene_random_run
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 92, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
__________ TestMainGameSceneRandomRun.test_main_game_scene_random_run __________

self = <tests.test_main_game_scene.TestMainGameSceneRandomRun object at 0x[REDACTED]>
app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene_random_run(self, app):
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 30  # Increased to 30 for more complex scene
    
            player = app.create_player(f""player_{i}"")
            main_game_scene = MainGameScene(app, player)
    
            class TransitionFromScene(Exception):
                pass
    
            def exit_scene(*args, **kwargs):
                raise TransitionFromScene()
    
            with patch.object(MainGameScene, '_transition_to_scene', side_effect=exit_scene) as mock_transition, \
                    patch.object(MainGameScene, '_quit_whole_game') as mock_quit:
    
                try:
>                   main_game_scene.run()

main_game/tests/test_main_game_scene.py:32: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:27: in run
    self._resolution_phase(turn_queue)
main_game/scenes/main_game_scene.py:80: in _resolution_phase
    self._execute_skill(opponent, opponent_action[2], player.active_creature)
main_game/scenes/main_game_scene.py:96: in _execute_skill
    self._show_text(defender_creature, f""{defender_creature.display_name} took {final_damage} damage!"")
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
player = <main_game.models.Creature object at 0x[REDACTED]>
text = 'Dumbird took 9 damage!'

    def _show_text(self, player: AbstractPlayer, text: str):
        """""" this shows text as a popup """"""
>       player._listener.on_show_event(""show_text"", {""text"": text})
E       AttributeError: 'Creature' object has no attribute '_listener'

../../../../mge2/mini_game_engine/engine/lib.py:416: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped Scizard for Dumbird!'}
Default Player's Bubwool used Tackle!
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:552: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:668: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:712: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:25: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:422: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:668: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:712: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:27: in run
    self._resolution_phase(turn_queue)
main_game/scenes/main_game_scene.py:80: in _resolution_phase
    self._execute_skill(opponent, opponent_action[2], player.active_creature)
main_game/scenes/main_game_scene.py:96: in _execute_skill
    self._show_text(defender_creature, f""{defender_creature.display_name} took {final_damage} damage!"")
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
player = <main_game.models.Creature object at 0x[REDACTED]>
text = 'Dumbird took 13 damage!'

    def _show_text(self, player: AbstractPlayer, text: str):
        """""" this shows text as a popup """"""
>       player._listener.on_show_event(""show_text"", {""text"": text})
E       AttributeError: 'Creature' object has no attribute '_listener'

../../../../mge2/mini_game_engine/engine/lib.py:416: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
Default Player swapped Bubwool for Dumbird!
BotListener:on_show_event:show_text: {'text': ""Basic Opponent's Scizard used Fireball!""}
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::TestMainGameSceneRandomRun::test_main_game_scene_random_run
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/999765_217733_OneShotCoreAgent'],ladder/creature_battler_05_5/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 16:08:37,f4f1b718-3351-4f18-989f-876309537d0b,OneShotCoreAgent,creature_battler_05,6,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
__________ TestMainGameSceneRandomRun.test_main_game_scene_random_run __________

self = <tests.test_main_game_scene.TestMainGameSceneRandomRun object at 0x[REDACTED]>
app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene_random_run(self, app):
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 30  # Increased to 30 for more complex scene
    
            player = app.create_player(f""player_{i}"")
            main_game_scene = MainGameScene(app, player)
    
            class TransitionFromScene(Exception):
                pass
    
            def exit_scene(*args, **kwargs):
                raise TransitionFromScene()
    
            with patch.object(MainGameScene, '_transition_to_scene', side_effect=exit_scene) as mock_transition, \
                    patch.object(MainGameScene, '_quit_whole_game') as mock_quit:
    
                try:
>                   main_game_scene.run()

main_game/tests/test_main_game_scene.py:32: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:31: in run
    self.resolution_phase()
main_game/scenes/main_game_scene.py:104: in resolution_phase
    self.check_and_swap_if_fainted(player)
main_game/scenes/main_game_scene.py:136: in check_and_swap_if_fainted
    self.swap_creature(player, allow_back=False)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
player = Default Player, allow_back = False

    def swap_creature(self, player, allow_back=False):
        available_creatures = [creature for creature in player.creatures if creature.hp > 0 and creature != player.active_creature]
        if not available_creatures:
            self._show_text(player, ""No other creatures available to swap!"")
            return None
    
        creature_choices = [SelectThing(creature) for creature in available_creatures]
        if allow_back:
            back_button = Button(""Back"")
            creature_choices.append(back_button)
    
        choice = self._wait_for_choice(player, creature_choices)
    
>       if choice == back_button:
E       UnboundLocalError: cannot access local variable 'back_button' where it is not associated with a value

main_game/scenes/main_game_scene.py:81: UnboundLocalError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Scizard used Tackle and dealt 8 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
Scizard used Fireball and dealt 13 damage to Dumbird!
Dumbird used Tackle and dealt 1 damage to Scizard!
Dumbird has fainted!
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:552: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:668: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:712: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:422: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:668: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:712: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:28: in run
    self.foe_turn(self.opponent)
main_game/scenes/main_game_scene.py:63: in foe_turn
    swap_result = self.swap_creature(foe, allow_back=False)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
player = Basic Opponent, allow_back = False

    def swap_creature(self, player, allow_back=False):
        available_creatures = [creature for creature in player.creatures if creature.hp > 0 and creature != player.active_creature]
        if not available_creatures:
            self._show_text(player, ""No other creatures available to swap!"")
            return None
    
        creature_choices = [SelectThing(creature) for creature in available_creatures]
        if allow_back:
            back_button = Button(""Back"")
            creature_choices.append(back_button)
    
        choice = self._wait_for_choice(player, creature_choices)
    
>       if choice == back_button:
E       UnboundLocalError: cannot access local variable 'back_button' where it is not associated with a value

main_game/scenes/main_game_scene.py:81: UnboundLocalError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 1
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 2
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
----------------------------- Captured stderr call -----------------------------
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::TestMainGameSceneRandomRun::test_main_game_scene_random_run
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 274, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
__________ TestMainGameSceneRandomRun.test_main_game_scene_random_run __________

self = <tests.test_main_game_scene.TestMainGameSceneRandomRun object at 0x[REDACTED]>
app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene_random_run(self, app):
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 30  # Increased to 30 for more complex scene
    
            player = app.create_player(f""player_{i}"")
            main_game_scene = MainGameScene(app, player)
    
            class TransitionFromScene(Exception):
                pass
    
            def exit_scene(*args, **kwargs):
                raise TransitionFromScene()
    
            with patch.object(MainGameScene, '_transition_to_scene', side_effect=exit_scene) as mock_transition, \
                    patch.object(MainGameScene, '_quit_whole_game') as mock_quit:
    
                try:
>                   main_game_scene.run()

main_game/tests/test_main_game_scene.py:32: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:31: in run
    self.resolution_phase()
main_game/scenes/main_game_scene.py:104: in resolution_phase
    self.check_and_swap_if_fainted(player)
main_game/scenes/main_game_scene.py:136: in check_and_swap_if_fainted
    self.swap_creature(player, allow_back=False)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
player = Default Player, allow_back = False

    def swap_creature(self, player, allow_back=False):
        available_creatures = [creature for creature in player.creatures if creature.hp > 0 and creature != player.active_creature]
        if not available_creatures:
            self._show_text(player, ""No other creatures available to swap!"")
            return None
    
        creature_choices = [SelectThing(creature) for creature in available_creatures]
        if allow_back:
            back_button = Button(""Back"")
            creature_choices.append(back_button)
    
        choice = self._wait_for_choice(player, creature_choices)
    
>       if choice == back_button:
E       UnboundLocalError: cannot access local variable 'back_button' where it is not associated with a value

main_game/scenes/main_game_scene.py:81: UnboundLocalError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Scizard used Tackle and dealt 8 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
Scizard used Fireball and dealt 13 damage to Dumbird!
Dumbird used Tackle and dealt 1 damage to Scizard!
Dumbird has fainted!
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:552: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:668: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:712: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:422: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:668: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:712: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:28: in run
    self.foe_turn(self.opponent)
main_game/scenes/main_game_scene.py:63: in foe_turn
    swap_result = self.swap_creature(foe, allow_back=False)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
player = Basic Opponent, allow_back = False

    def swap_creature(self, player, allow_back=False):
        available_creatures = [creature for creature in player.creatures if creature.hp > 0 and creature != player.active_creature]
        if not available_creatures:
            self._show_text(player, ""No other creatures available to swap!"")
            return None
    
        creature_choices = [SelectThing(creature) for creature in available_creatures]
        if allow_back:
            back_button = Button(""Back"")
            creature_choices.append(back_button)
    
        choice = self._wait_for_choice(player, creature_choices)
    
>       if choice == back_button:
E       UnboundLocalError: cannot access local variable 'back_button' where it is not associated with a value

main_game/scenes/main_game_scene.py:81: UnboundLocalError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 1
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 2
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
----------------------------- Captured stderr call -----------------------------
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::TestMainGameSceneRandomRun::test_main_game_scene_random_run
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 92, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
__________ TestMainGameSceneRandomRun.test_main_game_scene_random_run __________

self = <tests.test_main_game_scene.TestMainGameSceneRandomRun object at 0x[REDACTED]>
app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene_random_run(self, app):
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 30  # Increased to 30 for more complex scene
    
            player = app.create_player(f""player_{i}"")
            main_game_scene = MainGameScene(app, player)
    
            class TransitionFromScene(Exception):
                pass
    
            def exit_scene(*args, **kwargs):
                raise TransitionFromScene()
    
            with patch.object(MainGameScene, '_transition_to_scene', side_effect=exit_scene) as mock_transition, \
                    patch.object(MainGameScene, '_quit_whole_game') as mock_quit:
    
                try:
>                   main_game_scene.run()

main_game/tests/test_main_game_scene.py:32: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:31: in run
    self.resolution_phase()
main_game/scenes/main_game_scene.py:104: in resolution_phase
    self.check_and_swap_if_fainted(player)
main_game/scenes/main_game_scene.py:136: in check_and_swap_if_fainted
    self.swap_creature(player, allow_back=False)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
player = Default Player, allow_back = False

    def swap_creature(self, player, allow_back=False):
        available_creatures = [creature for creature in player.creatures if creature.hp > 0 and creature != player.active_creature]
        if not available_creatures:
            self._show_text(player, ""No other creatures available to swap!"")
            return None
    
        creature_choices = [SelectThing(creature) for creature in available_creatures]
        if allow_back:
            back_button = Button(""Back"")
            creature_choices.append(back_button)
    
        choice = self._wait_for_choice(player, creature_choices)
    
>       if choice == back_button:
E       UnboundLocalError: cannot access local variable 'back_button' where it is not associated with a value

main_game/scenes/main_game_scene.py:81: UnboundLocalError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Scizard used Tackle and dealt 8 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
Scizard used Fireball and dealt 13 damage to Dumbird!
Dumbird used Tackle and dealt 1 damage to Scizard!
Dumbird has fainted!
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:552: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:668: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:712: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:422: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:668: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:712: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:28: in run
    self.foe_turn(self.opponent)
main_game/scenes/main_game_scene.py:63: in foe_turn
    swap_result = self.swap_creature(foe, allow_back=False)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
player = Basic Opponent, allow_back = False

    def swap_creature(self, player, allow_back=False):
        available_creatures = [creature for creature in player.creatures if creature.hp > 0 and creature != player.active_creature]
        if not available_creatures:
            self._show_text(player, ""No other creatures available to swap!"")
            return None
    
        creature_choices = [SelectThing(creature) for creature in available_creatures]
        if allow_back:
            back_button = Button(""Back"")
            creature_choices.append(back_button)
    
        choice = self._wait_for_choice(player, creature_choices)
    
>       if choice == back_button:
E       UnboundLocalError: cannot access local variable 'back_button' where it is not associated with a value

main_game/scenes/main_game_scene.py:81: UnboundLocalError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 1
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 2
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
----------------------------- Captured stderr call -----------------------------
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
16:08.37 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named selected_actions (type=<class 'dict'>)
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::TestMainGameSceneRandomRun::test_main_game_scene_random_run
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/999771_556901_OneShotCoreAgent'],ladder/creature_battler_05_6/main_game,https://github.com/volter-ai/volter-monorepo/blob/40e57a9a0f1cfea6f42e79f171fb75c73a794307/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
