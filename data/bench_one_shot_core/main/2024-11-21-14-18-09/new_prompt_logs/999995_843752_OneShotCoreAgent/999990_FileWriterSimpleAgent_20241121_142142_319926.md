Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
1. Analysis and Solution:
The issue is that we need to reset creature HP when transitioning out of MainGameScene. According to the docs, we need to "reset the state of the player's creatures" when transitioning out.

Since models must be pure data schemas, we can't add methods to them. Instead, we should handle this in the MainGameScene by resetting HP to max_hp before transitioning. This should be done for both the player's and bot's creatures to maintain symmetry.

The fix should be in MainGameScene's _check_battle_end method, where we do the transitions.

2. Here's the fixed MainGameScene:

# Excerpt ID: 5b6de321-9876-4cf8-aac7-8e976bf15b20
```python main_game/scenes/main_game_scene.py
from mini_game_engine.engine.lib import AbstractGameScene, Button, DictionaryChoice
from main_game.models import Player

class MainGameScene(AbstractGameScene):
    def __init__(self, app, player):
        super().__init__(app, player)
        self.bot = app.create_bot("default_player")
        self.player_creature = self.player.creatures[0]
        self.bot_creature = self.bot.creatures[0]
        self.queued_actions = []

    def __str__(self):
        return f"""=== Battle Scene ===
{self.player.display_name}'s {self.player_creature.display_name}: {self.player_creature.hp}/{self.player_creature.max_hp} HP
{self.bot.display_name}'s {self.bot_creature.display_name}: {self.bot_creature.hp}/{self.bot_creature.max_hp} HP

Available Skills:
{chr(10).join([f"> {skill.display_name} - {skill.description}" for skill in self.player_creature.skills])}
"""

    def run(self):
        self._show_text(self.player, "Battle Start!")
        self._show_text(self.bot, "Battle Start!")

        while True:
            # Player Choice Phase
            player_skill = self._handle_turn(self.player, self.player_creature)
            
            # Bot Choice Phase
            bot_skill = self._handle_turn(self.bot, self.bot_creature)

            # Resolution Phase
            self._resolve_skills(player_skill, bot_skill)

            # Check win condition
            if self._check_battle_end():
                break

    def _handle_turn(self, current_player, creature):
        choices = [DictionaryChoice(skill.display_name) for skill in creature.skills]
        for i, skill in enumerate(creature.skills):
            choices[i].value = {"skill": skill}
        
        choice = self._wait_for_choice(current_player, choices)
        return choice.value["skill"]

    def _resolve_skills(self, player_skill, bot_skill):
        # Apply player skill
        self.bot_creature.hp -= player_skill.damage
        self._show_text(self.player, f"Your {self.player_creature.display_name} used {player_skill.display_name}!")
        self._show_text(self.bot, f"Opponent's {self.player_creature.display_name} used {player_skill.display_name}!")

        # Apply bot skill if still alive
        if self.bot_creature.hp > 0:
            self.player_creature.hp -= bot_skill.damage
            self._show_text(self.player, f"Opponent's {self.bot_creature.display_name} used {bot_skill.display_name}!")
            self._show_text(self.bot, f"Your {self.bot_creature.display_name} used {bot_skill.display_name}!")

    def _check_battle_end(self):
        if self.player_creature.hp <= 0:
            self._show_text(self.player, "You lost!")
            self._show_text(self.bot, "You won!")
            # Reset creature states before transitioning
            self._reset_creatures()
            self._transition_to_scene("MainMenuScene")
            return True
        elif self.bot_creature.hp <= 0:
            self._show_text(self.player, "You won!")
            self._show_text(self.bot, "You lost!")
            # Reset creature states before transitioning
            self._reset_creatures()
            self._transition_to_scene("MainMenuScene") 
            return True
        return False

    def _reset_creatures(self):
        # Reset all creatures to their max HP
        for creature in self.player.creatures:
            creature.hp = creature.max_hp
        for creature in self.bot.creatures:
            creature.hp = creature.max_hp
```

The key changes are:
1. Added _reset_creatures method to handle resetting creature HP
2. Called _reset_creatures before each transition in _check_battle_end
3. Reset both player and bot creatures to maintain symmetry

This solution:
- Keeps models as pure data schemas
- Handles state reset in the scene layer
- Maintains proper separation of concerns
- Follows the engine's capabilities
- Fulfills the requirement to reset creature state when transitioning

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
