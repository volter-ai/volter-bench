Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
The issue is in the test_main_game_scene.py file. The test is failing because when MainGameScene transitions to MainMenuScene, the menu scene is quitting the game, which raises an uncaught QuitWholeGame exception.

For testing scenes in isolation, we need to patch the _transition_to_scene method to prevent it from actually transitioning to other scenes during testing. This is a common pattern in testing - we want to test just the MainGameScene's behavior without actually transitioning to other scenes.

Here's how I'll fix the test file:

# Excerpt ID: bc5d7af5-17e6-421c-a1e6-46d460608d23
```python main_game/tests/test_main_game_scene.py
import pytest
from unittest.mock import patch
from mini_game_engine.engine.lib import HumanListener, RandomModeGracefulExit
from main_game.scenes.main_game_scene import MainGameScene
from main_game.main import App

class TestMainGameSceneRandomRun:
    @pytest.fixture
    def app(self):
        return App()

    def test_main_game_scene_random_run(self, app):
        for i in range(10):
            print(f"starting random run iteration {i}")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 30  # Need more moves for battle scene

            player = app.create_player(f"player_{i}")
            main_game_scene = MainGameScene(app, player)

            # Patch _transition_to_scene to end the test gracefully when scene is complete
            with patch.object(MainGameScene, '_transition_to_scene') as mock_transition:
                def end_scene(*args, **kwargs):
                    raise RandomModeGracefulExit()
                mock_transition.side_effect = end_scene

                try:
                    main_game_scene.run()
                except RandomModeGracefulExit:
                    print(f"Scene completed successfully for run {i}")
```

The key changes are:
1. Added a patch for _transition_to_scene that raises RandomModeGracefulExit
2. This allows us to test the scene in isolation without actually transitioning
3. Using RandomModeGracefulExit as it's already handled by the test framework
4. Maintains the scene architecture while allowing proper testing
5. Doesn't require any changes to the actual game code

This solution:
- Stays within the engine's capabilities
- Doesn't modify any models
- Properly tests the scene's behavior
- Handles the test completion gracefully
- Follows testing best practices for scene isolation

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
