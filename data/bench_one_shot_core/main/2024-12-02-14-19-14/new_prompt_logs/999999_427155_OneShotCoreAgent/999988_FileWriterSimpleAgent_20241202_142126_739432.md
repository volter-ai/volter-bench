Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
1. Analysis and Solution:
Looking at the docs/scenes/main_game_scene.md, it states:
"When transitioning out of this scene, reset the state of the player's creatures."

Currently, we only reset creatures at the start of battle, but not when transitioning out. Following the architecture:
- We can't add methods to models
- All logic must be in scenes
- We should reset before transitioning to MainMenuScene

The solution is to add creature HP reset logic in MainGameScene just before the transition back to MainMenuScene. This ensures creatures are ready for the next battle.

2. Here's the fixed MainGameScene:

# Excerpt ID: 2718a800-f267-482e-9084-ef113f2524af
```python main_game/scenes/main_game_scene.py
from mini_game_engine.engine.lib import AbstractGameScene, Button
from main_game.models import Player

class MainGameScene(AbstractGameScene):
    def __init__(self, app, player):
        super().__init__(app, player)
        self.bot = app.create_bot("default_player")
        self.player_creature = player.creatures[0]
        self.bot_creature = self.bot.creatures[0]
        
        # Reset creatures at start
        self.player_creature.hp = self.player_creature.max_hp
        self.bot_creature.hp = self.bot_creature.max_hp

    def __str__(self):
        return f"""=== Battle ===
Your {self.player_creature.display_name}: {self.player_creature.hp}/{self.player_creature.max_hp} HP
Foe {self.bot_creature.display_name}: {self.bot_creature.hp}/{self.bot_creature.max_hp} HP

Available Skills:
{chr(10).join([f"> {skill.display_name} ({skill.damage} damage)" for skill in self.player_creature.skills])}
"""

    def run(self):
        self._show_text(self.player, "A battle begins!")
        
        while True:
            # Player turn
            player_skill = self._wait_for_choice(
                self.player, 
                [Button(skill.display_name) for skill in self.player_creature.skills]
            )
            player_skill_obj = next(s for s in self.player_creature.skills if s.display_name == player_skill.display_name)

            # Bot turn
            bot_skill = self._wait_for_choice(
                self.bot,
                [Button(skill.display_name) for skill in self.bot_creature.skills]
            )
            bot_skill_obj = next(s for s in self.bot_creature.skills if s.display_name == bot_skill.display_name)

            # Resolution
            self._show_text(self.player, f"Your {self.player_creature.display_name} used {player_skill_obj.display_name}!")
            self.bot_creature.hp -= player_skill_obj.damage
            
            if self.bot_creature.hp <= 0:
                self._show_text(self.player, "You won!")
                break

            self._show_text(self.player, f"Foe {self.bot_creature.display_name} used {bot_skill_obj.display_name}!")
            self.player_creature.hp -= bot_skill_obj.damage
            
            if self.player_creature.hp <= 0:
                self._show_text(self.player, "You lost!")
                break

        # Reset all player creatures before transitioning out
        for creature in self.player.creatures:
            creature.hp = creature.max_hp

        self._transition_to_scene("MainMenuScene")
```

The key changes are:
1. Added a loop before transitioning to reset all player creatures' HP to their max_hp
2. This ensures creatures are ready for the next battle when the player returns to MainGameScene
3. Keeps all logic in the scene and models remain pure data schemas
4. Follows the requirement from the documentation to reset state when transitioning out

This maintains proper separation of concerns while implementing the missing requirement from the documentation.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
