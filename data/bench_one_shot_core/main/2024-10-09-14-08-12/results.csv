timestamp,run_id,agent_id,ladder,run,status,error,traceback,logs,project_directory,commit_url
2024-10-09 14:09:54,f80ae5ea-1801-41ff-b0fe-5992a7dcc14d,OneShotCoreAgent,creature_battler_02,1,success,,,['new_prompt_logs/999816_107333_OneShotCoreAgent'],ladder/creature_battler_02_1/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:09:57,a9fd5e0e-d403-4d74-907e-6c5f6bfd855d,OneShotCoreAgent,creature_battler_02,4,success,,,['new_prompt_logs/999813_763846_OneShotCoreAgent'],ladder/creature_battler_02_4/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:10:22,c40c0dc5-34cf-4a76-bf29-d586fb3100df,OneShotCoreAgent,creature_battler_01,3,success,,,['new_prompt_logs/999819_807222_OneShotCoreAgent'],ladder/creature_battler_01_3/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:10:29,a4802f18-9357-4d4b-9806-4d1f14c60e68,OneShotCoreAgent,creature_battler_01,7,success,,,['new_prompt_logs/999815_420442_OneShotCoreAgent'],ladder/creature_battler_01_7/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:10:30,cbeebba9-2566-46db-b41a-dde182111e31,OneShotCoreAgent,creature_battler_01,2,success,,,['new_prompt_logs/999821_137935_OneShotCoreAgent'],ladder/creature_battler_01_2/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:10:33,63c56c68-46f3-4aca-b252-8e71eb4487cf,OneShotCoreAgent,creature_battler_02,5,success,,,['new_prompt_logs/999811_443941_OneShotCoreAgent'],ladder/creature_battler_02_5/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:10:34,c924d892-0975-4aa0-bd91-78feea460b60,OneShotCoreAgent,creature_battler_01,5,success,,,['new_prompt_logs/999820_324271_OneShotCoreAgent'],ladder/creature_battler_01_5/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:10:50,679f7682-6a58-4612-b6dc-2614bba2152d,OneShotCoreAgent,creature_battler_02,2,success,,,['new_prompt_logs/999814_772123_OneShotCoreAgent'],ladder/creature_battler_02_2/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:11:11,d6d1bf22-15bc-4f08-a838-80bd656682b3,OneShotCoreAgent,creature_battler_01,4,success,,,['new_prompt_logs/999817_240382_OneShotCoreAgent'],ladder/creature_battler_01_4/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:11:26,ed27d4eb-d553-4901-85fd-190669f426fe,OneShotCoreAgent,creature_battler_01,6,success,,,['new_prompt_logs/999818_639602_OneShotCoreAgent'],ladder/creature_battler_01_6/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:11:26,c706376c-6eeb-4609-8d1a-cfba8972d429,OneShotCoreAgent,creature_battler_01,1,success,,,['new_prompt_logs/999822_427109_OneShotCoreAgent'],ladder/creature_battler_01_1/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:11:27,d91d34ad-8c28-4463-8ba3-9b197b98315e,OneShotCoreAgent,creature_battler_02,3,success,,,['new_prompt_logs/999812_102201_OneShotCoreAgent'],ladder/creature_battler_02_3/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:11:39,4b980295-399d-495a-bb36-d23de913b499,OneShotCoreAgent,creature_battler_02,6,success,,,['new_prompt_logs/999816_107333_OneShotCoreAgent'],ladder/creature_battler_02_6/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:13:18,b0617a54-fd52-4d31-86e2-6c7b20fe09a2,OneShotCoreAgent,creature_battler_03,3,success,,,['new_prompt_logs/999821_137935_OneShotCoreAgent'],ladder/creature_battler_03_3/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:13:22,861d7016-f6c8-4b7f-9a80-cf5e03e231df,OneShotCoreAgent,creature_battler_03,2,success,,,['new_prompt_logs/999815_420442_OneShotCoreAgent'],ladder/creature_battler_03_2/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:13:33,c01878f7-68a0-4b90-ac83-f7ec110d9e3a,OneShotCoreAgent,creature_battler_03,6,success,,,['new_prompt_logs/999814_772123_OneShotCoreAgent'],ladder/creature_battler_03_6/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:13:36,50f79280-7fa0-45fd-a588-85bbe49036cd,OneShotCoreAgent,creature_battler_02,7,success,,,['new_prompt_logs/999813_763846_OneShotCoreAgent'],ladder/creature_battler_02_7/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:13:49,fb46b2f7-1f2f-483b-ac08-94a2bb455e8d,OneShotCoreAgent,creature_battler_03,1,success,,,['new_prompt_logs/999819_807222_OneShotCoreAgent'],ladder/creature_battler_03_1/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:14:00,63ca82bf-bba5-4639-9dd3-545f1d11fbe0,OneShotCoreAgent,creature_battler_03,7,success,,,['new_prompt_logs/999817_240382_OneShotCoreAgent'],ladder/creature_battler_03_7/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:14:33,9142d5d3-bc7f-48d6-a7b3-738ecfd2c800,OneShotCoreAgent,creature_battler_04,4,success,,,['new_prompt_logs/999816_107333_OneShotCoreAgent'],ladder/creature_battler_04_4/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:16:21,4f18e042-4aab-4316-907a-45dcced111ae,OneShotCoreAgent,creature_battler_03,4,success,,,['new_prompt_logs/999811_443941_OneShotCoreAgent'],ladder/creature_battler_03_4/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:16:52,c67a228f-9b62-45dc-8074-fc03afc292fa,OneShotCoreAgent,creature_battler_04,3,success,,,['new_prompt_logs/999812_102201_OneShotCoreAgent'],ladder/creature_battler_04_3/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:17:00,45a95f99-bf4f-4971-9bde-f384905780a4,OneShotCoreAgent,creature_battler_04,2,success,,,['new_prompt_logs/999822_427109_OneShotCoreAgent'],ladder/creature_battler_04_2/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:17:27,265b457e-5fd6-4314-870a-959934366701,OneShotCoreAgent,creature_battler_04,1,success,,,['new_prompt_logs/999818_639602_OneShotCoreAgent'],ladder/creature_battler_04_1/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:18:17,3e0fefb5-b3c5-40a1-915e-bf4558358baf,OneShotCoreAgent,creature_battler_05,2,success,,,['new_prompt_logs/999819_807222_OneShotCoreAgent'],ladder/creature_battler_05_2/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:18:54,223927f5-8643-4869-bd0e-206e51d0dcb7,OneShotCoreAgent,creature_battler_03,5,success,,,['new_prompt_logs/999820_324271_OneShotCoreAgent'],ladder/creature_battler_03_5/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:19:15,8e6c406b-c2fa-4fad-bd7b-7512c619cddf,OneShotCoreAgent,creature_battler_04,5,success,,,['new_prompt_logs/999821_137935_OneShotCoreAgent'],ladder/creature_battler_04_5/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:19:59,dc8d85f4-3513-4e05-8777-1d3c8f4c36c3,OneShotCoreAgent,creature_battler_05,1,success,,,['new_prompt_logs/999813_763846_OneShotCoreAgent'],ladder/creature_battler_05_1/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:20:17,43321af6-b3e5-489f-8b6d-7b51f4682066,OneShotCoreAgent,creature_battler_05,3,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.3.1, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
__________ TestMainGameSceneRandomRun.test_main_game_scene_random_run __________

self = <tests.test_main_game_scene.TestMainGameSceneRandomRun object at 0x[REDACTED]>
app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene_random_run(self, app):
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 30  # Increased to 30 for more complex scene
    
            player = app.create_player(f""player_{i}"")
            main_game_scene = MainGameScene(app, player)
    
            class TransitionFromScene(Exception):
                pass
    
            def exit_scene(*args, **kwargs):
                raise TransitionFromScene()
    
            with patch.object(MainGameScene, '_transition_to_scene', side_effect=exit_scene) as mock_transition:
                try:
>                   main_game_scene.run()

main_game/tests/test_main_game_scene.py:30: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:36: in run
    self._resolve_turn()
main_game/scenes/main_game_scene.py:102: in _resolve_turn
    self._execute_queued_attack(second[0], second[1][1])
main_game/scenes/main_game_scene.py:140: in _execute_queued_attack
    self._execute_attack(attacker, skill)
main_game/scenes/main_game_scene.py:135: in _execute_attack
    damage = self._calculate_damage(attacking_creature, defending_creature, skill)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
attacker = <main_game.models.Creature object at 0x[REDACTED]>
defender = <main_game.models.Creature object at 0x[REDACTED]>
skill = <main_game.models.Creature object at 0x[REDACTED]>

    def _calculate_damage(self, attacker: Creature, defender: Creature, skill: Skill):
>       if skill.is_physical:
E       AttributeError: 'Creature' object has no attribute 'is_physical'

main_game/scenes/main_game_scene.py:143: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
Basic Opponent swapped to Dumbird!
Bubwool used Tackle and dealt 9 damage to Dumbird!
Dumbird used Tackle and dealt 4 damage to Bubwool!
Bubwool used Tackle and dealt 9 damage to Dumbird!
Basic Opponent sent out Scizard!
Default Player swapped to Dumbird!
Scizard used Fireball and dealt 13 damage to Dumbird!
Dumbird used Tackle and dealt 1 damage to Scizard!
Scizard used Fireball and dealt 13 damage to Dumbird!
Dumbird has fainted! Choose a new creature.
You must choose a new creature!
Default Player sent out Bubwool!
BotListener:on_show_event:show_text: {'text': 'No other creatures available to swap!'}
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
No other creatures available to swap!
No other creatures available to swap!
No other creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'No other creatures available to swap!'}
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
No other creatures available to swap!
No other creatures available to swap!
`random_mode_counter` reached 0 and the game did not crash. Ending run 0 gracefully
starting random run iteration 1
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
Default Player swapped to Bubwool!
Scizard used Tackle and dealt 8 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
Dumbird has fainted! Choose a new creature.
You must choose a new creature!
You must choose a new creature!
You must choose a new creature!
Default Player sent out Bubwool!
No other creatures available to swap!
No other creatures available to swap!
No other creatures available to swap!
No other creatures available to swap!
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
No other creatures available to swap!
No other creatures available to swap!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
`random_mode_counter` reached 0 and the game did not crash. Ending run 1 gracefully
starting random run iteration 2
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
Default Player swapped to Bubwool!
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:36: in run
    self._resolve_turn()
main_game/scenes/main_game_scene.py:102: in _resolve_turn
    self._execute_queued_attack(second[0], second[1][1])
main_game/scenes/main_game_scene.py:140: in _execute_queued_attack
    self._execute_attack(attacker, skill)
main_game/scenes/main_game_scene.py:135: in _execute_attack
    damage = self._calculate_damage(attacking_creature, defending_creature, skill)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
attacker = <main_game.models.Creature object at 0x[REDACTED]>
defender = <main_game.models.Creature object at 0x[REDACTED]>
skill = <main_game.models.Creature object at 0x[REDACTED]>

    def _calculate_damage(self, attacker: Creature, defender: Creature, skill: Skill):
>       if skill.is_physical:
E       AttributeError: 'Creature' object has no attribute 'is_physical'

main_game/scenes/main_game_scene.py:143: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
Dumbird used Tackle and dealt 1 damage to Scizard!
Scizard used Fireball and dealt 13 damage to Dumbird!
Dumbird has fainted! Choose a new creature.
Default Player sent out Bubwool!
Basic Opponent swapped to Dumbird!
Bubwool used Tackle and dealt 9 damage to Dumbird!
Basic Opponent swapped to Scizard!
Bubwool used Tackle and dealt 5 damage to Scizard!
No other creatures available to swap!
No other creatures available to swap!
No other creatures available to swap!
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
No other creatures available to swap!
No other creatures available to swap!
No other creatures available to swap!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Basic Opponent swapped to Dumbird!
Bubwool used Tackle and dealt 9 damage to Dumbird!
Basic Opponent sent out Scizard!
No other creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'No other creatures available to swap!'}
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
No other creatures available to swap!
Bubwool used Lick and dealt 6 damage to Scizard!
You won the battle!
You won the battle!
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 1
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 2
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 3
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
Default Player swapped to Dumbird!
----------------------------- Captured stderr call -----------------------------
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::TestMainGameSceneRandomRun::test_main_game_scene_random_run
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 274, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.3.1, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
__________ TestMainGameSceneRandomRun.test_main_game_scene_random_run __________

self = <tests.test_main_game_scene.TestMainGameSceneRandomRun object at 0x[REDACTED]>
app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene_random_run(self, app):
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 30  # Increased to 30 for more complex scene
    
            player = app.create_player(f""player_{i}"")
            main_game_scene = MainGameScene(app, player)
    
            class TransitionFromScene(Exception):
                pass
    
            def exit_scene(*args, **kwargs):
                raise TransitionFromScene()
    
            with patch.object(MainGameScene, '_transition_to_scene', side_effect=exit_scene) as mock_transition:
                try:
>                   main_game_scene.run()

main_game/tests/test_main_game_scene.py:30: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:36: in run
    self._resolve_turn()
main_game/scenes/main_game_scene.py:102: in _resolve_turn
    self._execute_queued_attack(second[0], second[1][1])
main_game/scenes/main_game_scene.py:140: in _execute_queued_attack
    self._execute_attack(attacker, skill)
main_game/scenes/main_game_scene.py:135: in _execute_attack
    damage = self._calculate_damage(attacking_creature, defending_creature, skill)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
attacker = <main_game.models.Creature object at 0x[REDACTED]>
defender = <main_game.models.Creature object at 0x[REDACTED]>
skill = <main_game.models.Creature object at 0x[REDACTED]>

    def _calculate_damage(self, attacker: Creature, defender: Creature, skill: Skill):
>       if skill.is_physical:
E       AttributeError: 'Creature' object has no attribute 'is_physical'

main_game/scenes/main_game_scene.py:143: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
Basic Opponent swapped to Dumbird!
Bubwool used Tackle and dealt 9 damage to Dumbird!
Dumbird used Tackle and dealt 4 damage to Bubwool!
Bubwool used Tackle and dealt 9 damage to Dumbird!
Basic Opponent sent out Scizard!
Default Player swapped to Dumbird!
Scizard used Fireball and dealt 13 damage to Dumbird!
Dumbird used Tackle and dealt 1 damage to Scizard!
Scizard used Fireball and dealt 13 damage to Dumbird!
Dumbird has fainted! Choose a new creature.
You must choose a new creature!
Default Player sent out Bubwool!
BotListener:on_show_event:show_text: {'text': 'No other creatures available to swap!'}
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
No other creatures available to swap!
No other creatures available to swap!
No other creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'No other creatures available to swap!'}
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
No other creatures available to swap!
No other creatures available to swap!
`random_mode_counter` reached 0 and the game did not crash. Ending run 0 gracefully
starting random run iteration 1
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
Default Player swapped to Bubwool!
Scizard used Tackle and dealt 8 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
Dumbird has fainted! Choose a new creature.
You must choose a new creature!
You must choose a new creature!
You must choose a new creature!
Default Player sent out Bubwool!
No other creatures available to swap!
No other creatures available to swap!
No other creatures available to swap!
No other creatures available to swap!
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
No other creatures available to swap!
No other creatures available to swap!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
`random_mode_counter` reached 0 and the game did not crash. Ending run 1 gracefully
starting random run iteration 2
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
Default Player swapped to Bubwool!
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:36: in run
    self._resolve_turn()
main_game/scenes/main_game_scene.py:102: in _resolve_turn
    self._execute_queued_attack(second[0], second[1][1])
main_game/scenes/main_game_scene.py:140: in _execute_queued_attack
    self._execute_attack(attacker, skill)
main_game/scenes/main_game_scene.py:135: in _execute_attack
    damage = self._calculate_damage(attacking_creature, defending_creature, skill)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
attacker = <main_game.models.Creature object at 0x[REDACTED]>
defender = <main_game.models.Creature object at 0x[REDACTED]>
skill = <main_game.models.Creature object at 0x[REDACTED]>

    def _calculate_damage(self, attacker: Creature, defender: Creature, skill: Skill):
>       if skill.is_physical:
E       AttributeError: 'Creature' object has no attribute 'is_physical'

main_game/scenes/main_game_scene.py:143: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
Dumbird used Tackle and dealt 1 damage to Scizard!
Scizard used Fireball and dealt 13 damage to Dumbird!
Dumbird has fainted! Choose a new creature.
Default Player sent out Bubwool!
Basic Opponent swapped to Dumbird!
Bubwool used Tackle and dealt 9 damage to Dumbird!
Basic Opponent swapped to Scizard!
Bubwool used Tackle and dealt 5 damage to Scizard!
No other creatures available to swap!
No other creatures available to swap!
No other creatures available to swap!
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
No other creatures available to swap!
No other creatures available to swap!
No other creatures available to swap!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Basic Opponent swapped to Dumbird!
Bubwool used Tackle and dealt 9 damage to Dumbird!
Basic Opponent sent out Scizard!
No other creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'No other creatures available to swap!'}
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
No other creatures available to swap!
Bubwool used Lick and dealt 6 damage to Scizard!
You won the battle!
You won the battle!
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 1
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 2
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 3
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
Default Player swapped to Dumbird!
----------------------------- Captured stderr call -----------------------------
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::TestMainGameSceneRandomRun::test_main_game_scene_random_run
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 92, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.3.1, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
__________ TestMainGameSceneRandomRun.test_main_game_scene_random_run __________

self = <tests.test_main_game_scene.TestMainGameSceneRandomRun object at 0x[REDACTED]>
app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene_random_run(self, app):
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 30  # Increased to 30 for more complex scene
    
            player = app.create_player(f""player_{i}"")
            main_game_scene = MainGameScene(app, player)
    
            class TransitionFromScene(Exception):
                pass
    
            def exit_scene(*args, **kwargs):
                raise TransitionFromScene()
    
            with patch.object(MainGameScene, '_transition_to_scene', side_effect=exit_scene) as mock_transition:
                try:
>                   main_game_scene.run()

main_game/tests/test_main_game_scene.py:30: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:36: in run
    self._resolve_turn()
main_game/scenes/main_game_scene.py:102: in _resolve_turn
    self._execute_queued_attack(second[0], second[1][1])
main_game/scenes/main_game_scene.py:140: in _execute_queued_attack
    self._execute_attack(attacker, skill)
main_game/scenes/main_game_scene.py:135: in _execute_attack
    damage = self._calculate_damage(attacking_creature, defending_creature, skill)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
attacker = <main_game.models.Creature object at 0x[REDACTED]>
defender = <main_game.models.Creature object at 0x[REDACTED]>
skill = <main_game.models.Creature object at 0x[REDACTED]>

    def _calculate_damage(self, attacker: Creature, defender: Creature, skill: Skill):
>       if skill.is_physical:
E       AttributeError: 'Creature' object has no attribute 'is_physical'

main_game/scenes/main_game_scene.py:143: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
Basic Opponent swapped to Dumbird!
Bubwool used Tackle and dealt 9 damage to Dumbird!
Dumbird used Tackle and dealt 4 damage to Bubwool!
Bubwool used Tackle and dealt 9 damage to Dumbird!
Basic Opponent sent out Scizard!
Default Player swapped to Dumbird!
Scizard used Fireball and dealt 13 damage to Dumbird!
Dumbird used Tackle and dealt 1 damage to Scizard!
Scizard used Fireball and dealt 13 damage to Dumbird!
Dumbird has fainted! Choose a new creature.
You must choose a new creature!
Default Player sent out Bubwool!
BotListener:on_show_event:show_text: {'text': 'No other creatures available to swap!'}
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
No other creatures available to swap!
No other creatures available to swap!
No other creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'No other creatures available to swap!'}
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
No other creatures available to swap!
No other creatures available to swap!
`random_mode_counter` reached 0 and the game did not crash. Ending run 0 gracefully
starting random run iteration 1
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
Default Player swapped to Bubwool!
Scizard used Tackle and dealt 8 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
Dumbird has fainted! Choose a new creature.
You must choose a new creature!
You must choose a new creature!
You must choose a new creature!
Default Player sent out Bubwool!
No other creatures available to swap!
No other creatures available to swap!
No other creatures available to swap!
No other creatures available to swap!
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
No other creatures available to swap!
No other creatures available to swap!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
`random_mode_counter` reached 0 and the game did not crash. Ending run 1 gracefully
starting random run iteration 2
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
Default Player swapped to Bubwool!
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:36: in run
    self._resolve_turn()
main_game/scenes/main_game_scene.py:102: in _resolve_turn
    self._execute_queued_attack(second[0], second[1][1])
main_game/scenes/main_game_scene.py:140: in _execute_queued_attack
    self._execute_attack(attacker, skill)
main_game/scenes/main_game_scene.py:135: in _execute_attack
    damage = self._calculate_damage(attacking_creature, defending_creature, skill)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
attacker = <main_game.models.Creature object at 0x[REDACTED]>
defender = <main_game.models.Creature object at 0x[REDACTED]>
skill = <main_game.models.Creature object at 0x[REDACTED]>

    def _calculate_damage(self, attacker: Creature, defender: Creature, skill: Skill):
>       if skill.is_physical:
E       AttributeError: 'Creature' object has no attribute 'is_physical'

main_game/scenes/main_game_scene.py:143: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
Default Player swapped to Dumbird!
Scizard used Tackle and dealt 9 damage to Dumbird!
Dumbird used Tackle and dealt 1 damage to Scizard!
Scizard used Fireball and dealt 13 damage to Dumbird!
Dumbird has fainted! Choose a new creature.
Default Player sent out Bubwool!
Basic Opponent swapped to Dumbird!
Bubwool used Tackle and dealt 9 damage to Dumbird!
Basic Opponent swapped to Scizard!
Bubwool used Tackle and dealt 5 damage to Scizard!
No other creatures available to swap!
No other creatures available to swap!
No other creatures available to swap!
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
No other creatures available to swap!
No other creatures available to swap!
No other creatures available to swap!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Basic Opponent swapped to Dumbird!
Bubwool used Tackle and dealt 9 damage to Dumbird!
Basic Opponent sent out Scizard!
No other creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'No other creatures available to swap!'}
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
Bubwool used Tackle and dealt 5 damage to Scizard!
Scizard used Fireball and dealt 2 damage to Bubwool!
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
No other creatures available to swap!
Bubwool used Lick and dealt 6 damage to Scizard!
You won the battle!
You won the battle!
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 1
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 2
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 3
Bubwool used Lick and dealt 6 damage to Scizard!
Scizard used Tackle and dealt 8 damage to Bubwool!
Default Player swapped to Dumbird!
----------------------------- Captured stderr call -----------------------------
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named player_action (type=<class 'tuple'>)
14:20.17 - mydantic.py:406      - WARNING got a unserializable attribute on the GameEntity MainGameScene named bot_action (type=<class 'tuple'>)
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::TestMainGameSceneRandomRun::test_main_game_scene_random_run
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/999817_240382_OneShotCoreAgent'],ladder/creature_battler_05_3/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:20:38,4b6c70db-e2f4-4e24-9e03-d3d666707bdc,OneShotCoreAgent,creature_battler_04,7,success,,,['new_prompt_logs/999814_772123_OneShotCoreAgent'],ladder/creature_battler_04_7/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:20:49,fd151fe1-4a0a-4aa3-b647-5446d82c8390,OneShotCoreAgent,creature_battler_05,5,success,,,['new_prompt_logs/999811_443941_OneShotCoreAgent'],ladder/creature_battler_05_5/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:21:05,83a70a8d-5cc8-40b9-9309-91bd081e8272,OneShotCoreAgent,creature_battler_05,4,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.3.1, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py .                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...cret='qVGt7qag4PU+ZIKRZNUsImurt0dmqQGh56w9k1CoGCE9VoaNUpjxC6mIpHpw5oEApvtDVQK7pMYjCFupQ6FSbQ==', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 1
Default Player swapped to Dumbird!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball and dealt 13 damage!'}
Dumbird used Tackle and dealt 1 damage!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball and dealt 13 damage!'}
Dumbird has fainted! Choose a new creature:
Default Player sent out Bubwool!
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
Default Player couldn't take any action this turn.
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Bubwool used Tackle and dealt 9 damage!
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Scizard!'}
Default Player couldn't take any action this turn.
Default Player has no creatures available to swap!
Default Player couldn't take any action this turn.
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball and dealt 2 damage!'}
Bubwool used Lick and dealt 6 damage!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 8 damage!'}
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
Default Player couldn't take any action this turn.
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Default Player couldn't take any action this turn.
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Default Player couldn't take any action this turn.
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Bubwool used Lick and dealt 7 damage!
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Default Player couldn't take any action this turn.
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Bubwool used Tackle and dealt 9 damage!
Default Player has no more creatures able to battle!
BotListener:on_show_event:show_text: {'text': 'Dumbird has fainted! Choose a new creature:'}
BotListener:on_show_event:show_text: {'text': 'Basic Opponent sent out Scizard!'}
You lost the battle. Better luck next time!
All creatures have been restored to full health.
=========================== short test summary info ============================
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 1 failed, 2 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 274, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.3.1, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py .                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...cret='qVGt7qag4PU+ZIKRZNUsImurt0dmqQGh56w9k1CoGCE9VoaNUpjxC6mIpHpw5oEApvtDVQK7pMYjCFupQ6FSbQ==', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 1
Default Player swapped to Dumbird!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball and dealt 13 damage!'}
Dumbird used Tackle and dealt 1 damage!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball and dealt 13 damage!'}
Dumbird has fainted! Choose a new creature:
Default Player sent out Bubwool!
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
Default Player couldn't take any action this turn.
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Bubwool used Tackle and dealt 9 damage!
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Scizard!'}
Default Player couldn't take any action this turn.
Default Player has no creatures available to swap!
Default Player couldn't take any action this turn.
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball and dealt 2 damage!'}
Bubwool used Lick and dealt 6 damage!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 8 damage!'}
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
Default Player couldn't take any action this turn.
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Default Player couldn't take any action this turn.
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Default Player couldn't take any action this turn.
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Bubwool used Lick and dealt 7 damage!
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Default Player couldn't take any action this turn.
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Bubwool used Tackle and dealt 9 damage!
Default Player has no more creatures able to battle!
BotListener:on_show_event:show_text: {'text': 'Dumbird has fainted! Choose a new creature:'}
BotListener:on_show_event:show_text: {'text': 'Basic Opponent sent out Scizard!'}
You lost the battle. Better luck next time!
All creatures have been restored to full health.
=========================== short test summary info ============================
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 1 failed, 2 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 92, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.3.1, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, Faker-30.1.0, env-1.1.3, metadata-3.1.1, cov-4.1.0, anyio-4.4.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py .                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...cret='qVGt7qag4PU+ZIKRZNUsImurt0dmqQGh56w9k1CoGCE9VoaNUpjxC6mIpHpw5oEApvtDVQK7pMYjCFupQ6FSbQ==', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
starting random run iteration 1
Default Player swapped to Dumbird!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball and dealt 13 damage!'}
Dumbird used Tackle and dealt 1 damage!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball and dealt 13 damage!'}
Dumbird has fainted! Choose a new creature:
Default Player sent out Bubwool!
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
Default Player couldn't take any action this turn.
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Bubwool used Tackle and dealt 9 damage!
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Scizard!'}
Default Player couldn't take any action this turn.
Default Player has no creatures available to swap!
Default Player couldn't take any action this turn.
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball and dealt 2 damage!'}
Bubwool used Lick and dealt 6 damage!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 8 damage!'}
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
Default Player couldn't take any action this turn.
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Default Player couldn't take any action this turn.
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Default Player couldn't take any action this turn.
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Bubwool used Lick and dealt 7 damage!
Default Player has no creatures available to swap!
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Default Player couldn't take any action this turn.
BotListener:on_show_event:show_text: {'text': 'Dumbird used Tackle and dealt 4 damage!'}
Bubwool used Tackle and dealt 9 damage!
Default Player has no more creatures able to battle!
BotListener:on_show_event:show_text: {'text': 'Dumbird has fainted! Choose a new creature:'}
BotListener:on_show_event:show_text: {'text': 'Basic Opponent sent out Scizard!'}
You lost the battle. Better luck next time!
All creatures have been restored to full health.
=========================== short test summary info ============================
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 1 failed, 2 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/999816_107333_OneShotCoreAgent'],ladder/creature_battler_05_4/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:21:36,ca124373-95bb-4c0d-a4c0-29871123da70,OneShotCoreAgent,creature_battler_05,7,success,,,['new_prompt_logs/999822_427109_OneShotCoreAgent'],ladder/creature_battler_05_7/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:21:56,b7f5dc22-1e20-4479-8f33-780a547bb800,OneShotCoreAgent,creature_battler_04,6,failure,"After 5 attempts to debug, could not create an accurate game. Got issue {
  ""issue"": ""A QA pass has detected a problem with the current implementation."",
  ""explanation"": ""The implementation has minor discrepancies in the damage calculation formula and the handling of type effectiveness, which do not fully align with the architecture description."",
  ""qa_result"": ""failed""
}","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 92, in execute
    result = await self.sdk.execute_as_task(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 274, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/qa/all_qa_code_reader/logic.py"", line 60, in execute
    raise QAException(json.dumps({
mge_agents.qa.all_qa_code_reader.logic.QAException: {
  ""issue"": ""A QA pass has detected a problem with the current implementation."",
  ""explanation"": ""The implementation has minor discrepancies in the damage calculation formula and the handling of type effectiveness, which do not fully align with the architecture description."",
  ""qa_result"": ""failed""
}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 92, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 98, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create an accurate game. Got issue {
  ""issue"": ""A QA pass has detected a problem with the current implementation."",
  ""explanation"": ""The implementation has minor discrepancies in the damage calculation formula and the handling of type effectiveness, which do not fully align with the architecture description."",
  ""qa_result"": ""failed""
}
",['new_prompt_logs/999815_420442_OneShotCoreAgent'],ladder/creature_battler_04_6/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-09 14:23:25,1152cebb-c4a2-4690-b804-6899338776d8,OneShotCoreAgent,creature_battler_05,6,success,,,['new_prompt_logs/999812_102201_OneShotCoreAgent'],ladder/creature_battler_05_6/main_game,https://github.com/volter-ai/volter-monorepo/blob/7679aec79575ef1d484b71a038d7f6f1b134cfd6/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
