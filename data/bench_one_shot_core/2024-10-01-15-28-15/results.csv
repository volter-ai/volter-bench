timestamp,run_id,agent_id,ladder,run,status,error,traceback,logs,project_directory,commit_url
2024-10-01 15:30:01,914bd038-1053-4393-be75-1235a7e9cc73,OneShotCoreAgent,creature_battler_01,6,success,,,['new_prompt_logs/1727810901_281305_OneShotCoreAgent'],ladder/creature_battler_01_6/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:30:08,b2671bf6-c629-42b8-97e3-8a3d51815308,OneShotCoreAgent,creature_battler_01,4,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        scene_ran = False
        try:
            for _ in range(10):
                try:
                    app.transition_to_scene(""MainGameScene"", player=player)
                    scene_ran = True
                except RandomModeGracefulExit:
                    pass
        except AbstractApp._QuitWholeGame:
            pass  # Game quit is expected behavior
    
>       assert scene_ran, ""The MainGameScene should run at least once""
E       AssertionError: The MainGameScene should run at least once
E       assert False

main_game/tests/test_main_game_scene.py:25: AssertionError
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Player: Default Player - Bubwool (HP: 10/10)
Opponent: Default Player - Bubwool (HP: 10/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 10/10)\nOpponent: Default Player - Bubwool (HP: 10/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 7/10)
Opponent: Default Player - Bubwool (HP: 7/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 7/10)\nOpponent: Default Player - Bubwool (HP: 7/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 4/10)
Opponent: Default Player - Bubwool (HP: 4/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 4/10)\nOpponent: Default Player - Bubwool (HP: 4/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 1/10)
Opponent: Default Player - Bubwool (HP: 1/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 1/10)\nOpponent: Default Player - Bubwool (HP: 1/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
You won the battle!
BotListener:on_show_event:show_text: {'text': 'You lost the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        scene_ran = False
        try:
            for _ in range(10):
                try:
                    app.transition_to_scene(""MainMenuScene"", player=player)
                    scene_ran = True
                except RandomModeGracefulExit:
                    pass
        except AbstractApp._QuitWholeGame:
            pass  # Game quit is expected behavior
    
>       assert scene_ran, ""The MainMenuScene should run at least once""
E       AssertionError: The MainMenuScene should run at least once
E       assert False

main_game/tests/test_main_menu_scene.py:25: AssertionError
----------------------------- Captured stdout call -----------------------------
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player - Bubwool (HP: 10/10)
Opponent: Default Player - Bubwool (HP: 10/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 10/10)\nOpponent: Default Player - Bubwool (HP: 10/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 7/10)
Opponent: Default Player - Bubwool (HP: 7/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 7/10)\nOpponent: Default Player - Bubwool (HP: 7/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 4/10)
Opponent: Default Player - Bubwool (HP: 4/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 4/10)\nOpponent: Default Player - Bubwool (HP: 4/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 1/10)
Opponent: Default Player - Bubwool (HP: 1/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 1/10)\nOpponent: Default Player - Bubwool (HP: 1/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
You won the battle!
BotListener:on_show_event:show_text: {'text': 'You lost the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Assert...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - Assert...
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        scene_ran = False
        try:
            for _ in range(10):
                try:
                    app.transition_to_scene(""MainGameScene"", player=player)
                    scene_ran = True
                except RandomModeGracefulExit:
                    pass
        except AbstractApp._QuitWholeGame:
            pass  # Game quit is expected behavior
    
>       assert scene_ran, ""The MainGameScene should run at least once""
E       AssertionError: The MainGameScene should run at least once
E       assert False

main_game/tests/test_main_game_scene.py:25: AssertionError
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Player: Default Player - Bubwool (HP: 10/10)
Opponent: Default Player - Bubwool (HP: 10/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 10/10)\nOpponent: Default Player - Bubwool (HP: 10/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 7/10)
Opponent: Default Player - Bubwool (HP: 7/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 7/10)\nOpponent: Default Player - Bubwool (HP: 7/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 4/10)
Opponent: Default Player - Bubwool (HP: 4/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 4/10)\nOpponent: Default Player - Bubwool (HP: 4/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 1/10)
Opponent: Default Player - Bubwool (HP: 1/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 1/10)\nOpponent: Default Player - Bubwool (HP: 1/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
You won the battle!
BotListener:on_show_event:show_text: {'text': 'You lost the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        scene_ran = False
        try:
            for _ in range(10):
                try:
                    app.transition_to_scene(""MainMenuScene"", player=player)
                    scene_ran = True
                except RandomModeGracefulExit:
                    pass
        except AbstractApp._QuitWholeGame:
            pass  # Game quit is expected behavior
    
>       assert scene_ran, ""The MainMenuScene should run at least once""
E       AssertionError: The MainMenuScene should run at least once
E       assert False

main_game/tests/test_main_menu_scene.py:25: AssertionError
----------------------------- Captured stdout call -----------------------------
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player - Bubwool (HP: 10/10)
Opponent: Default Player - Bubwool (HP: 10/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 10/10)\nOpponent: Default Player - Bubwool (HP: 10/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 7/10)
Opponent: Default Player - Bubwool (HP: 7/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 7/10)\nOpponent: Default Player - Bubwool (HP: 7/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 4/10)
Opponent: Default Player - Bubwool (HP: 4/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 4/10)\nOpponent: Default Player - Bubwool (HP: 4/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 1/10)
Opponent: Default Player - Bubwool (HP: 1/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 1/10)\nOpponent: Default Player - Bubwool (HP: 1/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
You won the battle!
BotListener:on_show_event:show_text: {'text': 'You lost the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Assert...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - Assert...
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        scene_ran = False
        try:
            for _ in range(10):
                try:
                    app.transition_to_scene(""MainGameScene"", player=player)
                    scene_ran = True
                except RandomModeGracefulExit:
                    pass
        except AbstractApp._QuitWholeGame:
            pass  # Game quit is expected behavior
    
>       assert scene_ran, ""The MainGameScene should run at least once""
E       AssertionError: The MainGameScene should run at least once
E       assert False

main_game/tests/test_main_game_scene.py:25: AssertionError
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Player: Default Player - Bubwool (HP: 10/10)
Opponent: Default Player - Bubwool (HP: 10/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 10/10)\nOpponent: Default Player - Bubwool (HP: 10/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 7/10)
Opponent: Default Player - Bubwool (HP: 7/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 7/10)\nOpponent: Default Player - Bubwool (HP: 7/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 4/10)
Opponent: Default Player - Bubwool (HP: 4/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 4/10)\nOpponent: Default Player - Bubwool (HP: 4/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 1/10)
Opponent: Default Player - Bubwool (HP: 1/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 1/10)\nOpponent: Default Player - Bubwool (HP: 1/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
You won the battle!
BotListener:on_show_event:show_text: {'text': 'You lost the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        scene_ran = False
        try:
            for _ in range(10):
                try:
                    app.transition_to_scene(""MainMenuScene"", player=player)
                    scene_ran = True
                except RandomModeGracefulExit:
                    pass
        except AbstractApp._QuitWholeGame:
            pass  # Game quit is expected behavior
    
>       assert scene_ran, ""The MainMenuScene should run at least once""
E       AssertionError: The MainMenuScene should run at least once
E       assert False

main_game/tests/test_main_menu_scene.py:25: AssertionError
----------------------------- Captured stdout call -----------------------------
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player - Bubwool (HP: 10/10)
Opponent: Default Player - Bubwool (HP: 10/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 10/10)\nOpponent: Default Player - Bubwool (HP: 10/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 7/10)
Opponent: Default Player - Bubwool (HP: 7/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 7/10)\nOpponent: Default Player - Bubwool (HP: 7/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 4/10)
Opponent: Default Player - Bubwool (HP: 4/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 4/10)\nOpponent: Default Player - Bubwool (HP: 4/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
Opponent's Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': 'Your Bubwool used Tackle and dealt 3 damage!'}
Player: Default Player - Bubwool (HP: 1/10)
Opponent: Default Player - Bubwool (HP: 1/10)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player - Bubwool (HP: 1/10)\nOpponent: Default Player - Bubwool (HP: 1/10)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Your Bubwool used Tackle and dealt 3 damage!
BotListener:on_show_event:show_text: {'text': ""Opponent's Bubwool used Tackle and dealt 3 damage!""}
You won the battle!
BotListener:on_show_event:show_text: {'text': 'You lost the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Assert...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - Assert...
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_618763_OneShotCoreAgent'],ladder/creature_battler_01_4/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:30:52,ee427a08-3653-4e2b-afbb-d0155b5b53c5,OneShotCoreAgent,creature_battler_02,1,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        scene = MainGameScene(app, player)
        try:
            scene.run()
        except AbstractApp._QuitWholeGame:
            pass  # This is the expected behavior when quitting the game
        assert app.transition_count > 0, ""The game should have transitioned at least once""
>       assert app.transition_count <= app.max_transitions, f""The game should not have transitioned more than {app.max_transitions} times""
E       AssertionError: The game should not have transitioned more than 10 times
E       assert 11 <= 10
E        +  where 11 = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>.transition_count
E        +  and   10 = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>.max_transitions

main_game/tests/test_main_game_scene.py:49: AssertionError
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
_____________________________ test_main_menu_scene _____________________________

app = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_menu_scene(app, player):
        HumanListener.random_mode = True
        scene = MainMenuScene(app, player)
        try:
            scene.run()
        except AbstractApp._QuitWholeGame:
            pass  # This is the expected behavior when quitting the game
        assert app.transition_count > 0, ""The game should have transitioned at least once""
>       assert app.transition_count <= app.max_transitions, f""The game should not have transitioned more than {app.max_transitions} times""
E       AssertionError: The game should not have transitioned more than 10 times
E       assert 11 <= 10
E        +  where 11 = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>.transition_count
E        +  and   10 = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>.max_transitions

main_game/tests/test_main_menu_scene.py:49: AssertionError
----------------------------- Captured stdout call -----------------------------
Welcome to Creature Battle!
SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_1/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_1/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_1/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_1/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Assert...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - Assert...
=================== 2 failed, 1 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        scene = MainGameScene(app, player)
        try:
            scene.run()
        except AbstractApp._QuitWholeGame:
            pass  # This is the expected behavior when quitting the game
        assert app.transition_count > 0, ""The game should have transitioned at least once""
>       assert app.transition_count <= app.max_transitions, f""The game should not have transitioned more than {app.max_transitions} times""
E       AssertionError: The game should not have transitioned more than 10 times
E       assert 11 <= 10
E        +  where 11 = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>.transition_count
E        +  and   10 = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>.max_transitions

main_game/tests/test_main_game_scene.py:49: AssertionError
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
_____________________________ test_main_menu_scene _____________________________

app = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_menu_scene(app, player):
        HumanListener.random_mode = True
        scene = MainMenuScene(app, player)
        try:
            scene.run()
        except AbstractApp._QuitWholeGame:
            pass  # This is the expected behavior when quitting the game
        assert app.transition_count > 0, ""The game should have transitioned at least once""
>       assert app.transition_count <= app.max_transitions, f""The game should not have transitioned more than {app.max_transitions} times""
E       AssertionError: The game should not have transitioned more than 10 times
E       assert 11 <= 10
E        +  where 11 = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>.transition_count
E        +  and   10 = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>.max_transitions

main_game/tests/test_main_menu_scene.py:49: AssertionError
----------------------------- Captured stdout call -----------------------------
Welcome to Creature Battle!
SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_1/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_1/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_1/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_1/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Assert...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - Assert...
=================== 2 failed, 1 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        scene = MainGameScene(app, player)
        try:
            scene.run()
        except AbstractApp._QuitWholeGame:
            pass  # This is the expected behavior when quitting the game
        assert app.transition_count > 0, ""The game should have transitioned at least once""
>       assert app.transition_count <= app.max_transitions, f""The game should not have transitioned more than {app.max_transitions} times""
E       AssertionError: The game should not have transitioned more than 10 times
E       assert 11 <= 10
E        +  where 11 = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>.transition_count
E        +  and   10 = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>.max_transitions

main_game/tests/test_main_game_scene.py:49: AssertionError
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
_____________________________ test_main_menu_scene _____________________________

app = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_menu_scene(app, player):
        HumanListener.random_mode = True
        scene = MainMenuScene(app, player)
        try:
            scene.run()
        except AbstractApp._QuitWholeGame:
            pass  # This is the expected behavior when quitting the game
        assert app.transition_count > 0, ""The game should have transitioned at least once""
>       assert app.transition_count <= app.max_transitions, f""The game should not have transitioned more than {app.max_transitions} times""
E       AssertionError: The game should not have transitioned more than 10 times
E       assert 11 <= 10
E        +  where 11 = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>.transition_count
E        +  and   10 = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>.max_transitions

main_game/tests/test_main_menu_scene.py:49: AssertionError
----------------------------- Captured stdout call -----------------------------
Welcome to Creature Battle!
SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 0/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 0/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_1/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_1/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_1/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_1/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Assert...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - Assert...
=================== 2 failed, 1 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_891303_OneShotCoreAgent'],ladder/creature_battler_02_1/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:30:57,4a8742f9-eaf0-47ca-a2bf-88ce523e9289,OneShotCoreAgent,creature_battler_02,5,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
>           scene.run()

main_game/tests/test_main_game_scene.py:38: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:29: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_menu_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainMenuScene(app, player)
>           scene.run()

main_game/tests/test_main_menu_scene.py:38: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:29: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_5/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_5/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_5/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_5/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - mini_g...
=================== 2 failed, 1 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
>           scene.run()

main_game/tests/test_main_game_scene.py:38: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:29: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_menu_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainMenuScene(app, player)
>           scene.run()

main_game/tests/test_main_menu_scene.py:38: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:29: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_5/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_5/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_5/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_5/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - mini_g...
=================== 2 failed, 1 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
>           scene.run()

main_game/tests/test_main_game_scene.py:38: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:29: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_menu_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainMenuScene(app, player)
>           scene.run()

main_game/tests/test_main_menu_scene.py:38: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:27: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    if self._check_battle_end():
main_game/scenes/main_game_scene.py:79: in _check_battle_end
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:29: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Player: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_5/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_5/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_5/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_5/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - mini_g...
=================== 2 failed, 1 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_358640_OneShotCoreAgent'],ladder/creature_battler_02_5/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:31:07,796256c9-e260-43ff-a79d-5c8490f707af,OneShotCoreAgent,creature_battler_01,3,success,,,['new_prompt_logs/1727810901_412873_OneShotCoreAgent'],ladder/creature_battler_01_3/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:31:15,94e0fdc6-62ea-448e-8598-1bac3efbc9ee,OneShotCoreAgent,creature_battler_01,1,success,,,['new_prompt_logs/1727810901_282562_OneShotCoreAgent'],ladder/creature_battler_01_1/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:31:20,91b7e7c0-909e-440a-ab16-a300435ad0f4,OneShotCoreAgent,creature_battler_02,2,success,,,['new_prompt_logs/1727810901_711871_OneShotCoreAgent'],ladder/creature_battler_02_2/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:31:29,857316b0-61fb-4b58-8ea2-27680bae447b,OneShotCoreAgent,creature_battler_02,3,success,,,['new_prompt_logs/1727810901_687425_OneShotCoreAgent'],ladder/creature_battler_02_3/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:31:34,fbe902a7-bbcd-40b9-967f-90824613c3cc,OneShotCoreAgent,creature_battler_02,4,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        scene = MainGameScene(app, player)
>       scene.run()

main_game/tests/test_main_game_scene.py:37: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:50: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:50: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:50: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:50: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:29: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
Turn: 1/10
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 1/10\nPlayer: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 2/10
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 2/10\nPlayer: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 3/10
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 3/10\nPlayer: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
Games played: 0/3
1. Play
2. Quit
SKIPPING PERSISTIES
Turn: 1/10
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 1/10\nPlayer: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 2/10
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 2/10\nPlayer: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 3/10
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 3/10\nPlayer: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
Games played: 0/3
1. Play
2. Quit
SKIPPING PERSISTIES
Turn: 1/10
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 1/10\nPlayer: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 2/10
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 2/10\nPlayer: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 3/10
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 3/10\nPlayer: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
Games played: 0/3
1. Play
2. Quit
SKIPPING PERSISTIES
Turn: 1/10
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 1/10\nPlayer: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 2/10
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 2/10\nPlayer: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 3/10
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 3/10\nPlayer: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
Games played: 0/3
1. Play
2. Quit
SKIPPING PERSISTIES
You've played 0 games. Thanks for playing!
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_4/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_4/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_4/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_4/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        scene = MainGameScene(app, player)
>       scene.run()

main_game/tests/test_main_game_scene.py:37: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:50: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:50: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:50: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:50: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:29: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
Turn: 1/10
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 1/10\nPlayer: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 2/10
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 2/10\nPlayer: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 3/10
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 3/10\nPlayer: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
Games played: 0/3
1. Play
2. Quit
SKIPPING PERSISTIES
Turn: 1/10
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 1/10\nPlayer: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 2/10
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 2/10\nPlayer: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 3/10
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 3/10\nPlayer: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
Games played: 0/3
1. Play
2. Quit
SKIPPING PERSISTIES
Turn: 1/10
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 1/10\nPlayer: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 2/10
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 2/10\nPlayer: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 3/10
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 3/10\nPlayer: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
Games played: 0/3
1. Play
2. Quit
SKIPPING PERSISTIES
Turn: 1/10
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 1/10\nPlayer: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 2/10
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 2/10\nPlayer: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 3/10
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 3/10\nPlayer: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
Games played: 0/3
1. Play
2. Quit
SKIPPING PERSISTIES
You've played 0 games. Thanks for playing!
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_4/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_4/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_4/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_4/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        scene = MainGameScene(app, player)
>       scene.run()

main_game/tests/test_main_game_scene.py:37: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:50: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:50: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:50: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:24: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:50: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:29: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
Turn: 1/10
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 1/10\nPlayer: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 2/10
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 2/10\nPlayer: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 3/10
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 3/10\nPlayer: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
Games played: 0/3
1. Play
2. Quit
SKIPPING PERSISTIES
Turn: 1/10
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 1/10\nPlayer: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 2/10
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 2/10\nPlayer: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 3/10
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 3/10\nPlayer: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
Games played: 0/3
1. Play
2. Quit
SKIPPING PERSISTIES
Turn: 1/10
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 1/10\nPlayer: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 2/10
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 2/10\nPlayer: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 3/10
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 3/10\nPlayer: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
Games played: 0/3
1. Play
2. Quit
SKIPPING PERSISTIES
Turn: 1/10
Player: Default Player
Creature: Bubwool (HP: 10/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 1/10\nPlayer: Default Player\nCreature: Bubwool (HP: 10/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 11/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 2/10
Player: Default Player
Creature: Bubwool (HP: 6/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 2/10\nPlayer: Default Player\nCreature: Bubwool (HP: 6/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 8/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
Turn: 3/10
Player: Default Player
Creature: Bubwool (HP: 2/10)
Opponent: Basic Opponent
Creature: Scizard (HP: 5/11)
Available skills:
- Tackle
BotListener:on_show_event:show_text: {'text': 'Turn: 3/10\nPlayer: Default Player\nCreature: Bubwool (HP: 2/10)\nOpponent: Basic Opponent\nCreature: Scizard (HP: 5/11)\nAvailable skills:\n- Tackle'}
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle and dealt 3 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Bubwool used Tackle and dealt 3 damage to Scizard!'}
Scizard used Tackle and dealt 4 damage to Bubwool!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle and dealt 4 damage to Bubwool!'}
You lost the battle!
BotListener:on_show_event:show_text: {'text': 'You won the battle!'}
Welcome to Creature Battle!
Games played: 0/3
1. Play
2. Quit
SKIPPING PERSISTIES
You've played 0 games. Thanks for playing!
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_4/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_4/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_02_4/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_02_4/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_918044_OneShotCoreAgent'],ladder/creature_battler_02_4/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:31:50,37bc1f59-0dce-4711-9a6d-809998272a65,OneShotCoreAgent,creature_battler_01,2,success,,,['new_prompt_logs/1727810901_150927_OneShotCoreAgent'],ladder/creature_battler_01_2/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:33:10,72079589-fe0f-44de-80e3-2d8c152397f0,OneShotCoreAgent,creature_battler_01,5,success,,,['new_prompt_logs/1727810901_338529_OneShotCoreAgent'],ladder/creature_battler_01_5/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:33:16,b9fe2438-7989-4c3e-be8a-ce8d25a23593,OneShotCoreAgent,creature_battler_02,7,success,,,['new_prompt_logs/1727810901_618763_OneShotCoreAgent'],ladder/creature_battler_02_7/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:33:22,5ef541a2-d56b-41f3-af6f-5876dd967786,OneShotCoreAgent,creature_battler_02,6,success,,,['new_prompt_logs/1727810901_281305_OneShotCoreAgent'],ladder/creature_battler_02_6/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:33:40,8a58bd7c-8157-4429-8562-d6f579c0db72,OneShotCoreAgent,creature_battler_03,1,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 1/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - common...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 1/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - common...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 1/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - common...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_891303_OneShotCoreAgent'],ladder/creature_battler_03_1/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:33:41,0a33fef1-26ab-4387-99f5-902241222be6,OneShotCoreAgent,creature_battler_03,2,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 1/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - common...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 1/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - common...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 1/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - common...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_358640_OneShotCoreAgent'],ladder/creature_battler_03_2/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:34:04,7a1a82bc-b2a8-4b99-841d-5678b7dc9bcd,OneShotCoreAgent,creature_battler_03,3,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:31: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:18: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
Welcome to Creature Battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
========================= 1 failed, 2 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:31: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:18: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
Welcome to Creature Battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
========================= 1 failed, 2 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:31: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:18: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
Welcome to Creature Battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
========================= 1 failed, 2 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_412873_OneShotCoreAgent'],ladder/creature_battler_03_3/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:34:04,b7035d5f-f2ab-418e-b32d-e15aeaf45bd1,OneShotCoreAgent,creature_battler_03,4,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 1/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - common...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 1/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - common...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 1/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - common...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_282562_OneShotCoreAgent'],ladder/creature_battler_03_4/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:34:07,8a3a657c-e72d-436e-aa3e-9a42259f89d0,OneShotCoreAgent,creature_battler_03,5,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:31: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:18: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
Welcome to Creature Battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
========================= 1 failed, 2 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:31: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:18: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
Welcome to Creature Battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
========================= 1 failed, 2 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:31: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:18: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
Welcome to Creature Battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
========================= 1 failed, 2 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_711871_OneShotCoreAgent'],ladder/creature_battler_03_5/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:34:13,39ea5da5-0dda-4cdf-8159-94c85340a969,OneShotCoreAgent,creature_battler_04,1,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
>           scene.run()

main_game/tests/test_main_game_scene.py:38: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:34: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:18: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_1/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_1/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_1/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_1/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
>           scene.run()

main_game/tests/test_main_game_scene.py:38: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:34: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:18: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_1/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_1/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_1/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_1/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
>           scene.run()

main_game/tests/test_main_game_scene.py:38: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:34: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:18: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_1/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_1/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_1/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_1/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_150927_OneShotCoreAgent'],ladder/creature_battler_04_1/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:34:20,6bd6dda4-d461-498e-ba5a-36652d21b55c,OneShotCoreAgent,creature_battler_03,6,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 1/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - common...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 1/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - common...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 1/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - common...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_687425_OneShotCoreAgent'],ladder/creature_battler_03_6/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:34:29,dfbfca4a-5a8d-42ca-834d-09ee288a140f,OneShotCoreAgent,creature_battler_03,7,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 1/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - common...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 1/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - common...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.transition_to_scene(""MainGameScene"", player=player)

main_game/tests/test_main_game_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 4/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!
Default Player, you have lost the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameEnd'}
game exited gracefully
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 9/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 1/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 7/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 2/10

Basic Opponent's Scizard:
HP: 3/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick!
It dealt 4 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 10/10

Basic Opponent's Scizard:
HP: 11/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 6/10

Basic Opponent's Scizard:
HP: 8/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Fireball!
It dealt 1 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 5/10

Basic Opponent's Scizard:
HP: 5/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Basic Opponent's Scizard used Tackle!
It dealt 4 damage to Bubwool!

Creature Battle!

Default Player's Bubwool:
HP: 1/10

Basic Opponent's Scizard:
HP: 2/11

Available skills:
Tackle, Lick

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle!
It dealt 3 damage to Scizard!
Congratulations Default Player, you have won the battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - common...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_918044_OneShotCoreAgent'],ladder/creature_battler_03_7/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:34:50,65f502c7-2f76-478e-b1af-4edd5f33d92d,OneShotCoreAgent,creature_battler_01,7,success,,,['new_prompt_logs/1727810901_944702_OneShotCoreAgent'],ladder/creature_battler_01_7/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:36:21,d84d5c0a-297a-47a4-b6d5-3034138a2c3a,OneShotCoreAgent,creature_battler_04,6,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
>               scene.run()

main_game/tests/test_main_game_scene.py:39: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:34: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:18: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame

During handling of the above exception, another exception occurred:

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
                scene.run()
                # If we reach here, it means the MainGameScene completed successfully
                # Now we'll catch the _QuitWholeGame exception from the MainMenuScene
                try:
                    app.transition_to_scene(""MainMenuScene"", player=player)
                except AbstractApp._QuitWholeGame:
                    pass  # This exception is expected when quitting the game
                break  # Exit the loop after one successful run
            except AbstractApp._QuitWholeGame:
>               pytest.fail(""Unexpected _QuitWholeGame exception in MainGameScene"")
E               Failed: Unexpected _QuitWholeGame exception in MainGameScene

main_game/tests/test_main_game_scene.py:48: Failed
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_6/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_6/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_6/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_6/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Failed...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
>               scene.run()

main_game/tests/test_main_game_scene.py:39: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:34: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:18: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame

During handling of the above exception, another exception occurred:

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
                scene.run()
                # If we reach here, it means the MainGameScene completed successfully
                # Now we'll catch the _QuitWholeGame exception from the MainMenuScene
                try:
                    app.transition_to_scene(""MainMenuScene"", player=player)
                except AbstractApp._QuitWholeGame:
                    pass  # This exception is expected when quitting the game
                break  # Exit the loop after one successful run
            except AbstractApp._QuitWholeGame:
>               pytest.fail(""Unexpected _QuitWholeGame exception in MainGameScene"")
E               Failed: Unexpected _QuitWholeGame exception in MainGameScene

main_game/tests/test_main_game_scene.py:48: Failed
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_6/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_6/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_6/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_6/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Failed...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
>               scene.run()

main_game/tests/test_main_game_scene.py:39: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:34: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:18: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame

During handling of the above exception, another exception occurred:

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
                scene.run()
                # If we reach here, it means the MainGameScene completed successfully
                # Now we'll catch the _QuitWholeGame exception from the MainMenuScene
                try:
                    app.transition_to_scene(""MainMenuScene"", player=player)
                except AbstractApp._QuitWholeGame:
                    pass  # This exception is expected when quitting the game
                break  # Exit the loop after one successful run
            except AbstractApp._QuitWholeGame:
>               pytest.fail(""Unexpected _QuitWholeGame exception in MainGameScene"")
E               Failed: Unexpected _QuitWholeGame exception in MainGameScene

main_game/tests/test_main_game_scene.py:48: Failed
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_6/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_6/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_6/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_6/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Failed...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_358640_OneShotCoreAgent'],ladder/creature_battler_04_6/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:36:21,d3767ae4-8da8-457e-870a-dbb8e9129153,OneShotCoreAgent,creature_battler_04,3,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
>               scene.run()

main_game/tests/test_main_game_scene.py:39: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:25: in run
    player_skill = self._player_choice_phase()
main_game/scenes/main_game_scene.py:38: in _player_choice_phase
    choice = self._wait_for_choice(self.player, choices)
../../../../mge2/mini_game_engine/engine/lib.py:397: in _wait_for_choice
    choice = player._listener.on_wait_for_choice(self, choices)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <mini_game_engine.engine.lib.HumanListener object at 0x[REDACTED]>
scene = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
choices = [Button(Tackle), Button(Lick)]

    def on_wait_for_choice(self, scene: ""AbstractGameScene"", choices: List[AbstractChoice]) -> AbstractChoice:
        if HumanListener.random_mode or self.random_mode:
            assert str(scene)
            self.random_mode_counter -= 1
            if self.random_mode_counter <= 0:
>               raise RandomModeGracefulExit()
E               mini_game_engine.engine.lib.RandomModeGracefulExit: HumanListener is in random mode and the current run is now over. This is exception is expected

../../../../mge2/mini_game_engine/engine/lib.py:304: RandomModeGracefulExit
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 25/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 20/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 15/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 6/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
You won the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 14/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 9/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 22/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 6/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
You won the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 14/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 18/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 13/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 2/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
You won the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 25/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 13/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 18/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_3/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_3/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_3/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_3/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
>               scene.run()

main_game/tests/test_main_game_scene.py:39: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:25: in run
    player_skill = self._player_choice_phase()
main_game/scenes/main_game_scene.py:38: in _player_choice_phase
    choice = self._wait_for_choice(self.player, choices)
../../../../mge2/mini_game_engine/engine/lib.py:397: in _wait_for_choice
    choice = player._listener.on_wait_for_choice(self, choices)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <mini_game_engine.engine.lib.HumanListener object at 0x[REDACTED]>
scene = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
choices = [Button(Tackle), Button(Lick)]

    def on_wait_for_choice(self, scene: ""AbstractGameScene"", choices: List[AbstractChoice]) -> AbstractChoice:
        if HumanListener.random_mode or self.random_mode:
            assert str(scene)
            self.random_mode_counter -= 1
            if self.random_mode_counter <= 0:
>               raise RandomModeGracefulExit()
E               mini_game_engine.engine.lib.RandomModeGracefulExit: HumanListener is in random mode and the current run is now over. This is exception is expected

../../../../mge2/mini_game_engine/engine/lib.py:304: RandomModeGracefulExit
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 25/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 20/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 15/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 6/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
You won the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 14/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 9/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 22/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 6/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
You won the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 14/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 18/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 13/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 2/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
You won the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 25/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 13/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 18/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_3/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_3/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_3/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_3/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
>               scene.run()

main_game/tests/test_main_game_scene.py:39: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:25: in run
    player_skill = self._player_choice_phase()
main_game/scenes/main_game_scene.py:38: in _player_choice_phase
    choice = self._wait_for_choice(self.player, choices)
../../../../mge2/mini_game_engine/engine/lib.py:397: in _wait_for_choice
    choice = player._listener.on_wait_for_choice(self, choices)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <mini_game_engine.engine.lib.HumanListener object at 0x[REDACTED]>
scene = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>
choices = [Button(Tackle), Button(Lick)]

    def on_wait_for_choice(self, scene: ""AbstractGameScene"", choices: List[AbstractChoice]) -> AbstractChoice:
        if HumanListener.random_mode or self.random_mode:
            assert str(scene)
            self.random_mode_counter -= 1
            if self.random_mode_counter <= 0:
>               raise RandomModeGracefulExit()
E               mini_game_engine.engine.lib.RandomModeGracefulExit: HumanListener is in random mode and the current run is now over. This is exception is expected

../../../../mge2/mini_game_engine/engine/lib.py:304: RandomModeGracefulExit
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 25/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 20/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 15/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 6/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
You won the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 14/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 9/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 22/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 6/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
You won the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 14/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 18/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 13/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 2/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
You won the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 25/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 13/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Fireball!
Bubwool took 2 damage!
Player: Default Player
Creature: Bubwool (HP: 18/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_3/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_3/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_3/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_3/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_618763_OneShotCoreAgent'],ladder/creature_battler_04_3/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:36:28,441d4405-f084-4d75-8534-9f9362788bd8,OneShotCoreAgent,creature_battler_04,7,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
>               scene.run()

main_game/tests/test_main_game_scene.py:39: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:34: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:18: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame

During handling of the above exception, another exception occurred:

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
                scene.run()
                # If we reach here, it means the MainGameScene completed successfully
                # Now we'll catch the _QuitWholeGame exception from the MainMenuScene
                try:
                    app.transition_to_scene(""MainMenuScene"", player=player)
                except AbstractApp._QuitWholeGame:
                    pass  # This exception is expected when quitting the game
                break  # Exit the loop after one successful run
            except AbstractApp._QuitWholeGame:
>               pytest.fail(""Unexpected _QuitWholeGame exception in MainGameScene"")
E               Failed: Unexpected _QuitWholeGame exception in MainGameScene

main_game/tests/test_main_game_scene.py:48: Failed
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_7/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_7/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_7/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_7/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Failed...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
>               scene.run()

main_game/tests/test_main_game_scene.py:39: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:34: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:18: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame

During handling of the above exception, another exception occurred:

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
                scene.run()
                # If we reach here, it means the MainGameScene completed successfully
                # Now we'll catch the _QuitWholeGame exception from the MainMenuScene
                try:
                    app.transition_to_scene(""MainMenuScene"", player=player)
                except AbstractApp._QuitWholeGame:
                    pass  # This exception is expected when quitting the game
                break  # Exit the loop after one successful run
            except AbstractApp._QuitWholeGame:
>               pytest.fail(""Unexpected _QuitWholeGame exception in MainGameScene"")
E               Failed: Unexpected _QuitWholeGame exception in MainGameScene

main_game/tests/test_main_game_scene.py:48: Failed
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_7/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_7/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_7/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_7/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Failed...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
>               scene.run()

main_game/tests/test_main_game_scene.py:39: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:34: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:18: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame

During handling of the above exception, another exception occurred:

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
                scene.run()
                # If we reach here, it means the MainGameScene completed successfully
                # Now we'll catch the _QuitWholeGame exception from the MainMenuScene
                try:
                    app.transition_to_scene(""MainMenuScene"", player=player)
                except AbstractApp._QuitWholeGame:
                    pass  # This exception is expected when quitting the game
                break  # Exit the loop after one successful run
            except AbstractApp._QuitWholeGame:
>               pytest.fail(""Unexpected _QuitWholeGame exception in MainGameScene"")
E               Failed: Unexpected _QuitWholeGame exception in MainGameScene

main_game/tests/test_main_game_scene.py:48: Failed
----------------------------- Captured stdout call -----------------------------
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
Scizard took 6 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
Scizard took 5 damage!
Scizard used Tackle!
Bubwool took 8 damage!
You lost the battle!
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_7/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_7/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_04_7/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_04_7/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Failed...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_412873_OneShotCoreAgent'],ladder/creature_battler_04_7/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:36:38,6805e2ee-0c0c-4568-83c7-8c31be673531,OneShotCoreAgent,creature_battler_05,1,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py .                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>, player = Default Player

    def test_main_menu_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = app.scene_registry[""MainMenuScene""](app, player)
            try:
>               scene.run()

main_game/tests/test_main_menu_scene.py:19: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameStart'}

Player: Default Player
Active Creature: Bubwool (HP: 32/32)

Opponent: Basic Opponent
Active Creature: Scizard (HP: 40/40)

1. Attack
2. Swap

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
BotListener:on_show_event:show_text: {'text': 'Scizard took 5 damage!'}
SKIPPING PERSISTIES
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES

Player: Default Player
Active Creature: Bubwool (HP: 32/32)

Opponent: Basic Opponent
Active Creature: Scizard (HP: 40/40)

1. Attack
2. Swap

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player swapped to Dumbird!
SKIPPING PERSISTIES
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
Dumbird took 9 damage!
=========================== short test summary info ============================
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py .                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>, player = Default Player

    def test_main_menu_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = app.scene_registry[""MainMenuScene""](app, player)
            try:
>               scene.run()

main_game/tests/test_main_menu_scene.py:19: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameStart'}

Player: Default Player
Active Creature: Bubwool (HP: 32/32)

Opponent: Basic Opponent
Active Creature: Scizard (HP: 40/40)

1. Attack
2. Swap

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
BotListener:on_show_event:show_text: {'text': 'Scizard took 5 damage!'}
SKIPPING PERSISTIES
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES

Player: Default Player
Active Creature: Bubwool (HP: 32/32)

Opponent: Basic Opponent
Active Creature: Scizard (HP: 40/40)

1. Attack
2. Swap

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player swapped to Dumbird!
SKIPPING PERSISTIES
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
Dumbird took 9 damage!
=========================== short test summary info ============================
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py .                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>, player = Default Player

    def test_main_menu_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = app.scene_registry[""MainMenuScene""](app, player)
            try:
>               scene.run()

main_game/tests/test_main_menu_scene.py:19: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameStart'}

Player: Default Player
Active Creature: Bubwool (HP: 32/32)

Opponent: Basic Opponent
Active Creature: Scizard (HP: 40/40)

1. Attack
2. Swap

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
BotListener:on_show_event:show_text: {'text': 'Scizard took 5 damage!'}
SKIPPING PERSISTIES
BotListener:on_show_event:show_text: {'text': 'Basic Opponent swapped to Dumbird!'}
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.main.App object at 0x[REDACTED]>, scene_id = 'MainGameScene'
transition_to_scene = None, kwargs = {'player': Default Player}
settings = Settings(env='LOCAL', redis_host='localhost', redis_port=6379, redis_secure_auth='', enable_persistence=False, enable_...24iLCJpYXQiOjE3MjYyNTg1MDAsImV4cCI6MjA0MTgzNDUwMH0.TzEHyCSLF8NqV7ibeOqon5oukO8d31seq_-bJdTQgKs', game_id='volter-game')

        def transition_to_scene(self, scene_id: str, transition_to_scene: Optional[AbstractGameScene] = None, **kwargs):
            try:
                settings = get_settings()
                if settings.enable_persistence:
                    saved_data = self.persistence_client.retrieve(kwargs.get('player'))
                    if saved_data:
                        print(""---> Fetching data"", saved_data)
                        dehydrated_scene_stack, next_scene_name = saved_data
                        if next_scene_name:
                            new_scene_stack = []
                            for dehydrated_scene in dehydrated_scene_stack:
                                scene_kwargs = { **dehydrated_scene }
                                del scene_kwargs[""__type""]
                                new_scene = self.scene_registry.get(dehydrated_scene[""__type""]).model_validate({
                                    **scene_kwargs,
                                    **kwargs
                                })
                                new_scene_stack.append(new_scene)
                            self._scene_stack = new_scene_stack
                            for _scene in self._scene_stack:
                                _scene.player = kwargs.get('player')
                            scene_id = next_scene_name
    
                scene_factory = self.scene_registry[scene_id]
            except KeyError as e:
                raise Exception(""The scene {scene_id} is not registered, ""
                                f""all scenes should be registered using `register_scene` before `app.run()`"") from e
    
            if issubclass(scene_factory, AbstractMultiplayerScene):
                if kwargs.get(""player"") is not None:
                    raise Exception(""player argument cannot be used on a multiplayer scene, you must use 'players'"")
                if kwargs.get(""players"") is None:
                    raise Exception(""players argument must be set on a multiplayer scene"")
            scene = transition_to_scene
    
            if not scene:
                scene: AbstractGameScene = scene_factory(app=self, **kwargs)
    
            self.__run_scene(scene)
    
            # Technically the code can never reach this
>           raise FixableException(f""""""
    Scene ({scene.__class__.__name__}) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This
    probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.
    Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling
    `quit_whole_game` to signal that the game has ended.
    """""")
E   common.exceptions.FixableException: 
E   Scene (MainGameScene) terminated without calling `quit_whole_game` or `transition_to_scene` again.  This 
E   probably indicates that you have returned directly or broke from the scene's game loop, which is an antipattern.  
E   Consider transitioning to the appropriate scene, or alternatively if this is the end of the game, calling 
E   `quit_whole_game` to signal that the game has ended.

../../../../mge2/mini_game_engine/engine/lib.py:650: FixableException
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES

Player: Default Player
Active Creature: Bubwool (HP: 32/32)

Opponent: Basic Opponent
Active Creature: Scizard (HP: 40/40)

1. Attack
2. Swap

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player swapped to Dumbird!
SKIPPING PERSISTIES
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
Dumbird took 9 damage!
=========================== short test summary info ============================
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - common...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
========================= 2 failed, 1 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_282562_OneShotCoreAgent'],ladder/creature_battler_05_1/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:37:43,f9fe183d-0e86-418a-9fa4-1b1daab26190,OneShotCoreAgent,creature_battler_04,4,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        min_battles = 3
        max_attempts = 10
    
        for _ in range(max_attempts):
            try:
                scene = app.transition_to_scene(""MainGameScene"", player=player)
                battles_played = scene.get_battles_played()
                assert battles_played >= min_battles, f""Game ended too quickly. Only played {battles_played} battles, expected at least {min_battles}.""
                break
            except (RandomModeGracefulExit, AbstractApp._QuitWholeGame):
                continue
        else:
>           pytest.fail(f""Game did not complete {min_battles} battles in {max_attempts} attempts."")
E           Failed: Game did not complete 3 battles in 10 attempts.

main_game/tests/test_main_game_scene.py:30: Failed
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
Battle 1 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 25/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 20/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 15/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
Battle 2 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 6/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
You won the battle!
All 3 battles completed!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 14/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 9/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
You lost the battle!
Battle 1 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
You lost the battle!
Battle 2 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
You lost the battle!
All 3 battles completed!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
Battle 1 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 22/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 6/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
You won the battle!
Battle 2 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 14/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
All 3 battles completed!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
Battle 1 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 18/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 13/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 2/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
You won the battle!
Battle 2 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 25/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
All 3 battles completed!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 13/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
Battle 1 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 18/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Failed...
========================= 1 failed, 2 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        min_battles = 3
        max_attempts = 10
    
        for _ in range(max_attempts):
            try:
                scene = app.transition_to_scene(""MainGameScene"", player=player)
                battles_played = scene.get_battles_played()
                assert battles_played >= min_battles, f""Game ended too quickly. Only played {battles_played} battles, expected at least {min_battles}.""
                break
            except (RandomModeGracefulExit, AbstractApp._QuitWholeGame):
                continue
        else:
>           pytest.fail(f""Game did not complete {min_battles} battles in {max_attempts} attempts."")
E           Failed: Game did not complete 3 battles in 10 attempts.

main_game/tests/test_main_game_scene.py:30: Failed
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
Battle 1 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 25/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 20/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 15/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
Battle 2 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 6/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
You won the battle!
All 3 battles completed!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 14/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 9/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
You lost the battle!
Battle 1 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
You lost the battle!
Battle 2 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
You lost the battle!
All 3 battles completed!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
Battle 1 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 22/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 6/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
You won the battle!
Battle 2 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 14/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
All 3 battles completed!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
Battle 1 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 18/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 13/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 2/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
You won the battle!
Battle 2 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 25/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
All 3 battles completed!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 13/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
Battle 1 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 18/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Failed...
========================= 1 failed, 2 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        min_battles = 3
        max_attempts = 10
    
        for _ in range(max_attempts):
            try:
                scene = app.transition_to_scene(""MainGameScene"", player=player)
                battles_played = scene.get_battles_played()
                assert battles_played >= min_battles, f""Game ended too quickly. Only played {battles_played} battles, expected at least {min_battles}.""
                break
            except (RandomModeGracefulExit, AbstractApp._QuitWholeGame):
                continue
        else:
>           pytest.fail(f""Game did not complete {min_battles} battles in {max_attempts} attempts."")
E           Failed: Game did not complete 3 battles in 10 attempts.

main_game/tests/test_main_game_scene.py:30: Failed
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
Battle 1 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 25/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 20/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 15/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
Battle 2 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 6/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
You won the battle!
All 3 battles completed!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 14/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 9/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
You lost the battle!
Battle 1 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
You lost the battle!
Battle 2 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
You lost the battle!
All 3 battles completed!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 12/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
Battle 1 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 22/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 17/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 11/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 6/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
You won the battle!
Battle 2 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 4/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 14/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 8/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
All 3 battles completed!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
Battle 1 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 24/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 18/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 19/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 13/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 6/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 2/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
You won the battle!
Battle 2 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 35/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 16/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 30/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 8/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 25/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
All 3 battles completed!
Welcome to Creature Battle!
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 24/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 22/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 29/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 14/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 12/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 10/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 13/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 2/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 7/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
You lost the battle!
Battle 1 completed. Starting next battle...
SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 30/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 34/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Lick!
It dealt 6 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 28/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 28/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Tackle!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 8 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 20/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 23/40)

SKIPPING PERSISTIES
SKIPPING PERSISTIES
Bubwool used Tackle!
It dealt 5 damage to Scizard!
BotListener:on_show_event:show_text: {'text': 'Scizard used Fireball!'}
BotListener:on_show_event:show_text: {'text': 'It dealt 2 damage to Bubwool!'}
Player: Default Player
Creature: Bubwool (HP: 18/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 18/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
Player: Default Player
Creature: Bubwool (HP: 32/32)
Opponent: Basic Opponent
Creature: Scizard (HP: 40/40)

SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Failed...
========================= 1 failed, 2 passed in [REDACTED]s ==========================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_281305_OneShotCoreAgent'],ladder/creature_battler_04_4/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:37:56,dc6abb57-61e4-4a7f-ba74-c364adf498ec,OneShotCoreAgent,creature_battler_05,5,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
>               scene.run()

main_game/tests/test_main_game_scene.py:36: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>

    def run(self):
        try:
            while True:
                self._show_text(self.player, str(self))
                self._show_text(self.opponent, str(self))
    
>               player_action = self.player_choice_phase(self.player)
E               AttributeError: 'MainGameScene' object has no attribute 'player_choice_phase'

main_game/scenes/main_game_scene.py:31: AttributeError
----------------------------- Captured stdout call -----------------------------

Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap


Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap

_____________________________ test_main_menu_scene _____________________________

app = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_menu_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainMenuScene(app, player)
            try:
>               scene.run()

main_game/tests/test_main_menu_scene.py:36: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_menu_scene.py:21: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>

    def run(self):
        try:
            while True:
                self._show_text(self.player, str(self))
                self._show_text(self.opponent, str(self))
    
>               player_action = self.player_choice_phase(self.player)
E               AttributeError: 'MainGameScene' object has no attribute 'player_choice_phase'

main_game/scenes/main_game_scene.py:31: AttributeError
----------------------------- Captured stdout call -----------------------------
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap


Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap

_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:21: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>

    def run(self):
        try:
            while True:
                self._show_text(self.player, str(self))
                self._show_text(self.opponent, str(self))
    
>               player_action = self.player_choice_phase(self.player)
E               AttributeError: 'MainGameScene' object has no attribute 'player_choice_phase'

main_game/scenes/main_game_scene.py:31: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 32/32

Basic Opponent's Scizard:
HP: 40/40

1. Attack
2. Swap

BotListener:on_show_event:show_text: {'text': ""\nCreature Battle!\n\nDefault Player's Bubwool:\nHP: 32/32\n\nBasic Opponent's Scizard:\nHP: 40/40\n\n1. Attack\n2. Swap\n""}
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_5/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_5/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_5/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_5/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Attrib...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - Attrib...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
======================== 3 failed, 2 warnings in [REDACTED]s =========================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
>               scene.run()

main_game/tests/test_main_game_scene.py:36: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>

    def run(self):
        try:
            while True:
                self._show_text(self.player, str(self))
                self._show_text(self.opponent, str(self))
    
>               player_action = self.player_choice_phase(self.player)
E               AttributeError: 'MainGameScene' object has no attribute 'player_choice_phase'

main_game/scenes/main_game_scene.py:31: AttributeError
----------------------------- Captured stdout call -----------------------------

Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap


Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap

_____________________________ test_main_menu_scene _____________________________

app = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_menu_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainMenuScene(app, player)
            try:
>               scene.run()

main_game/tests/test_main_menu_scene.py:36: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_menu_scene.py:21: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>

    def run(self):
        try:
            while True:
                self._show_text(self.player, str(self))
                self._show_text(self.opponent, str(self))
    
>               player_action = self.player_choice_phase(self.player)
E               AttributeError: 'MainGameScene' object has no attribute 'player_choice_phase'

main_game/scenes/main_game_scene.py:31: AttributeError
----------------------------- Captured stdout call -----------------------------
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap


Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap

_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:21: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>

    def run(self):
        try:
            while True:
                self._show_text(self.player, str(self))
                self._show_text(self.opponent, str(self))
    
>               player_action = self.player_choice_phase(self.player)
E               AttributeError: 'MainGameScene' object has no attribute 'player_choice_phase'

main_game/scenes/main_game_scene.py:31: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 32/32

Basic Opponent's Scizard:
HP: 40/40

1. Attack
2. Swap

BotListener:on_show_event:show_text: {'text': ""\nCreature Battle!\n\nDefault Player's Bubwool:\nHP: 32/32\n\nBasic Opponent's Scizard:\nHP: 40/40\n\n1. Attack\n2. Swap\n""}
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_5/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_5/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_5/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_5/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Attrib...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - Attrib...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
======================== 3 failed, 2 warnings in [REDACTED]s =========================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
            try:
>               scene.run()

main_game/tests/test_main_game_scene.py:36: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>

    def run(self):
        try:
            while True:
                self._show_text(self.player, str(self))
                self._show_text(self.opponent, str(self))
    
>               player_action = self.player_choice_phase(self.player)
E               AttributeError: 'MainGameScene' object has no attribute 'player_choice_phase'

main_game/scenes/main_game_scene.py:31: AttributeError
----------------------------- Captured stdout call -----------------------------

Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap


Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap

_____________________________ test_main_menu_scene _____________________________

app = <tests.test_main_menu_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_menu_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainMenuScene(app, player)
            try:
>               scene.run()

main_game/tests/test_main_menu_scene.py:36: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_menu_scene.py:21: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>

    def run(self):
        try:
            while True:
                self._show_text(self.player, str(self))
                self._show_text(self.opponent, str(self))
    
>               player_action = self.player_choice_phase(self.player)
E               AttributeError: 'MainGameScene' object has no attribute 'player_choice_phase'

main_game/scenes/main_game_scene.py:31: AttributeError
----------------------------- Captured stdout call -----------------------------
Welcome to Creature Battle!
SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameStart'}

Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap


Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap

_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:21: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>

    def run(self):
        try:
            while True:
                self._show_text(self.player, str(self))
                self._show_text(self.opponent, str(self))
    
>               player_action = self.player_choice_phase(self.player)
E               AttributeError: 'MainGameScene' object has no attribute 'player_choice_phase'

main_game/scenes/main_game_scene.py:31: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 32/32

Basic Opponent's Scizard:
HP: 40/40

1. Attack
2. Swap

BotListener:on_show_event:show_text: {'text': ""\nCreature Battle!\n\nDefault Player's Bubwool:\nHP: 32/32\n\nBasic Opponent's Scizard:\nHP: 40/40\n\n1. Attack\n2. Swap\n""}
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_5/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_5/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_5/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_5/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Attrib...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - Attrib...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
======================== 3 failed, 2 warnings in [REDACTED]s =========================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_918044_OneShotCoreAgent'],ladder/creature_battler_05_5/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:38:02,3115051e-811f-498d-856f-22f2e87356e3,OneShotCoreAgent,creature_battler_05,4,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
>           scene.run()

main_game/tests/test_main_game_scene.py:35: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:33: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:20: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:20: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:23: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------

Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu


Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu

SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu


Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu

SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick and dealt 6 damage!
Default Player's Bubwool used Lick and dealt 6 damage!
Default Player's Bubwool used Tackle and dealt 8 damage!
Default Player's Bubwool used Tackle and dealt 8 damage!

Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 26/32

1. Attack
2. Swap
3. Return to Main Menu


Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 26/32

1. Attack
2. Swap
3. Return to Main Menu

SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle and dealt 8 damage!
Default Player's Bubwool used Tackle and dealt 8 damage!

Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 18/32

1. Attack
2. Swap
3. Return to Main Menu


Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 18/32

1. Attack
2. Swap
3. Return to Main Menu

SKIPPING PERSISTIES
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu


Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu

SKIPPING PERSISTIES
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_4/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_4/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_4/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_4/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
>           scene.run()

main_game/tests/test_main_game_scene.py:35: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:33: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:20: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:20: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:23: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------

Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu


Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu

SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu


Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu

SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick and dealt 6 damage!
Default Player's Bubwool used Lick and dealt 6 damage!
Default Player's Bubwool used Tackle and dealt 8 damage!
Default Player's Bubwool used Tackle and dealt 8 damage!

Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 26/32

1. Attack
2. Swap
3. Return to Main Menu


Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 26/32

1. Attack
2. Swap
3. Return to Main Menu

SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle and dealt 8 damage!
Default Player's Bubwool used Tackle and dealt 8 damage!

Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 18/32

1. Attack
2. Swap
3. Return to Main Menu


Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 18/32

1. Attack
2. Swap
3. Return to Main Menu

SKIPPING PERSISTIES
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu


Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu

SKIPPING PERSISTIES
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_4/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_4/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_4/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_4/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py .                                [ 66%]
main_game/tests/test_whole_game.py .                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>
player = Default Player

    def test_main_game_scene(app, player):
        HumanListener.random_mode = True
        for _ in range(10):
            scene = MainGameScene(app, player)
>           scene.run()

main_game/tests/test_main_game_scene.py:35: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
main_game/scenes/main_game_scene.py:33: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:20: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:20: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_game_scene.py:33: in run
    self._transition_to_scene(""MainMenuScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:23: in run
    self._quit_whole_game()
../../../../mge2/mini_game_engine/engine/lib.py:409: in _quit_whole_game
    self._app.quit_whole_game()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <tests.test_main_game_scene.TestApp object at 0x[REDACTED]>

    def quit_whole_game(self):
>       raise AbstractApp._QuitWholeGame()
E       mini_game_engine.engine.lib.AbstractApp._QuitWholeGame: Game terminated gracefully. If you intended to quit the game, this exception is expected and should be caught

../../../../mge2/mini_game_engine/engine/lib.py:527: _QuitWholeGame
----------------------------- Captured stdout call -----------------------------

Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu


Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu

SKIPPING PERSISTIES
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu


Creature Battle!

Default Player's Bubwool:
HP: 32/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu

SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Lick and dealt 6 damage!
Default Player's Bubwool used Lick and dealt 6 damage!
Default Player's Bubwool used Tackle and dealt 8 damage!
Default Player's Bubwool used Tackle and dealt 8 damage!

Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 26/32

1. Attack
2. Swap
3. Return to Main Menu


Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 26/32

1. Attack
2. Swap
3. Return to Main Menu

SKIPPING PERSISTIES
SKIPPING PERSISTIES
SKIPPING PERSISTIES
Default Player's Bubwool used Tackle and dealt 8 damage!
Default Player's Bubwool used Tackle and dealt 8 damage!

Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 18/32

1. Attack
2. Swap
3. Return to Main Menu


Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 18/32

1. Attack
2. Swap
3. Return to Main Menu

SKIPPING PERSISTIES
Welcome to Creature Battle!
SKIPPING PERSISTIES

Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu


Creature Battle!

Default Player's Bubwool:
HP: 24/32

Default Player's Bubwool:
HP: 32/32

1. Attack
2. Swap
3. Return to Main Menu

SKIPPING PERSISTIES
Welcome to Creature Battle!
SKIPPING PERSISTIES
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_4/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_4/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_4/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_4/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - mini_g...
=================== 1 failed, 2 passed, 2 warnings in [REDACTED]s ====================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_687425_OneShotCoreAgent'],ladder/creature_battler_05_4/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:38:04,22f715ff-a571-4d3d-a595-e31647f8d52f,OneShotCoreAgent,creature_battler_04,5,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        battles_completed = 0
        max_battles = 10
        min_battles = 3
    
        def on_battle_completed(event):
            nonlocal battles_completed
            if isinstance(event, BattleCompletedEvent):
                battles_completed += 1
    
>       AbstractApp.subscribe_to_events(on_battle_completed)
E       AttributeError: type object 'AbstractApp' has no attribute 'subscribe_to_events'

main_game/tests/test_main_game_scene.py:26: AttributeError
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>

    def run(self):
        while self.battles_played < self.max_battles:
>           self._reset_creatures()
E           AttributeError: 'MainGameScene' object has no attribute '_reset_creatures'

main_game/scenes/main_game_scene.py:26: AttributeError
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>

    def run(self):
        while self.battles_played < self.max_battles:
>           self._reset_creatures()
E           AttributeError: 'MainGameScene' object has no attribute '_reset_creatures'

main_game/scenes/main_game_scene.py:26: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Attrib...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - Attrib...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        battles_completed = 0
        max_battles = 10
        min_battles = 3
    
        def on_battle_completed(event):
            nonlocal battles_completed
            if isinstance(event, BattleCompletedEvent):
                battles_completed += 1
    
>       AbstractApp.subscribe_to_events(on_battle_completed)
E       AttributeError: type object 'AbstractApp' has no attribute 'subscribe_to_events'

main_game/tests/test_main_game_scene.py:26: AttributeError
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>

    def run(self):
        while self.battles_played < self.max_battles:
>           self._reset_creatures()
E           AttributeError: 'MainGameScene' object has no attribute '_reset_creatures'

main_game/scenes/main_game_scene.py:26: AttributeError
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>

    def run(self):
        while self.battles_played < self.max_battles:
>           self._reset_creatures()
E           AttributeError: 'MainGameScene' object has no attribute '_reset_creatures'

main_game/scenes/main_game_scene.py:26: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Attrib...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - Attrib...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 1. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 3 items

main_game/tests/test_main_game_scene.py F                                [ 33%]
main_game/tests/test_main_menu_scene.py F                                [ 66%]
main_game/tests/test_whole_game.py F                                     [100%]

=================================== FAILURES ===================================
_____________________________ test_main_game_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_game_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        battles_completed = 0
        max_battles = 10
        min_battles = 3
    
        def on_battle_completed(event):
            nonlocal battles_completed
            if isinstance(event, BattleCompletedEvent):
                battles_completed += 1
    
>       AbstractApp.subscribe_to_events(on_battle_completed)
E       AttributeError: type object 'AbstractApp' has no attribute 'subscribe_to_events'

main_game/tests/test_main_game_scene.py:26: AttributeError
_____________________________ test_main_menu_scene _____________________________

app = <main_game.main.App object at 0x[REDACTED]>

    def test_main_menu_scene(app):
        HumanListener.random_mode = True
        player = app.create_player(""test_player"")
    
        for _ in range(10):
            try:
>               app.run(player)

main_game/tests/test_main_menu_scene.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>

    def run(self):
        while self.battles_played < self.max_battles:
>           self._reset_creatures()
E           AttributeError: 'MainGameScene' object has no attribute '_reset_creatures'

main_game/scenes/main_game_scene.py:26: AttributeError
----------------------------- Captured stdout call -----------------------------
broadcast: {'__type': 'OnGameStart'}
Welcome to Creature Battle!
SKIPPING PERSISTIES
_____________________ test_full_game_flow_random_with_bots _____________________

    def test_full_game_flow_random_with_bots():
        for i in range(10):
            print(f""starting random run iteration {i}"")
            HumanListener.random_mode = True
            HumanListener.random_mode_counter = 100  # 100 moves suffice for running through some common scenarios in the game
            App.matchmaking_wait_time = 0
            original_wait_time = App.matchmaking_wait_time
    
            app = App()
    
            # Create a human player
            human_player = app.create_player(""HumanPlayer"")
            human_player.set_listener(HumanListener())
    
            try:
>               app.run(human_player)

main_game/tests/test_whole_game.py:23: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../../mge2/mini_game_engine/engine/lib.py:531: in run
    self.transition_to_scene(self.entry_point_scene_id, player=player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
main_game/scenes/main_menu_scene.py:16: in run
    self._transition_to_scene(""MainGameScene"")
../../../../mge2/mini_game_engine/engine/lib.py:412: in _transition_to_scene
    self._app.transition_to_scene(scene_name, player=self.player)
../../../../mge2/mini_game_engine/engine/lib.py:647: in transition_to_scene
    self.__run_scene(scene)
../../../../mge2/mini_game_engine/engine/lib.py:691: in __run_scene
    scene.run()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <main_game.scenes.main_game_scene.MainGameScene object at 0x[REDACTED]>

    def run(self):
        while self.battles_played < self.max_battles:
>           self._reset_creatures()
E           AttributeError: 'MainGameScene' object has no attribute '_reset_creatures'

main_game/scenes/main_game_scene.py:26: AttributeError
----------------------------- Captured stdout call -----------------------------
starting random run iteration 0
Welcome to Creature Battle!
SKIPPING PERSISTIES
=========================== short test summary info ============================
FAILED main_game/tests/test_main_game_scene.py::test_main_game_scene - Attrib...
FAILED main_game/tests/test_main_menu_scene.py::test_main_menu_scene - Attrib...
FAILED main_game/tests/test_whole_game.py::test_full_game_flow_random_with_bots
============================== 3 failed in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 1

",['new_prompt_logs/1727810901_891303_OneShotCoreAgent'],ladder/creature_battler_04_5/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:38:41,427ed5e8-61bb-4cec-8e95-4fda6e0cbd37,OneShotCoreAgent,creature_battler_05,6,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 2. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 2 items / 1 error

==================================== ERRORS ====================================
_ ERROR collecting temp/ladder/creature_battler_05_6/main_game/tests/test_whole_game.py _
ImportError while importing test module '[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_6/main_game/tests/test_whole_game.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
main_game/tests/test_whole_game.py:5: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_menu_scene import MainMenuScene, QuitScene
E   ImportError: cannot import name 'QuitScene' from 'main_game.scenes.main_menu_scene' ([REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_6/main_game/scenes/main_menu_scene.py)
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_6/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_6/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_6/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_6/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
ERROR main_game/tests/test_whole_game.py
!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!
========================= 2 warnings, 1 error in [REDACTED]s =========================
PYTEST_EXIT_CODE: 2
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 2. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 2 items / 1 error

==================================== ERRORS ====================================
_ ERROR collecting temp/ladder/creature_battler_05_6/main_game/tests/test_whole_game.py _
ImportError while importing test module '[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_6/main_game/tests/test_whole_game.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
main_game/tests/test_whole_game.py:5: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_menu_scene import MainMenuScene, QuitScene
E   ImportError: cannot import name 'QuitScene' from 'main_game.scenes.main_menu_scene' ([REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_6/main_game/scenes/main_menu_scene.py)
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_6/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_6/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_6/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_6/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
ERROR main_game/tests/test_whole_game.py
!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!
========================= 2 warnings, 1 error in [REDACTED]s =========================
PYTEST_EXIT_CODE: 2


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 2. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 2 items / 1 error

==================================== ERRORS ====================================
_ ERROR collecting temp/ladder/creature_battler_05_6/main_game/tests/test_whole_game.py _
ImportError while importing test module '[REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_6/main_game/tests/test_whole_game.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
main_game/tests/test_whole_game.py:5: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_menu_scene import MainMenuScene, QuitScene
E   ImportError: cannot import name 'QuitScene' from 'main_game.scenes.main_menu_scene' ([REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_6/main_game/scenes/main_menu_scene.py)
=============================== warnings summary ===============================
main_game/tests/test_main_game_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_6/main_game/tests/test_main_game_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_6/main_game/tests/test_main_game_scene.py)
    class TestApp(AbstractApp):

main_game/tests/test_main_menu_scene.py:8
  [REDACT]/volter-monorepo/packages/lib-volter-mge2/temp/ladder/creature_battler_05_6/main_game/tests/test_main_menu_scene.py:8: PytestCollectionWarning: cannot collect test class 'TestApp' because it has a __init__ constructor (from: temp/ladder/creature_battler_05_6/main_game/tests/test_main_menu_scene.py)
    class TestApp(AbstractApp):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
ERROR main_game/tests/test_whole_game.py
!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!
========================= 2 warnings, 1 error in [REDACTED]s =========================
PYTEST_EXIT_CODE: 2

",['new_prompt_logs/1727810901_944702_OneShotCoreAgent'],ladder/creature_battler_05_6/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:39:27,6d252968-63c2-4ec3-a578-d4a6c349c919,OneShotCoreAgent,creature_battler_05,3,failure,"After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 2. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 0 items / 3 errors

==================================== ERRORS ====================================
_ ERROR collecting temp/ladder/creature_battler_05_3/main_game/tests/test_main_game_scene.py _
main_game/tests/test_main_game_scene.py:3: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:1: in <module>
    final_damage = int(raw_damage * effectiveness)  # Explicitly convert to integer
E   NameError: name 'raw_damage' is not defined
_ ERROR collecting temp/ladder/creature_battler_05_3/main_game/tests/test_main_menu_scene.py _
main_game/tests/test_main_menu_scene.py:3: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:1: in <module>
    final_damage = int(raw_damage * effectiveness)  # Explicitly convert to integer
E   NameError: name 'raw_damage' is not defined
_ ERROR collecting temp/ladder/creature_battler_05_3/main_game/tests/test_whole_game.py _
main_game/tests/test_whole_game.py:5: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:1: in <module>
    final_damage = int(raw_damage * effectiveness)  # Explicitly convert to integer
E   NameError: name 'raw_damage' is not defined
=========================== short test summary info ============================
ERROR main_game/tests/test_main_game_scene.py - NameError: name 'raw_damage' ...
ERROR main_game/tests/test_main_menu_scene.py - NameError: name 'raw_damage' ...
ERROR main_game/tests/test_whole_game.py - NameError: name 'raw_damage' is no...
!!!!!!!!!!!!!!!!!!! Interrupted: 3 errors during collection !!!!!!!!!!!!!!!!!!!!
============================== 3 errors in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 2
","Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 69, in execute
    await self.sdk.execute_as_task(PytestRunnerAgent, verbose=False)
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/volter-common/common/sdk/SDK.py"", line 265, in execute_as_task
    response = await agent.execute()
               ^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/game/pytest_runner_agent/logic.py"", line 27, in execute
    output = run_pytest(test_file_path, project_root=self.sdk.project_directory, verbose=self.verbose)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-std-agents/agent_lib/random_run_utils.py"", line 119, in run_pytest
    raise AssertionError(f""Pytest failed with exit code {exit_code}. Output:\n{output}"")
AssertionError: Pytest failed with exit code 2. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 0 items / 3 errors

==================================== ERRORS ====================================
_ ERROR collecting temp/ladder/creature_battler_05_3/main_game/tests/test_main_game_scene.py _
main_game/tests/test_main_game_scene.py:3: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:1: in <module>
    final_damage = int(raw_damage * effectiveness)  # Explicitly convert to integer
E   NameError: name 'raw_damage' is not defined
_ ERROR collecting temp/ladder/creature_battler_05_3/main_game/tests/test_main_menu_scene.py _
main_game/tests/test_main_menu_scene.py:3: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:1: in <module>
    final_damage = int(raw_damage * effectiveness)  # Explicitly convert to integer
E   NameError: name 'raw_damage' is not defined
_ ERROR collecting temp/ladder/creature_battler_05_3/main_game/tests/test_whole_game.py _
main_game/tests/test_whole_game.py:5: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:1: in <module>
    final_damage = int(raw_damage * effectiveness)  # Explicitly convert to integer
E   NameError: name 'raw_damage' is not defined
=========================== short test summary info ============================
ERROR main_game/tests/test_main_game_scene.py - NameError: name 'raw_damage' ...
ERROR main_game/tests/test_main_menu_scene.py - NameError: name 'raw_damage' ...
ERROR main_game/tests/test_whole_game.py - NameError: name 'raw_damage' is no...
!!!!!!!!!!!!!!!!!!! Interrupted: 3 errors during collection !!!!!!!!!!!!!!!!!!!!
============================== 3 errors in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 2


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_bench/bench_utils.py"", line 91, in execute_agent
    asyncio.run(agent.execute())
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py"", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py"", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File ""/Users/andrewvolter/Desktop/volter-monorepo/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py"", line 76, in execute
    raise FixableException(
common.exceptions.FixableException: After 5 attempts to debug, could not create a bug-free game. Still have error Pytest failed with exit code 2. Output:
============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-7.4.4, pluggy-1.5.0
rootdir: [REDACT]/volter-monorepo/packages/lib-volter-mge2
configfile: pytest.ini
plugins: asyncio-0.23.8, html-3.2.0, env-1.1.3, metadata-3.1.1, anyio-4.6.0, cov-4.1.0, timeout-2.3.1, sugar-0.9.7
asyncio: mode=Mode.STRICT
collected 0 items / 3 errors

==================================== ERRORS ====================================
_ ERROR collecting temp/ladder/creature_battler_05_3/main_game/tests/test_main_game_scene.py _
main_game/tests/test_main_game_scene.py:3: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:1: in <module>
    final_damage = int(raw_damage * effectiveness)  # Explicitly convert to integer
E   NameError: name 'raw_damage' is not defined
_ ERROR collecting temp/ladder/creature_battler_05_3/main_game/tests/test_main_menu_scene.py _
main_game/tests/test_main_menu_scene.py:3: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:1: in <module>
    final_damage = int(raw_damage * effectiveness)  # Explicitly convert to integer
E   NameError: name 'raw_damage' is not defined
_ ERROR collecting temp/ladder/creature_battler_05_3/main_game/tests/test_whole_game.py _
main_game/tests/test_whole_game.py:5: in <module>
    from main_game.main import App
main_game/main.py:4: in <module>
    from main_game.scenes.main_game_scene import MainGameScene
main_game/scenes/main_game_scene.py:1: in <module>
    final_damage = int(raw_damage * effectiveness)  # Explicitly convert to integer
E   NameError: name 'raw_damage' is not defined
=========================== short test summary info ============================
ERROR main_game/tests/test_main_game_scene.py - NameError: name 'raw_damage' ...
ERROR main_game/tests/test_main_menu_scene.py - NameError: name 'raw_damage' ...
ERROR main_game/tests/test_whole_game.py - NameError: name 'raw_damage' is no...
!!!!!!!!!!!!!!!!!!! Interrupted: 3 errors during collection !!!!!!!!!!!!!!!!!!!!
============================== 3 errors in [REDACTED]s ===============================
PYTEST_EXIT_CODE: 2

",['new_prompt_logs/1727810901_150927_OneShotCoreAgent'],ladder/creature_battler_05_3/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:40:24,64a370df-9570-463f-8f10-49367fd57e0a,OneShotCoreAgent,creature_battler_04,2,success,,,['new_prompt_logs/1727810901_338529_OneShotCoreAgent'],ladder/creature_battler_04_2/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:40:45,74ba6ee6-6c3c-47db-97b4-38d8e33b363b,OneShotCoreAgent,creature_battler_05,2,success,,,['new_prompt_logs/1727810901_711871_OneShotCoreAgent'],ladder/creature_battler_05_2/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
2024-10-01 15:42:00,a491b008-bb6d-4a21-8137-0e3aa68ae887,OneShotCoreAgent,creature_battler_05,7,success,,,['new_prompt_logs/1727810901_358640_OneShotCoreAgent'],ladder/creature_battler_05_7/main_game,https://github.com/volter-ai/volter-monorepo/blob/fbb4074203695d9296798e0877af2edb46e98d88/packages/lib-volter-mge2/mge_agents/one_shot_gen/one_shot_core.py
