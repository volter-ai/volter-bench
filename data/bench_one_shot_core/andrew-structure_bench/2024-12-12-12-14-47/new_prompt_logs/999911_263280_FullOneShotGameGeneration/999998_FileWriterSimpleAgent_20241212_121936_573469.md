Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me plan out the implementation first:

1. Implementation Plan:
- The GameAI needs to manage automated upgrades for a coffee shop game
- There are 5 types of upgrades: barista, machine, speed, space, and quality
- We need to track these upgrades and their costs from gameData.js
- For the main currency tracking, we'll use game.money
- For experimental mode, we'll:
  * Set infinite money
  * Randomly apply 0-10 upgrades of each type
- For standard mode, we'll:
  * Check all upgrade costs every 100ms
  * Buy the cheapest available upgrade
  * Log the purchase
- We'll track game stats including:
  * Money
  * Customer count and capacity
  * Number of baristas and machines
  * Speed and quality levels
- The AI will run for the specified duration then export logs

2. Here's the implementation:

# Excerpt ID: 67a049bf-989a-4f4d-9e86-72907abc8b5d
```javascript src/GameAI.js
import { AIUtils } from './AIUtils';
import { UPGRADE_COSTS, INITIAL_VALUES } from './game/gameData';

const UPGRADES = [
  'barista',
  'machine', 
  'speed',
  'space',
  'quality'
];

export class GameAI {
  constructor() {
    this.ai = new AIUtils();
    this.game = null;
    this.initialized = false;
    // Initialize upgrade levels for all upgrade types
    this.upgradeLevels = UPGRADES.reduce((acc, upgrade) => {
      acc[upgrade] = 0;
      return acc;
    }, {});
  }

  init() {
    if (!window.game || !window.game.ready) {
      setTimeout(() => this.init(), 100);
      return;
    }
    this.game = window.game;

    if (this.initialized) return;
    this.initialized = true;

    window.game.app.ticker.speed = this.ai.defaultGameSpeed;
    this.ai.updateDebugOverlay('Game speed set to ' + this.ai.defaultGameSpeed + 'x');

    if (this.ai.enabled) {
      this.ai.gameStartTime = Date.now();

      if (this.ai.mode === 'experimental') {
        this.setupExperimentalMode();
      }

      this.ai.startLoggingLoop(this.getMainCurrency.bind(this));
      this.startUpgradeLoop();
      this.updateGameStats();

      setTimeout(() => {
        this.ai.stopAI();
        this.ai.exportLogs();
        this.ai.updateDebugOverlay('Session ended - logs exported');
      }, this.ai.duration);
    }
  }

  getMainCurrency() {
    return this.game.money;
  }

  setupExperimentalMode() {
    // Give infinite money for experimental mode
    this.game.money = Number.MAX_SAFE_INTEGER;

    // Randomly upgrade each stat between 0-10 times
    UPGRADES.forEach(upgrade => {
      const times = Math.floor(Math.random() * 11); // 0 to 10
      for (let i = 0; i < times; i++) {
        this.performUpgrade(upgrade, 0, true);
      }
    });

    this.ai.updateDebugOverlay('Experimental mode initialized with random upgrades');
  }

  updateGameStats() {
    const stats = {
      Money: Math.floor(this.game.money),
      'Customer Count': this.game.customers ? this.game.customers.children.length : 0,
      'Max Customers': this.game.maxCustomers,
      'Barista Count': this.game.baristaCount,
      'Machine Count': this.game.machineCount,
      'Barista Speed': Math.floor(this.game.baristaSpeed),
      'Coffee Quality': this.game.coffeeQuality.toFixed(2)
    };

    this.ai.updateDebugOverlay('Game stats updated', stats);
  }

  startUpgradeLoop() {
    if (!this.ai.enabled || this.ai.mode === 'experimental') return;

    this.upgradeInterval = setInterval(() => {
      this.checkCheapestUpgrade();
      this.updateGameStats();
    }, 100);
  }

  checkCheapestUpgrade() {
    let cheapestUpgrade = null;
    let lowestCost = Infinity;

    for (const upgrade of UPGRADES) {
      const cost = this.game.upgradeCosts[upgrade];
      if (cost <= this.game.money && cost < lowestCost) {
        cheapestUpgrade = upgrade;
        lowestCost = cost;
      }
    }

    if (cheapestUpgrade) {
      this.performUpgrade(cheapestUpgrade, lowestCost);
    }
  }

  performUpgrade(upgradeName, cost, skipLogging = false) {
    // Increment the upgrade level before performing the upgrade
    this.upgradeLevels[upgradeName]++;
    const currentLevel = this.upgradeLevels[upgradeName];

    switch (upgradeName) {
      case 'barista':
        this.game.upgradeBaristas();
        break;
      case 'machine':
        this.game.upgradeMachines();
        break;
      case 'speed':
        this.game.upgradeSpeed();
        break;
      case 'space':
        this.game.upgradeSpace();
        break;
      case 'quality':
        this.game.upgradeQuality();
        break;
      default:
        console.error(`${upgradeName} is not a valid upgrade`);
    }

    if (!skipLogging) {
      const upgradeInfo = {
        timestamp: Date.now(),
        upgrade: upgradeName,
        cost: cost,
        level: currentLevel
      };

      this.ai.logUpgrade(upgradeInfo);
      this.ai.updateDebugOverlay(`Purchased ${upgradeName} upgrade for ${cost} (Level ${currentLevel})`);
    }
  }
}

const gameAI = new GameAI();
gameAI.init();

if (window.game) {
  window.game.exportAILogs = () => gameAI.ai.exportLogs();
  window.game.clearAILogs = () => gameAI.ai.clearLogs();
}

export default gameAI;
```

The implementation:
1. Imports necessary game data and defines available upgrades
2. Tracks upgrade levels for each type
3. Initializes AI with proper game speed
4. Implements experimental mode with random upgrades
5. Implements standard mode that buys cheapest available upgrade
6. Tracks and logs all game stats and upgrades
7. Exports logs after session ends

The AI will automatically purchase upgrades to optimize the coffee shop's performance based on available money and upgrade costs.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
