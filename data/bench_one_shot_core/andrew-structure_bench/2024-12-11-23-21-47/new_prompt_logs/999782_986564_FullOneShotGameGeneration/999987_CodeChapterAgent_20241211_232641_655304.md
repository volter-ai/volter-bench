Role: system
Content: 
You are an expert software developer.

Here is the existing code of this game
```jsx src/pages/Story.jsx
import React, { useEffect, useState } from 'react';
import { CHARACTERS, LOCATIONS } from '../logic/gameData';

export default function Story({ gameLogic, onLeaveStory }) {
  const [content, setContent] = useState(null);
  const [location, setLocation] = useState(null);

  useEffect(() => {
    const current = gameLogic.getCurrentContent();
    setContent(current.content);
    setLocation(current.location);
  }, []);

  const handleAdvance = () => {
    const result = gameLogic.advance();
    if (result.isGameOver) {
      onLeaveStory();
      return;
    }

    const current = gameLogic.getCurrentContent();
    setContent(current.content);
    setLocation(current.location);
  };

  const handleChoice = (index) => {
    const result = gameLogic.makeChoice(index);
    if (result.isGameOver) {
      onLeaveStory();
      return;
    }

    const current = gameLogic.getCurrentContent();
    setContent(current.content);
    setLocation(current.location);
  };

  if (!content) return null;

  return (
    <div className="relative h-screen w-screen overflow-hidden bg-gray-900">
      {/* Background */}
      <div className="absolute inset-0 z-0">
        <div className="absolute inset-0 bg-black/50 z-10" />
        <img
          src={gameLogic.getSpriteUrl(LOCATIONS[location].spriteId)}
          alt="background"
          className="w-full h-full object-cover"
        />
      </div>

      {/* Character */}
      {content.type === 'dialog' && !content.noSpeakerSprite && (
        <div className="absolute bottom-0 left-1/2 -translate-x-1/2 z-20 min-w-0 min-h-0">
          <img
            src={gameLogic.getSpriteUrl(CHARACTERS[content.speaker].spriteId, content.variation)}
            alt={CHARACTERS[content.speaker].name}
            className="max-w-none"
            style={{ width: 'auto', height: 'auto' }}
          />
        </div>
      )}

      {/* Dialog/Choice UI */}
      <div className="absolute bottom-0 left-0 right-0 p-6 z-30">
        <div className="bg-gray-900/95 p-6 rounded-lg border border-gray-700">
          {content.type === 'dialog' && (
            <>
              <div className="text-2xl mb-3 font-bold text-white">
                {CHARACTERS[content.speaker].name}
              </div>
              <div className="text-lg mb-4 text-gray-200">
                {content.text}
              </div>
              <button
                onClick={handleAdvance}
                className="text-gray-400 text-sm hover:text-white transition-colors">
                Continue...
              </button>
            </>
          )}

          {content.type === 'narration' && (
            <>
              <div className="text-lg italic mb-4 text-gray-200">
                {content.text}
              </div>
              <button
                onClick={handleAdvance}
                className="text-gray-400 text-sm hover:text-white transition-colors">
                Continue...
              </button>
            </>
          )}

          {content.type === 'choice' && (
            <>
              <div className="text-lg mb-6 text-gray-200">
                {content.text}
              </div>
              <div className="space-y-3">
                {content.options.map((option, index) => (
                  <button
                    key={index}
                    onClick={() => handleChoice(index)}
                    className="w-full p-3 bg-gray-800 hover:bg-gray-700 rounded-lg text-left transition-colors border border-gray-700 text-white">
                    {option.text}
                  </button>
                ))}
              </div>
            </>
          )}
        </div>
      </div>
    </div>
  );
}

```
```js src/logic/gameLogic.js
import { CHARACTERS, LOCATIONS } from './gameData';
import { v4 } from 'uuid';
import { STORY_CONTENT } from './storyContent';
import { getSpriteUrl } from './assetUtils'

const deepClone = (obj) => JSON.parse(JSON.stringify(obj));

export default class GameLogic {
  constructor() {
    this.position = this.getInitialPosition();
  }

  getInitialPosition() {
    const firstChapter = Object.keys(STORY_CONTENT.chapters)[0];
    const firstScene = Object.keys(STORY_CONTENT.chapters[firstChapter].scenes)[0];
    const firstBeat = Object.keys(STORY_CONTENT.chapters[firstChapter].scenes[firstScene].beats)[0];

    return {
      chapter: firstChapter,
      scene: firstScene,
      beat: firstBeat,
      lineIndex: 0
    };
  }

  getSpriteUrl(spriteId, variation = null) {
    return getSpriteUrl(spriteId, variation);
  }

  reset() {
    this.position = this.getInitialPosition();
    return this.position;
  }

  getCurrentContent() {
    const { chapter, scene, beat, lineIndex } = this.position;

    if (!STORY_CONTENT.chapters[chapter]) {
      throw new Error(`Chapter ${chapter} not found`);
    }

    const currentScene = STORY_CONTENT.chapters[chapter].scenes[scene];
    if (!currentScene) {
      throw new Error(`Scene ${scene} not found in chapter ${chapter}`);
    }

    const currentBeat = currentScene.beats[beat];
    if (!currentBeat) {
      throw new Error(`Beat ${beat} not found in scene ${scene}`);
    }

    if (lineIndex >= currentBeat.lines.length) {
      throw new Error(`Line index ${lineIndex} out of bounds`);
    }

    return {
      content: currentBeat.lines[lineIndex],
      location: currentScene.location
    };
  }

  handleTransition(next) {
    if (!next) {
      throw new Error('Cannot advance: no next position specified');
    }

    if (next.isGameOver) {
      return { isGameOver: true };
    }

    if (!next.chapter || !next.scene || !next.beat) {
      throw new Error('Next position must specify chapter, scene and beat');
    }

    this.position = {
      chapter: next.chapter,
      scene: next.scene,
      beat: next.beat,
      lineIndex: 0
    };

    return this.position;
  }

  advance() {
    const { chapter, scene, beat, lineIndex } = this.position;
    const currentScene = STORY_CONTENT.chapters[chapter].scenes[scene];
    const currentBeat = currentScene.beats[beat];

    if (lineIndex + 1 < currentBeat.lines.length) {
      this.position.lineIndex += 1;
      return this.position;
    }

    return this.handleTransition(currentBeat.next);
  }

  makeChoice(choiceIndex) {
    const { content } = this.getCurrentContent();
    if (content.type !== 'choice') {
      throw new Error('Current content is not a choice');
    }

    const choice = content.options[choiceIndex];
    if (!choice) {
      throw new Error(`Invalid choice index: ${choiceIndex}`);
    }

    return this.handleTransition(choice.next);
  }
}

```
```js src/logic/gameLogic.test.js
import GameLogic from './gameLogic';
import { STORY_CONTENT } from './storyContent';
import { CHARACTERS, LOCATIONS } from './gameData';
import { initialize } from './assetUtils';

describe('GameLogic', () => {
  let game;

  beforeAll(() => {
    game = new GameLogic();
    return initialize();
  });

  describe('validate story content', () => {
    test('validate all story content', () => {
      const errors = [];
      const game = new GameLogic();

      // Validate all story content
      Object.entries(STORY_CONTENT.chapters).forEach(([chapterId, chapter]) => {
        // Skip validation for placeholder content
        if (chapter.isPlaceholder) return;

        Object.entries(chapter.scenes).forEach(([sceneId, scene]) => {
          // Validate location
          try {
            game.getSpriteUrl(scene.location);
          } catch (error) {
            errors.push(`Invalid location ${scene.location} in chapter ${chapterId}, scene ${sceneId}`);
          }

          Object.entries(scene.beats).forEach(([beatId, beat]) => {
            beat.lines.forEach((line, lineIndex) => {
              // Validate character sprites
              if (line.type === 'dialog') {
                if (!CHARACTERS[line.speaker]) {
                  errors.push(`Invalid character ${line.speaker} in chapter ${chapterId}, scene ${sceneId}, beat ${beatId}, line ${lineIndex}`);
                }
                if (!line.noSpeakerSprite) {
                  try {
                    game.getSpriteUrl(line.speaker, line.variation);
                  } catch (error) {
                    errors.push(`${error.message} in chapter ${chapterId}, scene ${sceneId}, beat ${beatId}, line ${lineIndex}`);
                  }
                }
              }

              // Validate choices
              if (line.type === 'choice') {
                line.options.forEach((option, optionIndex) => {
                  if (!option.next && !option.next.isGameOver) {
                    errors.push(`Missing next for choice option ${optionIndex} in chapter ${chapterId}, scene ${sceneId}, beat ${beatId}, line ${lineIndex}`);
                  }
                });
              }
            });

            // Validate next references
            if (beat.next && !beat.next.isGameOver) {
              const { chapter, scene, beat: nextBeat } = beat.next;
              if (!STORY_CONTENT.chapters[chapter]?.scenes[scene]?.beats[nextBeat]) {
                errors.push(`Invalid next reference "${chapter}.${scene}.${nextBeat}" in chapter ${chapterId}, scene ${sceneId}, beat ${beatId}`);
              }
            }
          });
        });
      });

      if (errors.length > 0) {
        throw new Error('Story validation failed:\n' + errors.join('\n'));
      }
    });
  });

  describe('full simulation', () => {
    test('simulate the game many times until the end', () => {
      // Skip simulation if all content is placeholder
      if (Object.values(STORY_CONTENT.chapters).every(chapter => chapter.isPlaceholder)) {
        return;
      }

      const endingsSeen = new Set();
      
      // Run 100 simulations
      for (let i = 0; i < 100; i++) {
        game.reset();
        let isGameOver = false;

        // Run 1000 steps in the story
        for (let j = 0; j < 1000; j++) {
          const { content, location } = game.getCurrentContent();
          
          // Validate location sprite
          game.getSpriteUrl(location);
          
          // Validate character sprites if dialog
          if (content.type === 'dialog' && !content.noSpeakerSprite) {
            game.getSpriteUrl(content.speaker, content.variation);
          }

          if (content.type === 'choice') {
            // Make random choice
            const choiceIndex = Math.floor(Math.random() * content.options.length);
            const result = game.makeChoice(choiceIndex);
            isGameOver = result.isGameOver;
          } else {
            const result = game.advance();
            isGameOver = result.isGameOver;
          }

          if (isGameOver) {
            break;
          }
        }

        if (!isGameOver) {
          throw new Error('1000 steps in the simulation were run but we did not reach game over');
        }

        // Record which ending was reached
        const { beat } = game.position;
        endingsSeen.add(beat);
      }
    });
  });
});

```
```js src/logic/gameData.js
export const CHARACTERS = {
  alex: {
    prototypeId: 'alex',
    name: 'Alex',
    spriteId: 'alex'
  },
  mysteriousFigure: {
    prototypeId: 'mysteriousFigure',
    name: 'Mysterious Figure',
    spriteId: 'mysteriousFigure'
  },
  stranger: {
    prototypeId: 'stranger',
    name: 'Stranger',
    spriteId: 'stranger'
  },
  shadowyFigure: {
    prototypeId: 'shadowyFigure',
    name: 'Shadowy Figure',
    spriteId: 'shadowyFigure'
  },
  whisper: {
    prototypeId: 'whisper',
    name: 'Whisper',
    spriteId: 'whisper'
  },
  radioVoice: {
    prototypeId: 'radioVoice',
    name: 'Radio Voice',
    spriteId: 'radioVoice'
  }
}

export const LOCATIONS = {
  darkChamber: {
    prototypeId: 'darkChamber',
    name: 'Dark Chamber',
    spriteId: 'darkChamber'
  },
  symbolChamber: {
    prototypeId: 'symbolChamber',
    name: 'Symbol Chamber',
    spriteId: 'symbolChamber'
  },
  corridor: {
    prototypeId: 'corridor',
    name: 'Corridor',
    spriteId: 'corridor'
  }
}

```
```js src/logic/assetManifest.js
export const SPRITES = {
  "alex": {
    srcs: "assets/characters/alex-{variation}.png",
    variations: ['neutral', 'happy', 'sad', 'embarrassed', 'crying', 'surprised', 'angry', 'thinking'],
    width: 416,
    height: 624
  },
  "mysteriousFigure": {
    srcs: "assets/characters/mysteriousFigure-{variation}.png",
    variations: ['neutral', 'happy', 'sad', 'embarrassed', 'crying', 'surprised', 'angry', 'thinking'],
    width: 416,
    height: 624
  },
  "stranger": {
    srcs: "assets/characters/stranger-{variation}.png",
    variations: ['neutral', 'happy', 'sad', 'embarrassed', 'crying', 'surprised', 'angry', 'thinking'],
    width: 416,
    height: 624
  },
  "shadowyFigure": {
    srcs: "assets/characters/shadowyFigure-{variation}.png",
    variations: ['neutral', 'happy', 'sad', 'embarrassed', 'crying', 'surprised', 'angry', 'thinking'],
    width: 416,
    height: 624
  },
  "darkChamber": {
    srcs: "assets/locations/darkChamber.png",
    width: 1216,
    height: 960
  },
  "symbolChamber": {
    srcs: "assets/locations/symbolChamber.png",
    width: 1216,
    height: 960
  },
  "corridor": {
    srcs: "assets/locations/corridor.png",
    width: 1216,
    height: 960
  }
}

```
```js src/logic/storyContent.js
import chapter1 from './content/chapter1';

export const STORY_CONTENT = {
  chapters: {
    chapter1
  }
}

```

```js src/logic/content/chapter1.js
export default {
  scenes: {
    void: {
      location: 'darkChamber',
      beats: {
        awakening: {
          lines: [
            {
              type: 'narration',
              text: 'Darkness envelops everything. A faint dripping sound echoes in the distance. Alex awakens on a cold, hard floor.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: 'Ugh... my head. Where am I?'
            },
            {
              type: 'narration',
              text: 'A soft whisper brushes past their ear.'
            },
            {
              type: 'dialog',
              speaker: 'whisper',
              variation: 'neutral',
              noSpeakerSprite: true,
              text: 'Awaken...'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: "Who's there? Show yourself!"
            },
            {
              type: 'narration',
              text: 'Silence. Alex strains their eyes but sees nothing.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: 'Great. Just great. Lost in the dark with voices. Think, Alex, think.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'void',
            beat: 'echoes'
          }
        },
        echoes: {
          lines: [
            {
              type: 'narration',
              text: 'Alex feels around, their hands sliding over damp walls.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: 'Feels like stone. Maybe an old building?'
            },
            {
              type: 'narration',
              text: 'A faint light flickers to the left; a distant sound echoes to the right.'
            },
            {
              type: 'choice',
              text: 'Which way should Alex go?',
              options: [
                {
                  text: 'Follow the faint light',
                  next: {
                    chapter: 'chapter1',
                    scene: 'void',
                    beat: 'followLight'
                  }
                },
                {
                  text: 'Follow the distant sound',
                  next: {
                    chapter: 'chapter1',
                    scene: 'void',
                    beat: 'followSound'
                  }
                }
              ]
            }
          ]
        },
        followLight: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: "Light means a way out. Let's hope that's true."
            },
            {
              type: 'narration',
              text: 'They move cautiously towards the flickering glow.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'fork',
            beat: 'lightPath'
          }
        },
        followSound: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: 'Maybe that sound is someone who can help.'
            },
            {
              type: 'narration',
              text: 'They head towards the sound, footsteps echoing.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'fork',
            beat: 'soundPath'
          }
        }
      }
    },
    fork: {
      location: 'symbolChamber',
      beats: {
        lightPath: {
          lines: [
            {
              type: 'narration',
              text: 'Alex enters a chamber illuminated by strange symbols.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'What is this place?'
            },
            {
              type: 'narration',
              text: 'A figure steps out of the shadows.'
            },
            {
              type: 'dialog',
              speaker: 'mysteriousFigure',
              variation: 'neutral',
              text: "You've finally arrived."
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'Who are you?'
            },
            {
              type: 'dialog',
              speaker: 'mysteriousFigure',
              variation: 'neutral',
              text: 'A friend. Perhaps more.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'fork',
            beat: 'trustOrDoubt'
          }
        },
        soundPath: {
          lines: [
            {
              type: 'narration',
              text: 'Alex finds themselves in a corridor with flickering lights. A radio crackles nearby.'
            },
            {
              type: 'dialog',
              speaker: 'radioVoice',
              variation: 'neutral',
              noSpeakerSprite: true,
              text: 'Is someone there?'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: "Yes! I'm here! Who is this?"
            },
            {
              type: 'dialog',
              speaker: 'radioVoice',
              variation: 'neutral',
              noSpeakerSprite: true,
              text: 'Help is on the way. Trust no one.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'Wait, what do you mean?'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'fork',
            beat: 'trustOrDoubt'
          }
        },
        trustOrDoubt: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: "This is getting weirder by the minute."
            },
            {
              type: 'narration',
              text: 'Footsteps approach.'
            },
            {
              type: 'dialog',
              speaker: 'stranger',
              variation: 'neutral',
              text: 'You look lost.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: "That's an understatement."
            },
            {
              type: 'dialog',
              speaker: 'stranger',
              variation: 'neutral',
              text: 'Come with me. I can help.'
            },
            {
              type: 'choice',
              text: 'What should Alex do?',
              options: [
                {
                  text: 'Trust the stranger and follow them',
                  next: {
                    chapter: 'chapter1',
                    scene: 'fork',
                    beat: 'trust'
                  }
                },
                {
                  text: 'Doubt their intentions and stay back',
                  next: {
                    chapter: 'chapter1',
                    scene: 'fork',
                    beat: 'doubt'
                  }
                }
              ]
            }
          ]
        },
        trust: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: 'Alright. Lead the way.'
            },
            {
              type: 'dialog',
              speaker: 'stranger',
              variation: 'neutral',
              text: 'Wise decision.'
            },
            {
              type: 'narration',
              text: 'They walk together down a dimly lit hallway.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'shadows',
            beat: 'exploration'
          }
        },
        doubt: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: "I think I'll manage on my own."
            },
            {
              type: 'dialog',
              speaker: 'stranger',
              variation: 'neutral',
              text: "Suit yourself. Don't say I didn't warn you."
            },
            {
              type: 'narration',
              text: 'The stranger fades into the darkness.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'shadows',
            beat: 'exploration'
          }
        }
      }
    },
    shadows: {
      location: 'corridor',
      beats: {
        exploration: {
          lines: [
            {
              type: 'narration',
              text: 'Alone, Alex continues exploring.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: "Maybe I should've gone with them."
            },
            {
              type: 'narration',
              text: 'They stumble upon a wall covered in drawings.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: 'These symbols... why do they feel familiar?'
            },
            {
              type: 'narration',
              text: 'A sudden pain flashes in their head.'
            },
            {
              type: 'dialog',
              speaker: 'whisper',
              variation: 'neutral',
              noSpeakerSprite: true,
              text: 'Remember...'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'Ah! What was that?'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'shadows',
            beat: 'fightOrFlight'
          }
        },
        fightOrFlight: {
          lines: [
            {
              type: 'narration',
              text: 'A shadowy figure emerges behind them.'
            },
            {
              type: 'dialog',
              speaker: 'shadowyFigure',
              variation: 'neutral',
              text: "You shouldn't be here."
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'Who are you?'
            },
            {
              type: 'dialog',
              speaker: 'shadowyFigure',
              variation: 'neutral',
              text: 'Your end.'
            },
            {
              type: 'choice',
              text: 'What should Alex do?',
              options: [
                {
                  text: 'Stand and fight',
                  next: {
                    chapter: 'chapter1',
                    scene: 'shadows',
                    beat: 'fight'
                  }
                },
                {
                  text: 'Run away',
                  next: {
                    chapter: 'chapter1',
                    scene: 'shadows',
                    beat: 'flee'
                  }
                }
              ]
            }
          ]
        },
        fight: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'angry',
              text: "I'm not afraid of you!"
            },
            {
              type: 'narration',
              text: 'They clench their fists, ready to defend themselves.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'awakening',
            beat: 'timeStop'
          }
        },
        flee: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'Nope! Not dealing with this!'
            },
            {
              type: 'narration',
              text: 'Alex turns and sprints down the corridor.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'awakening',
            beat: 'timeStop'
          }
        }
      }
    },
    awakening: {
      location: 'symbolChamber',
      beats: {
        timeStop: {
          lines: [
            {
              type: 'narration',
              text: 'Regardless of the choice, the ground trembles. Time seems to slow.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: "What's happening?"
            },
            {
              type: 'narration',
              text: 'Objects around them float as if suspended.'
            },
            {
              type: 'dialog',
              speaker: 'mysteriousFigure',
              variation: 'neutral',
              text: "It's awakening within you."
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'What is?'
            },
            {
              type: 'dialog',
              speaker: 'mysteriousFigure',
              variation: 'neutral',
              text: 'Your true power.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'awakening',
            beat: 'finalChoice'
          }
        },
        finalChoice: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'My... power?'
            },
            {
              type: 'dialog',
              speaker: 'mysteriousFigure',
              variation: 'neutral',
              text: 'Yes. The ability to manipulate time itself.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: "This can't be real."
            },
            {
              type: 'choice',
              text: 'What should Alex do?',
              options: [
                {
                  text: 'Embrace the power',
                  next: {
                    chapter: 'chapter1',
                    scene: 'awakening',
                    beat: 'embrace'
                  }
                },
                {
                  text: 'Reject the power',
                  next: {
                    chapter: 'chapter1',
                    scene: 'awakening',
                    beat: 'reject'
                  }
                }
              ]
            }
          ]
        },
        embrace: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: 'If this is real, I need to control it.'
            },
            {
              type: 'narration',
              text: 'They focus, and time begins to move normally.'
            },
            {
              type: 'dialog',
              speaker: 'mysteriousFigure',
              variation: 'neutral',
              text: "Good. You're beginning to understand."
            }
          ],
          next: {
            isGameOver: true
          }
        },
        reject: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'angry',
              text: "No! I won't be a part of this!"
            },
            {
              type: 'narration',
              text: 'Time snaps back, and the world feels heavier.'
            },
            {
              type: 'dialog',
              speaker: 'mysteriousFigure',
              variation: 'neutral',
              text: "Denial won't change destiny."
            }
          ],
          next: {
            isGameOver: true
          }
        }
      }
    }
  }
}

```

__________________
Role: user
Content: Now make the changes to the code files based on this story

```markdown docs/chapters/chapter2.md
# Chapter 2: Echoes of Time

## Scene 1: Aftermath

*Alex stands amidst a swirling vortex of energy.*

**Alex:** "Did I just... stop time?"

*A soft laugh emanates from behind.*

**Luna:** "Impressive, isn't it?"

**Alex:** "Who are you now?"

**Luna:** "Names Luna. I've been watching you."

## Beat: The Stranger's Offer

**Alex:** "Watching me? That's not creepy at all."

**Luna:** "There's much you don't understand. But I can help."

**Alex:** "Why should I trust you?"

**Luna:** "Because we share the same gift."

## Decision Point 1: Join or Decline

*Option 1: Agree to go with Luna.*

*Option 2: Decline and go alone.*

### Choice 1: Agree to Go with Luna

**Alex:** "Alright. I'm in."

**Luna:** "Excellent. Follow me."

*They walk together into a shimmering portal.*

### Choice 2: Decline

**Alex:** "I think I'll figure this out myself."

**Luna:** "Very well. The offer stands if you change your mind."

*Luna disappears, leaving Alex alone.*

## Scene 2: Into the Depths

### If Went with Luna:

*They arrive at an underground facility filled with others.*

**Alex:** "What is this place?"

**Luna:** "Our sanctuary. A place for people like us."

**Elder:** "Welcome, Alex. We've been expecting you."

### If Alone:

*Alex wanders the streets, time glitches occur around them.*

**Alex:** "These anomalies... What is causing them?"

*An old newspaper catches their eye, mentioning time distortions.*

## Beat: Accept the Mission or Not

**Elder/Luna (if with Luna):** "We need your help to restore balance."

**Alex:** "Why me?"

**Elder:** "You have the potential to change everything."

## Decision Point 2: Accept the Mission or Not

*Option 1: Accept the mission.*

*Option 2: Decline and leave.*

### Choice 1: Accept the Mission

**Alex:** "If I can help, I will."

**Elder:** "Your courage is commendable."

### Choice 2: Decline

**Alex:** "I didn't sign up for this."

**Elder:** "Destiny has a way of catching up."

## Scene 3: Betrayal Unveiled

*As Alex delves deeper, they overhear a clandestine conversation.*

**Voice 1:** "Tonight, we turn the tide."

**Voice 2:** "They suspect nothing."

**Alex:** "What are they plotting?"

## Beat: Expose or Conceal

**Alex:** "I need to tell someone... but who can I trust?"

## Decision Point 3: Expose or Conceal

*Option 1: Expose the conspiracy.*

*Option 2: Keep it to themselves for now.*

### Choice 1: Expose

**Alex to Luna/Elder:** "There's a plot against us!"

**Luna:** "This is grave news."

**Elder:** "We must act immediately."

### Choice 2: Conceal

**Alex:** "I need more proof before I accuse anyone."

*They decide to investigate further.*

## Ending Scene: The Temporal Rift

*The sky cracks open, revealing a swirling rift.*

**Alex:** "What is that?!"

**Luna:** "The temporal rift. It's worse than we feared."

**Alex:** "How do we stop it?"

## Beat: Confront or Escape

**Luna:** "We have to face it head-on."

**Alex:** "Or find another way."

## Decision Point 4: Confront or Escape

*Option 1: Confront the rift.*

*Option 2: Escape to safety.*

### Choice 1: Confront the Rift

**Alex:** "I'm not running away. Let's end this."

**Luna:** "Together, then."

*They prepare to enter the rift.*

### Choice 2: Escape

**Alex:** "We need to regroup. This is too big."

**Luna:** "Time may not be on our side."

*They retreat as the rift expands.*

---

**End of Chapter 2**

```

Implementation Order:
1. write or rewrite the chapter file in `src/logic/content`
2. if this is not the first chapter, edit another earlier chapter from `src/logic/content` so that it would lead to this chapter rather than going to gameOver 
3. add the chapter to `src/logic/storyContent.js` as needed 
4. add new locations, characters, etc. to `src/logic/gameData.js` as needed 
5. add new assets to `src/logic/assetManifest.js` as needed

No other files can be changed

Do not leave any lines unwritten, because I do not know how to fill out this code. You should fill out the code not me

Content Guidelines:
1. DO NOT alter a single word of the story as it is written in the document. You must reproduce it faithfully word for word
2. Every line of dialog must have a variation. The available variations are neutral, happy, sad, embarrassed, crying, surprised, angry, thinking. The majority of dialog should be showing neutral
3. If a line of dialog is spoken by an off-screen character, noSpeakerSprite should be set to true (do not set it to true unless the character is explicitly off-screen)

Asset Manifest Guidelines:
- The screen size is exactly 390x844 so make sure all the assets are an appropriate size
- The background should be 1216x960 because we will allow the user to pan the background. The viewport will still be 390x844
- All characters should be 416x624. It will be slightly wider than the viewport
- Each character can have the variations: neutral, happy, sad, embarrassed, crying, surprised, angry, thinking
- Replace all the default assets with the assets in this game's story

General Implementation Guidelines:
1. Write out all the code of the files you intend to edit. I will be copy-pasting them
2. Do not do any refactoring aside from what you are requested to do

Directions:
In your response, do both steps, one after the other
1. First think carefully and describe in detail how you will implement the project design. Make sure to follow all the guidelines
2. Then write each file, according to the plan. Write the files exactly in the Implementation Order

Write out all the files in the format:
```filetype filepath
content
```

MOST IMPORTANT: Do not write "existing code here" or similar placeholders. If a file has been edited in anyway,
EVERY original unchanged line must be rewritten in your output
__________________
Role: assistant
Content: Let me plan out the implementation:

1. First, I'll create chapter2.js in src/logic/content:
- Structure it following the story's scenes: Aftermath, Into the Depths, Betrayal Unveiled, Temporal Rift
- Each scene will have appropriate beats with dialog, narration and choices
- Ensure every dialog has a variation specified
- Mark off-screen dialog with noSpeakerSprite

2. Edit chapter1.js:
- Modify the 'embrace' and 'reject' beats to lead to chapter2 instead of gameOver
- Keep all other content exactly the same

3. Update storyContent.js:
- Add chapter2 to the chapters object
- Keep chapter1 reference

4. Add new characters to gameData.js:
- Luna
- Elder
- Voice1
- Voice2
- Keep all existing characters

5. Update assetManifest.js:
- Add new character sprites: luna, elder, voice1, voice2
- Add new location: facility, streets, sanctuary
- Keep all existing sprites
- Maintain same dimensions for all assets

Now I'll write out each file:

```js src/logic/content/chapter2.js
export default {
  scenes: {
    aftermath: {
      location: 'symbolChamber',
      beats: {
        initial: {
          lines: [
            {
              type: 'narration',
              text: 'Alex stands amidst a swirling vortex of energy.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'Did I just... stop time?'
            },
            {
              type: 'narration',
              text: 'A soft laugh emanates from behind.'
            },
            {
              type: 'dialog',
              speaker: 'luna',
              variation: 'neutral',
              text: "Impressive, isn't it?"
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: 'Who are you now?'
            },
            {
              type: 'dialog',
              speaker: 'luna',
              variation: 'neutral',
              text: "Names Luna. I've been watching you."
            }
          ],
          next: {
            chapter: 'chapter2',
            scene: 'aftermath',
            beat: 'strangerOffer'
          }
        },
        strangerOffer: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: "Watching me? That's not creepy at all."
            },
            {
              type: 'dialog',
              speaker: 'luna',
              variation: 'neutral',
              text: "There's much you don't understand. But I can help."
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: 'Why should I trust you?'
            },
            {
              type: 'dialog',
              speaker: 'luna',
              variation: 'neutral',
              text: 'Because we share the same gift.'
            },
            {
              type: 'choice',
              text: 'What should Alex do?',
              options: [
                {
                  text: 'Agree to go with Luna',
                  next: {
                    chapter: 'chapter2',
                    scene: 'aftermath',
                    beat: 'agreeWithLuna'
                  }
                },
                {
                  text: 'Decline and go alone',
                  next: {
                    chapter: 'chapter2',
                    scene: 'aftermath',
                    beat: 'decline'
                  }
                }
              ]
            }
          ]
        },
        agreeWithLuna: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: "Alright. I'm in."
            },
            {
              type: 'dialog',
              speaker: 'luna',
              variation: 'happy',
              text: 'Excellent. Follow me.'
            },
            {
              type: 'narration',
              text: 'They walk together into a shimmering portal.'
            }
          ],
          next: {
            chapter: 'chapter2',
            scene: 'depths',
            beat: 'withLuna'
          }
        },
        decline: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: "I think I'll figure this out myself."
            },
            {
              type: 'dialog',
              speaker: 'luna',
              variation: 'neutral',
              text: 'Very well. The offer stands if you change your mind.'
            },
            {
              type: 'narration',
              text: 'Luna disappears, leaving Alex alone.'
            }
          ],
          next: {
            chapter: 'chapter2',
            scene: 'depths',
            beat: 'alone'
          }
        }
      }
    },
    depths: {
      location: 'sanctuary',
      beats: {
        withLuna: {
          lines: [
            {
              type: 'narration',
              text: 'They arrive at an underground facility filled with others.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'What is this place?'
            },
            {
              type: 'dialog',
              speaker: 'luna',
              variation: 'neutral',
              text: 'Our sanctuary. A place for people like us.'
            },
            {
              type: 'dialog',
              speaker: 'elder',
              variation: 'neutral',
              text: "Welcome, Alex. We've been expecting you."
            }
          ],
          next: {
            chapter: 'chapter2',
            scene: 'depths',
            beat: 'mission'
          }
        },
        alone: {
          lines: [
            {
              type: 'narration',
              text: 'Alex wanders the streets, time glitches occur around them.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: 'These anomalies... What is causing them?'
            },
            {
              type: 'narration',
              text: 'An old newspaper catches their eye, mentioning time distortions.'
            }
          ],
          next: {
            chapter: 'chapter2',
            scene: 'depths',
            beat: 'mission'
          }
        },
        mission: {
          lines: [
            {
              type: 'dialog',
              speaker: 'elder',
              variation: 'neutral',
              text: 'We need your help to restore balance.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: 'Why me?'
            },
            {
              type: 'dialog',
              speaker: 'elder',
              variation: 'neutral',
              text: 'You have the potential to change everything.'
            },
            {
              type: 'choice',
              text: 'What should Alex do?',
              options: [
                {
                  text: 'Accept the mission',
                  next: {
                    chapter: 'chapter2',
                    scene: 'depths',
                    beat: 'acceptMission'
                  }
                },
                {
                  text: 'Decline and leave',
                  next: {
                    chapter: 'chapter2',
                    scene: 'depths',
                    beat: 'declineMission'
                  }
                }
              ]
            }
          ]
        },
        acceptMission: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: 'If I can help, I will.'
            },
            {
              type: 'dialog',
              speaker: 'elder',
              variation: 'happy',
              text: 'Your courage is commendable.'
            }
          ],
          next: {
            chapter: 'chapter2',
            scene: 'betrayal',
            beat: 'discovery'
          }
        },
        declineMission: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: "I didn't sign up for this."
            },
            {
              type: 'dialog',
              speaker: 'elder',
              variation: 'neutral',
              text: 'Destiny has a way of catching up.'
            }
          ],
          next: {
            chapter: 'chapter2',
            scene: 'betrayal',
            beat: 'discovery'
          }
        }
      }
    },
    betrayal: {
      location: 'facility',
      beats: {
        discovery: {
          lines: [
            {
              type: 'narration',
              text: 'As Alex delves deeper, they overhear a clandestine conversation.'
            },
            {
              type: 'dialog',
              speaker: 'voice1',
              variation: 'neutral',
              noSpeakerSprite: true,
              text: 'Tonight, we turn the tide.'
            },
            {
              type: 'dialog',
              speaker: 'voice2',
              variation: 'neutral',
              noSpeakerSprite: true,
              text: 'They suspect nothing.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: 'What are they plotting?'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: 'I need to tell someone... but who can I trust?'
            },
            {
              type: 'choice',
              text: 'What should Alex do?',
              options: [
                {
                  text: 'Expose the conspiracy',
                  next: {
                    chapter: 'chapter2',
                    scene: 'betrayal',
                    beat: 'expose'
                  }
                },
                {
                  text: 'Keep it to themselves for now',
                  next: {
                    chapter: 'chapter2',
                    scene: 'betrayal',
                    beat: 'conceal'
                  }
                }
              ]
            }
          ]
        },
        expose: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'urgent',
              text: "There's a plot against us!"
            },
            {
              type: 'dialog',
              speaker: 'luna',
              variation: 'surprised',
              text: 'This is grave news.'
            },
            {
              type: 'dialog',
              speaker: 'elder',
              variation: 'neutral',
              text: 'We must act immediately.'
            }
          ],
          next: {
            chapter: 'chapter2',
            scene: 'rift',
            beat: 'beginning'
          }
        },
        conceal: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: 'I need more proof before I accuse anyone.'
            },
            {
              type: 'narration',
              text: 'They decide to investigate further.'
            }
          ],
          next: {
            chapter: 'chapter2',
            scene: 'rift',
            beat: 'beginning'
          }
        }
      }
    },
    rift: {
      location: 'streets',
      beats: {
        beginning: {
          lines: [
            {
              type: 'narration',
              text: 'The sky cracks open, revealing a swirling rift.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'What is that?!'
            },
            {
              type: 'dialog',
              speaker: 'luna',
              variation: 'neutral',
              text: "The temporal rift. It's worse than we feared."
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: 'How do we stop it?'
            },
            {
              type: 'dialog',
              speaker: 'luna',
              variation: 'neutral',
              text: 'We have to face it head-on.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: 'Or find another way.'
            },
            {
              type: 'choice',
              text: 'What should Alex do?',
              options: [
                {
                  text: 'Confront the rift',
                  next: {
                    chapter: 'chapter2',
                    scene: 'rift',
                    beat: 'confront'
                  }
                },
                {
                  text: 'Escape to safety',
                  next: {
                    chapter: 'chapter2',
                    scene: 'rift',
                    beat: 'escape'
                  }
                }
              ]
            }
          ]
        },
        confront: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'determined',
              text: "I'm not running away. Let's end this."
            },
            {
              type: 'dialog',
              speaker: 'luna',
              variation: 'neutral',
              text: 'Together, then.'
            },
            {
              type: 'narration',
              text: 'They prepare to enter the rift.'
            }
          ],
          next: {
            isGameOver: true
          }
        },
        escape: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: 'We need to regroup. This is too big.'
            },
            {
              type: 'dialog',
              speaker: 'luna',
              variation: 'neutral',
              text: 'Time may not be on our side.'
            },
            {
              type: 'narration',
              text: 'They retreat as the rift expands.'
            }
          ],
          next: {
            isGameOver: true
          }
        }
      }
    }
  }
}
```

```js src/logic/content/chapter1.js
export default {
  scenes: {
    void: {
      location: 'darkChamber',
      beats: {
        awakening: {
          lines: [
            {
              type: 'narration',
              text: 'Darkness envelops everything. A faint dripping sound echoes in the distance. Alex awakens on a cold, hard floor.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: 'Ugh... my head. Where am I?'
            },
            {
              type: 'narration',
              text: 'A soft whisper brushes past their ear.'
            },
            {
              type: 'dialog',
              speaker: 'whisper',
              variation: 'neutral',
              noSpeakerSprite: true,
              text: 'Awaken...'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: "Who's there? Show yourself!"
            },
            {
              type: 'narration',
              text: 'Silence. Alex strains their eyes but sees nothing.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: 'Great. Just great. Lost in the dark with voices. Think, Alex, think.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'void',
            beat: 'echoes'
          }
        },
        echoes: {
          lines: [
            {
              type: 'narration',
              text: 'Alex feels around, their hands sliding over damp walls.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: 'Feels like stone. Maybe an old building?'
            },
            {
              type: 'narration',
              text: 'A faint light flickers to the left; a distant sound echoes to the right.'
            },
            {
              type: 'choice',
              text: 'Which way should Alex go?',
              options: [
                {
                  text: 'Follow the faint light',
                  next: {
                    chapter: 'chapter1',
                    scene: 'void',
                    beat: 'followLight'
                  }
                },
                {
                  text: 'Follow the distant sound',
                  next: {
                    chapter: 'chapter1',
                    scene: 'void',
                    beat: 'followSound'
                  }
                }
              ]
            }
          ]
        },
        followLight: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: "Light means a way out. Let's hope that's true."
            },
            {
              type: 'narration',
              text: 'They move cautiously towards the flickering glow.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'fork',
            beat: 'lightPath'
          }
        },
        followSound: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: 'Maybe that sound is someone who can help.'
            },
            {
              type: 'narration',
              text: 'They head towards the sound, footsteps echoing.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'fork',
            beat: 'soundPath'
          }
        }
      }
    },
    fork: {
      location: 'symbolChamber',
      beats: {
        lightPath: {
          lines: [
            {
              type: 'narration',
              text: 'Alex enters a chamber illuminated by strange symbols.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'What is this place?'
            },
            {
              type: 'narration',
              text: 'A figure steps out of the shadows.'
            },
            {
              type: 'dialog',
              speaker: 'mysteriousFigure',
              variation: 'neutral',
              text: "You've finally arrived."
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'Who are you?'
            },
            {
              type: 'dialog',
              speaker: 'mysteriousFigure',
              variation: 'neutral',
              text: 'A friend. Perhaps more.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'fork',
            beat: 'trustOrDoubt'
          }
        },
        soundPath: {
          lines: [
            {
              type: 'narration',
              text: 'Alex finds themselves in a corridor with flickering lights. A radio crackles nearby.'
            },
            {
              type: 'dialog',
              speaker: 'radioVoice',
              variation: 'neutral',
              noSpeakerSprite: true,
              text: 'Is someone there?'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: "Yes! I'm here! Who is this?"
            },
            {
              type: 'dialog',
              speaker: 'radioVoice',
              variation: 'neutral',
              noSpeakerSprite: true,
              text: 'Help is on the way. Trust no one.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'Wait, what do you mean?'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'fork',
            beat: 'trustOrDoubt'
          }
        },
        trustOrDoubt: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: "This is getting weirder by the minute."
            },
            {
              type: 'narration',
              text: 'Footsteps approach.'
            },
            {
              type: 'dialog',
              speaker: 'stranger',
              variation: 'neutral',
              text: 'You look lost.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: "That's an understatement."
            },
            {
              type: 'dialog',
              speaker: 'stranger',
              variation: 'neutral',
              text: 'Come with me. I can help.'
            },
            {
              type: 'choice',
              text: 'What should Alex do?',
              options: [
                {
                  text: 'Trust the stranger and follow them',
                  next: {
                    chapter: 'chapter1',
                    scene: 'fork',
                    beat: 'trust'
                  }
                },
                {
                  text: 'Doubt their intentions and stay back',
                  next: {
                    chapter: 'chapter1',
                    scene: 'fork',
                    beat: 'doubt'
                  }
                }
              ]
            }
          ]
        },
        trust: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: 'Alright. Lead the way.'
            },
            {
              type: 'dialog',
              speaker: 'stranger',
              variation: 'neutral',
              text: 'Wise decision.'
            },
            {
              type: 'narration',
              text: 'They walk together down a dimly lit hallway.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'shadows',
            beat: 'exploration'
          }
        },
        doubt: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'neutral',
              text: "I think I'll manage on my own."
            },
            {
              type: 'dialog',
              speaker: 'stranger',
              variation: 'neutral',
              text: "Suit yourself. Don't say I didn't warn you."
            },
            {
              type: 'narration',
              text: 'The stranger fades into the darkness.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'shadows',
            beat: 'exploration'
          }
        }
      }
    },
    shadows: {
      location: 'corridor',
      beats: {
        exploration: {
          lines: [
            {
              type: 'narration',
              text: 'Alone, Alex continues exploring.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: "Maybe I should've gone with them."
            },
            {
              type: 'narration',
              text: 'They stumble upon a wall covered in drawings.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'thinking',
              text: 'These symbols... why do they feel familiar?'
            },
            {
              type: 'narration',
              text: 'A sudden pain flashes in their head.'
            },
            {
              type: 'dialog',
              speaker: 'whisper',
              variation: 'neutral',
              noSpeakerSprite: true,
              text: 'Remember...'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'Ah! What was that?'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'shadows',
            beat: 'fightOrFlight'
          }
        },
        fightOrFlight: {
          lines: [
            {
              type: 'narration',
              text: 'A shadowy figure emerges behind them.'
            },
            {
              type: 'dialog',
              speaker: 'shadowyFigure',
              variation: 'neutral',
              text: "You shouldn't be here."
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'Who are you?'
            },
            {
              type: 'dialog',
              speaker: 'shadowyFigure',
              variation: 'neutral',
              text: 'Your end.'
            },
            {
              type: 'choice',
              text: 'What should Alex do?',
              options: [
                {
                  text: 'Stand and fight',
                  next: {
                    chapter: 'chapter1',
                    scene: 'shadows',
                    beat: 'fight'
                  }
                },
                {
                  text: 'Run away',
                  next: {
                    chapter: 'chapter1',
                    scene: 'shadows',
                    beat: 'flee'
                  }
                }
              ]
            }
          ]
        },
        fight: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'angry',
              text: "I'm not afraid of you!"
            },
            {
              type: 'narration',
              text: 'They clench their fists, ready to defend themselves.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'awakening',
            beat: 'timeStop'
          }
        },
        flee: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'Nope! Not dealing with this!'
            },
            {
              type: 'narration',
              text: 'Alex turns and sprints down the corridor.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'awakening',
            beat: 'timeStop'
          }
        }
      }
    },
    awakening: {
      location: 'symbolChamber',
      beats: {
        timeStop: {
          lines: [
            {
              type: 'narration',
              text: 'Regardless of the choice, the ground trembles. Time seems to slow.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: "What's happening?"
            },
            {
              type: 'narration',
              text: 'Objects around them float as if suspended.'
            },
            {
              type: 'dialog',
              speaker: 'mysteriousFigure',
              variation: 'neutral',
              text: "It's awakening within you."
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'What is?'
            },
            {
              type: 'dialog',
              speaker: 'mysteriousFigure',
              variation: 'neutral',
              text: 'Your true power.'
            }
          ],
          next: {
            chapter: 'chapter1',
            scene: 'awakening',
            beat: 'finalChoice'
          }
        },
        finalChoice: {
          lines: [
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: 'My... power?'
            },
            {
              type: 'dialog',
              speaker: 'mysteriousFigure',
              variation: 'neutral',
              text: 'Yes. The ability to manipulate time itself.'
            },
            {
              type: 'dialog',
              speaker: 'alex',
              variation: 'surprised',
              text: "This can't be real."
            },
            {
              type: 'choice',
              text: 'What should Alex do?',
              options: [
                {
                  text: 'Embrace the power',
                  next: {
                    chapter: 'chapter2',
                    scene: 'aftermath',
                    beat: 'initial'
                  }
                },
                {
                  text: 'Reject the power',
                  next: {
                    chapter: 'chapter2',
                    scene: 'aftermath',
                    beat: 'initial'
                  }
                }
              ]
            }
          ]
        }
      }
    }
  }
}
```

```js src/logic/storyContent.js
import chapter1 from './content/chapter1';
import chapter2 from './content/chapter2';

export const STORY_CONTENT = {
  chapters: {
    chapter1,
    chapter2
  }
}
```

```js src/logic/gameData.js
export const CHARACTERS = {
  alex: {
    prototypeId: 'alex',
    name: 'Alex',
    spriteId: 'alex'
  },
  mysteriousFigure: {
    prototypeId: 'mysteriousFigure',
    name: 'Mysterious Figure',
    spriteId: 'mysteriousFigure'
  },
  stranger: {
    prototypeId: 'stranger',
    name: 'Stranger',
    spriteId: 'stranger'
  },
  shadowyFigure: {
    prototypeId: 'shadowyFigure',
    name: 'Shadowy Figure',
    spriteId: 'shadowyFigure'
  },
  whisper: {
    prototypeId: 'whisper',
    name: 'Whisper',
    spriteId: 'whisper'
  },
  radioVoice: {
    prototypeId: 'radioVoice',
    name: 'Radio Voice',
    spriteId: 'radioVoice'
  },
  luna: {
    prototypeId: 'luna',
    name: 'Luna',
    spriteId: 'luna'
  },
  elder: {
    prototypeId: 'elder',
    name: 'Elder',
    spriteId: 'elder'
  },
  voice1: {
    prototypeId: 'voice1',
    name: 'Voice 1',
    spriteId: 'voice1'
  },
  voice2: {
    prototypeId: 'voice2',
    name: 'Voice 2',
    spriteId: 'voice2'
  }
}

export const LOCATIONS = {
  darkChamber: {
    prototypeId: 'darkChamber',
    name: 'Dark Chamber',
    spriteId: 'darkChamber'
  },
  symbolChamber: {
    prototypeId: 'symbolChamber',
    name: 'Symbol Chamber',
    spriteId: 'symbolChamber'
  },
  corridor: {
    prototypeId: 'corridor',
    name: 'Corridor',
    spriteId: 'corridor'
  },
  facility: {
    prototypeId: 'facility',
    name: 'Facility',
    spriteId: 'facility'
  },
  sanctuary: {
    prototypeId: 'sanctuary',
    name: 'Sanctuary',
    spriteId: 'sanctuary'
  },
  streets: {
    prototypeId: 'streets',
    name: 'Streets',
    spriteId: 'streets'
  }
}
```

```js src/logic/assetManifest.js
export const SPRITES = {
  "alex": {
    srcs: "assets/characters/alex-{variation}.png",
    variations: ['neutral', 'happy', 'sad', 'embarrassed', 'crying', 'surprised', 'angry', 'thinking'],
    width: 416,
    height: 624
  },
  "mysteriousFigure": {
    srcs: "assets/characters/mysteriousFigure-{variation}.png",
    variations: ['neutral', 'happy', 'sad', 'embarrassed', 'crying', 'surprised', 'angry', 'thinking'],
    width: 416,
    height: 624
  },
  "stranger": {
    srcs: "assets/characters/stranger-{variation}.png",
    variations: ['neutral', 'happy', 'sad', 'embarrassed', 'crying', 'surprised', 'angry', 'thinking'],
    width: 416,
    height: 624
  },
  "shadowyFigure": {
    srcs: "assets/characters/shadowyFigure-{variation}.png",
    variations: ['neutral', 'happy', 'sad', 'embarrassed', 'crying', 'surprised', 'angry', 'thinking'],
    width: 416,
    height: 624
  },
  "luna": {
    srcs: "assets/characters/luna-{variation}.png",
    variations: ['neutral', 'happy', 'sad', 'embarrassed', 'crying', 'surprised', 'angry', 'thinking'],
    width: 416,
    height: 624
  },
  "elder": {
    srcs: "assets/characters/elder-{variation}.png",
    variations: ['neutral', 'happy', 'sad', 'embarrassed', 'crying', 'surprised', 'angry', 'thinking'],
    width: 416,
    height: 624
  },
  "voice1": {
    srcs: "assets/characters/voice1-{variation}.png",
    variations: ['neutral', 'happy', 'sad', 'embarrassed', 'crying', 'surprised', 'angry', 'thinking'],
    width: 416,
    height: 624
  },
  "voice2": {
    srcs: "assets/characters/voice2-{variation}.png",
    variations: ['neutral', 'happy', 'sad', 'embarrassed', 'crying', 'surprised', 'angry', 'thinking'],
    width: 416,
    height: 624
  },
  "darkChamber": {
    srcs: "assets/locations/darkChamber.png",
    width: 1216,
    height: 960
  },
  "symbolChamber": {
    srcs: "assets/locations/symbolChamber.png",
    width: 1216,
    height: 960
  },
  "corridor": {
    srcs: "assets/locations/corridor.png",
    width: 1216,
    height: 960
  },
  "facility": {
    srcs: "assets/locations/facility.png",
    width: 1216,
    height: 960
  },
  "sanctuary": {
    srcs: "assets/locations/sanctuary.png",
    width: 1216,
    height: 960
  },
  "streets": {
    srcs: "assets/locations/streets.png",
    width: 1216,
    height: 960
  }
}
```
__________________
