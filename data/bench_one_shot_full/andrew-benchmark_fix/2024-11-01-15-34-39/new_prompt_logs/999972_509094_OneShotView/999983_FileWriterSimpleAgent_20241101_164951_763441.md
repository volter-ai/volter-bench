Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: 
## Proposed Code Change
Based on the image and the error message, I can identify the following issues:

1. The main problem is that the UI simulator timed out after 120 seconds, which suggests that the game is not progressing or updating as expected.

2. The image shows that no actions are available at the moment, and the game is waiting for a state update. This indicates that the game is stuck in a state where no choices are being presented to the player.

3. The battlefield and creature cards are displayed correctly, but the lack of action buttons is preventing the game from progressing.

Proposed solution:

1. We need to ensure that the `availableButtonSlugs` array is being properly populated with the player's creature's skills.

2. We should add a fallback mechanism to display a "Wait" button when there are no available actions, allowing the game to progress even when waiting for opponent actions.

3. We should add some debug logging to help identify why the `availableButtonSlugs` might be empty.

Here's the implementation of the proposed solution:

# Excerpt ID: b96648eb-4d61-4fd0-8958-5ef4ede56338
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { CreatureCard } from "@/components/ui/custom/creature/creature_card";
import { SkillButton } from "@/components/ui/custom/skill/skill_button";
import { User, UserMinus } from 'lucide-react';

interface Skill {
  __type: "Skill";
  stats: {
    base_damage: number;
  };
  uid: string;
  display_name: string;
  description: string;
}

interface Creature {
  __type: "Creature";
  stats: {
    hp: number;
    max_hp: number;
    attack: number;
    defense: number;
    speed: number;
  };
  uid: string;
  display_name: string;
  description: string;
  collections: {
    skills: Skill[];
  };
  image_url: string;
}

interface Player {
  __type: "Player";
  uid: string;
  display_name: string;
  description: string;
  collections: {
    creatures: Creature[];
  };
}

interface GameUIData {
  entities: {
    player: Player;
    opponent: Player;
    player_creature: Creature;
    opponent_creature: Creature;
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons();

  const { player_creature, opponent_creature } = props.data.entities;

  // Debug logging
  console.log("Available button slugs:", availableButtonSlugs);
  console.log("Player creature skills:", player_creature.collections.skills);

  return (
    <div className="w-full h-full flex flex-col bg-gray-100">
      {/* HUD */}
      <nav className="bg-blue-600 text-white p-2">
        <h1 className="text-xl font-bold">Creature Battle</h1>
      </nav>

      {/* Battlefield */}
      <div className="flex-grow flex justify-between items-center p-4">
        <div className="flex flex-col items-center">
          <User className="w-8 h-8 mb-2 text-green-500" />
          <CreatureCard
            uid={player_creature.uid}
            name={player_creature.display_name}
            imageUrl={player_creature.image_url}
            hp={player_creature.stats.hp}
            maxHp={player_creature.stats.max_hp}
            className="transform scale-75 sm:scale-100"
          />
        </div>
        <div className="flex flex-col items-center">
          <UserMinus className="w-8 h-8 mb-2 text-red-500" />
          <CreatureCard
            uid={opponent_creature.uid}
            name={opponent_creature.display_name}
            imageUrl={opponent_creature.image_url}
            hp={opponent_creature.stats.hp}
            maxHp={opponent_creature.stats.max_hp}
            className="transform scale-75 sm:scale-100"
          />
        </div>
      </div>

      {/* User Interface */}
      <div className="bg-white border-t-2 border-gray-200 p-4 h-1/3">
        {availableButtonSlugs.length > 0 ? (
          <div className="grid grid-cols-2 gap-4">
            {availableButtonSlugs.map((slug) => {
              const skill = player_creature.collections.skills.find(s => s.uid === slug);
              if (skill) {
                return (
                  <SkillButton
                    key={skill.uid}
                    uid={skill.uid}
                    skillName={skill.display_name}
                    description={skill.description}
                    stats={`Damage: ${skill.stats.base_damage}`}
                    onClick={() => emitButtonClick(slug)}
                  />
                );
              }
              return null;
            })}
          </div>
        ) : (
          <div className="bg-gray-100 p-4 rounded-lg h-full overflow-y-auto flex flex-col justify-between">
            <p className="text-gray-700">
              No actions available at the moment. Waiting for game state update...
            </p>
            <button
              className="bg-blue-500 text-white px-4 py-2 rounded mt-4"
              onClick={() => emitButtonClick("wait")}
            >
              Wait
            </button>
          </div>
        )}
      </div>
    </div>
  );
}
```

Changes made:

1. Added debug logging to help identify why `availableButtonSlugs` might be empty.
2. Added a "Wait" button when there are no available actions. This button emits a "wait" slug, which should be handled by the game logic to progress the game state.
3. Kept the existing logic for displaying skill buttons when they are available.

These changes should help prevent the game from getting stuck in a state where no actions are available, allowing the UI simulator to progress and avoiding the timeout error.

## Directions
Reply with a JSON list of actions to perform. 'overwrite' are the only valid action type. 
Make sure you are using the excerpt_id which contains the entire contents of the file

Examples:
overwriting files (this works for python, markdown, or any other file type)
```json output_example1
[{"action": "overwrite", "excerpt_id": "<id>", "file_path": "<relative file path>"}]
```

__________________
Role: assistant
Content: ```json
[{"action": "overwrite", "excerpt_id": "b96648eb-4d61-4fd0-8958-5ef4ede56338", "file_path": "main_game/templates/MainGameScene.tsx"}]
```
__________________
