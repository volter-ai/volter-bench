Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: 
## Proposed Code Change
After analyzing the image and the provided code, I can identify several issues that may be causing the timeout error:

1. The layout of the battlefield doesn't match the design document. The player and opponent creatures are not in the correct positions.
2. The skill buttons are not properly mapped to the available skills of the player's creature.
3. The swap button is not correctly implemented.
4. The UI is not responsive, which may cause elements to be pushed off-screen or overlap.

Here's a proposed solution to resolve these issues:

1. Rearrange the battlefield layout to match the design document.
2. Correctly map the skill buttons to the player creature's skills.
3. Implement the swap button correctly using the available button slugs.
4. Improve the responsiveness of the UI.

Now, let's implement these changes:

# Excerpt ID: 333df246-7633-4395-a0a6-f79f43b20cfb
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Sword, RefreshCw } from 'lucide-react'
import { CreatureCard } from "@/components/ui/custom/creature/creature_card";
import { SkillButton } from "@/components/ui/custom/skill/skill_button";
import { PlayerCard } from "@/components/ui/custom/player/player_card";

interface Skill {
  __type: "Skill";
  uid: string;
  display_name: string;
  description: string;
  stats: {
    base_damage: number;
  };
}

interface Creature {
  __type: "Creature";
  uid: string;
  display_name: string;
  stats: {
    hp: number;
    max_hp: number;
  };
  collections: {
    skills: Skill[];
  };
}

interface Player {
  __type: "Player";
  uid: string;
  display_name: string;
  entities: {
    active_creature: Creature;
  };
}

interface GameUIData {
  entities: {
    player: Player;
    opponent: Player;
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons()

  const player = props.data.entities.player;
  const opponent = props.data.entities.opponent;
  const playerCreature = player?.entities.active_creature;
  const opponentCreature = opponent?.entities.active_creature;

  return (
    <div className="w-full h-full flex flex-col" style={{ aspectRatio: '16/9' }}>
      {/* Battlefield Display */}
      <div className="flex-grow grid grid-cols-2 grid-rows-2 gap-4 p-4">
        {/* Opponent Status */}
        <div className="flex justify-start items-start">
          {opponentCreature && (
            <CreatureCard
              uid={opponentCreature.uid}
              name={opponentCreature.display_name}
              image="/placeholder-opponent-creature.png"
              hp={opponentCreature.stats.hp}
              maxHp={opponentCreature.stats.max_hp}
            />
          )}
        </div>

        {/* Opponent Creature */}
        <div className="flex justify-end items-start">
          {opponent && (
            <PlayerCard
              uid={opponent.uid}
              playerName={opponent.display_name}
              imageUrl="/placeholder-opponent.png"
            />
          )}
        </div>

        {/* Player Creature */}
        <div className="flex justify-start items-end">
          {player && (
            <PlayerCard
              uid={player.uid}
              playerName={player.display_name}
              imageUrl="/placeholder-player.png"
            />
          )}
        </div>

        {/* Player Status */}
        <div className="flex justify-end items-end">
          {playerCreature && (
            <CreatureCard
              uid={playerCreature.uid}
              name={playerCreature.display_name}
              image="/placeholder-player-creature.png"
              hp={playerCreature.stats.hp}
              maxHp={playerCreature.stats.max_hp}
            />
          )}
        </div>
      </div>

      {/* User Interface */}
      <div className="h-1/3 bg-gray-100 p-4">
        <div className="grid grid-cols-2 grid-rows-2 gap-4">
          {playerCreature?.collections.skills.map((skill, index) => (
            <SkillButton
              key={skill.uid}
              uid={skill.uid}
              skillName={skill.display_name}
              description={skill.description}
              stats={`Damage: ${skill.stats.base_damage}`}
              onClick={() => availableButtonSlugs.includes('attack') && emitButtonClick('attack')}
            >
              <Sword className="mr-2 h-4 w-4" /> {skill.display_name}
            </SkillButton>
          ))}
          {availableButtonSlugs.includes('swap') && (
            <SkillButton
              uid="swap-action"
              skillName="Swap"
              description="Swap your active creature"
              stats="Cost: 1 turn"
              onClick={() => emitButtonClick('swap')}
            >
              <RefreshCw className="mr-2 h-4 w-4" /> Swap
            </SkillButton>
          )}
        </div>
      </div>
    </div>
  );
}
```

These changes address the issues as follows:

1. The battlefield layout has been corrected to match the design document.
2. The skill buttons are now correctly mapped to the player creature's skills.
3. The swap button is implemented correctly using the available button slugs.
4. The UI responsiveness has been improved by using flex and grid layouts consistently.

These changes should resolve the timeout error by ensuring that all elements are visible and interactive as expected.

## Directions
Reply with a JSON list of actions to perform. 'overwrite' are the only valid action type. 
Make sure you are using the excerpt_id which contains the entire contents of the file

Examples:
overwriting files (this works for python, markdown, or any other file type)
```json output_example1
[{"action": "overwrite", "excerpt_id": "<id>", "file_path": "<relative file path>"}]
```

__________________
Role: assistant
Content: ```json
[{"action": "overwrite", "excerpt_id": "333df246-7633-4395-a0a6-f79f43b20cfb", "file_path": "main_game/templates/MainGameScene.tsx"}]
```
__________________
