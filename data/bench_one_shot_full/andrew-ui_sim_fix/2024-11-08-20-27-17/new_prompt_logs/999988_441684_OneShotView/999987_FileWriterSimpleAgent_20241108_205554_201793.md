Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and propose a solution.

**Issue Description:**
Looking at the image and error, there appear to be several problems:
1. The skill buttons are not properly handling click events - the timeout error suggests the game events aren't being triggered
2. The SkillButton component is rendered but not properly connected to the emitButtonClick function
3. The UI simulator is timing out because it can't detect any successful interactions with the buttons

**Proposed Solution:**
1. Add onClick handlers to the SkillButton components that use emitButtonClick
2. Ensure the skill buttons are properly enabled/disabled based on availableButtonSlugs
3. Add proper click handling that emits the skill's uid as a button slug

Here's the corrected code:

# Excerpt ID: 15eb106f-8610-4d04-a0ce-9abaea4a8b74
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Sword, Shield } from 'lucide-react'
import { CreatureCard } from "@/components/ui/custom/creature/creature_card"
import { PlayerCard } from "@/components/ui/custom/player/player_card"
import { SkillButton } from "@/components/ui/custom/skill/skill_button"

interface Skill {
  __type: "Skill"
  uid: string
  display_name: string
  description: string
  stats: {
    damage: number
  }
}

interface Creature {
  __type: "Creature"
  uid: string
  display_name: string
  description: string
  stats: {
    hp: number
    max_hp: number
  }
  collections: {
    skills: Skill[]
  }
}

interface Player {
  __type: "Player"
  uid: string
  display_name: string
  collections: {
    creatures: Creature[]
  }
}

interface GameUIData {
  entities: {
    player: Player
    bot: Player
    player_creature: Creature
    bot_creature: Creature
  }
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons()

  // Safely access entities with type checking
  const playerCreature = props.data?.entities?.player_creature
  const botCreature = props.data?.entities?.bot_creature
  const player = props.data?.entities?.player
  
  if (!playerCreature || playerCreature.__type !== "Creature" ||
      !botCreature || botCreature.__type !== "Creature" ||
      !player || player.__type !== "Player") {
    return <div className="h-screen w-full flex items-center justify-center">
      Loading game data...
    </div>
  }

  const handleSkillClick = (skillUid: string) => {
    if (availableButtonSlugs.includes(skillUid)) {
      emitButtonClick(skillUid)
    }
  }

  return (
    <div className="h-screen w-full flex flex-col">
      <nav className="h-16 bg-primary/10 flex items-center justify-between px-4">
        {player.__type === "Player" && (
          <PlayerCard
            uid={player.uid}
            name={player.display_name}
            imageUrl="/player.png"
          />
        )}
        <div className="flex items-center gap-4">
          <Sword className="w-6 h-6" />
          <Shield className="w-6 h-6" />
        </div>
      </nav>

      <main className="flex-grow flex items-center justify-between px-8">
        <div className="flex flex-col items-center gap-4">
          <span className="text-lg font-bold">Your Creature</span>
          {playerCreature.__type === "Creature" && (
            <CreatureCard
              uid={playerCreature.uid}
              name={playerCreature.display_name}
              hp={playerCreature.stats.hp}
              maxHp={playerCreature.stats.max_hp}
              imageUrl="/creature.png"
            />
          )}
        </div>

        <div className="flex flex-col items-center gap-4">
          <span className="text-lg font-bold">Opponent's Creature</span>
          {botCreature.__type === "Creature" && (
            <CreatureCard
              uid={botCreature.uid}
              name={botCreature.display_name}
              hp={botCreature.stats.hp}
              maxHp={botCreature.stats.max_hp}
              imageUrl="/creature.png"
            />
          )}
        </div>
      </main>

      <section className="h-1/3 bg-secondary/10 p-4 flex flex-col gap-4">
        <div className="flex flex-wrap gap-4 justify-center">
          {playerCreature.collections?.skills?.map((skill) => 
            skill.__type === "Skill" ? (
              <SkillButton
                key={skill.uid}
                uid={skill.uid}
                name={skill.display_name}
                description={skill.description}
                stats={`Damage: ${skill.stats.damage}`}
                disabled={!availableButtonSlugs.includes(skill.uid)}
                onClick={() => handleSkillClick(skill.uid)}
              />
            ) : null
          )}
        </div>
      </section>
    </div>
  )
}
```

Key changes made:
1. Added handleSkillClick function to properly handle skill button clicks
2. Connected the SkillButton component to the click handler via onClick prop
3. Maintained proper typing and checking throughout
4. Ensured buttons are properly disabled when not in availableButtonSlugs

These changes should resolve the timeout issue by properly connecting the UI interactions to the game event system.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
