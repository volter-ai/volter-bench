Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
# Excerpt ID: 9a7cd728-f369-4251-8965-7f202cc4d13f
```tsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Sword, Shield, Zap } from 'lucide-react';
import { CreatureCard } from "@/components/ui/custom/creature/creature_card";
import { SkillButton } from "@/components/ui/custom/skill/skill_button";
import { PlayerCard } from "@/components/ui/custom/player/player_card";

interface Skill {
  __type: "Skill";
  uid: string;
  display_name: string;
  description: string;
  stats: {
    base_damage: number;
    [key: string]: any;
  };
}

interface Creature {
  __type: "Creature";
  uid: string;
  display_name: string;
  description: string;
  meta: {
    prototype_id: string;
  };
  stats: {
    hp: number;
    max_hp: number;
    attack: number;
    defense: number;
    speed: number;
  };
  collections: {
    skills: Skill[];
  };
}

interface Player {
  __type: "Player";
  uid: string;
  display_name: string;
  meta: {
    prototype_id: string;
  };
  collections: {
    creatures: Creature[];
  };
}

interface GameUIData {
  entities: {
    player: Player;
    bot: Player;
    player_creature: Creature;
    bot_creature: Creature;
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons();

  const { player, bot, player_creature, bot_creature } = props.data?.entities || {};

  if (!player || !bot || !player_creature || !bot_creature) {
    return <div className="w-full h-full flex items-center justify-center">
      Loading battle...
    </div>;
  }

  const availableSkills = player_creature.collections.skills.filter(skill => 
    availableButtonSlugs.includes(skill.uid)
  );

  return (
    <div className="w-full h-full flex flex-col">
      {/* HUD */}
      <nav className="h-[10%] bg-slate-800 flex items-center justify-between px-4">
        <PlayerCard
          uid={player.uid}
          name={player.display_name}
          imageUrl={`/players/${player.meta.prototype_id}.png`}
          className="h-full w-auto"
        />
        <PlayerCard
          uid={bot.uid}
          name={bot.display_name}
          imageUrl={`/players/${bot.meta.prototype_id}.png`}
          className="h-full w-auto"
        />
      </nav>

      {/* Battlefield */}
      <div className="h-[60%] flex justify-between items-center px-12 bg-slate-700">
        <div className="relative">
          <CreatureCard
            uid={player_creature.uid}
            name={player_creature.display_name}
            currentHp={player_creature.stats.hp}
            maxHp={player_creature.stats.max_hp}
            imageUrl={`/creatures/${player_creature.meta.prototype_id}.png`}
            className="transform hover:scale-105 transition-transform"
          />
          <div className="absolute -bottom-6 left-1/2 -translate-x-1/2 bg-blue-500 text-white px-3 py-1 rounded-full">
            Player
          </div>
        </div>

        <Zap className="h-12 w-12 text-yellow-400 animate-pulse" />

        <div className="relative">
          <CreatureCard
            uid={bot_creature.uid}
            name={bot_creature.display_name}
            currentHp={bot_creature.stats.hp}
            maxHp={bot_creature.stats.max_hp}
            imageUrl={`/creatures/${bot_creature.meta.prototype_id}.png`}
            className="transform hover:scale-105 transition-transform"
          />
          <div className="absolute -bottom-6 left-1/2 -translate-x-1/2 bg-red-500 text-white px-3 py-1 rounded-full">
            Opponent
          </div>
        </div>
      </div>

      {/* Controls */}
      <div className="h-[30%] bg-slate-800 p-4">
        {availableSkills.length > 0 ? (
          <div className="grid grid-cols-2 gap-4 h-full">
            {availableSkills.map((skill) => (
              <SkillButton
                key={skill.uid}
                uid={skill.uid}
                skillName={skill.display_name}
                description={skill.description}
                stats={skill.stats}
                className="h-full text-lg"
                variant="secondary"
              />
            ))}
          </div>
        ) : (
          <div className="flex items-center justify-center h-full text-gray-400">
            No actions available
          </div>
        )}
      </div>
    </div>
  );
}
```

Changes made:
1. Added PlayerCard components in the HUD
2. Added proper null checks for all entity data
3. Added filtering of skills based on availableButtonSlugs
4. Added proper type for meta.prototype_id in interfaces
5. Added fallback UI when no skills are available
6. Added proper null check for props.data?.entities
7. Improved the animation on the battle indicator (Zap icon)
8. Maintained all proper uid passing to custom components
9. Kept consistent styling and layout
10. Added proper error state handling

All custom components now correctly receive their uid props from the corresponding data objects, and the component properly handles cases where data might be missing or actions might not be available.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
