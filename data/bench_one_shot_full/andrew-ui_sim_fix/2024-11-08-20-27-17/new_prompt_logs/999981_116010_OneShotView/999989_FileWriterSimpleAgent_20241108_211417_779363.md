Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
# Excerpt ID: 8530fa95-0a1c-4b6b-87c8-b2075c1e1333
```tsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Sword, Shield, Zap } from 'lucide-react'
import { CreatureCard } from "@/components/ui/custom/creature/creature_card"
import { PlayerCard } from "@/components/ui/custom/player/player_card"
import { SkillButton } from "@/components/ui/custom/skill/skill_button"

interface Skill {
  __type: "Skill"
  uid: string
  display_name: string
  description: string
  stats: {
    base_damage: number
  }
}

interface Creature {
  __type: "Creature"
  uid: string
  display_name: string
  description: string
  stats: {
    hp: number
    max_hp: number
  }
  collections: {
    skills: Skill[]
  }
  meta: {
    prototype_id: string
  }
}

interface Player {
  __type: "Player"
  uid: string
  display_name: string
  collections: {
    creatures: Creature[]
  }
  meta: {
    prototype_id: string
  }
}

interface GameUIData {
  entities: {
    player?: Player
    bot?: Player
    player_creature?: Creature
    bot_creature?: Creature
  }
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons()

  const { player, bot, player_creature, bot_creature } = props.data.entities

  if (!player || !bot || !player_creature || !bot_creature) {
    return <div className="h-screen w-screen flex items-center justify-center">
      Loading game state...
    </div>
  }

  return (
    <div className="h-screen w-screen flex flex-col bg-background">
      {/* HUD */}
      <div className="w-full p-4 bg-secondary/10 flex justify-between items-center">
        {player && (
          <PlayerCard 
            uid={player.uid}
            name={player.display_name}
            imageUrl={`/players/${player.meta.prototype_id}.png`}
          />
        )}
        {bot && (
          <PlayerCard 
            uid={bot.uid}
            name={bot.display_name}
            imageUrl={`/players/${bot.meta.prototype_id}.png`}
          />
        )}
      </div>

      {/* Battlefield */}
      <div className="flex-1 flex justify-between items-center px-16 py-8">
        {player_creature && (
          <div className="flex flex-col items-center gap-4">
            <CreatureCard
              uid={player_creature.uid}
              name={player_creature.display_name}
              currentHp={player_creature.stats.hp}
              maxHp={player_creature.stats.max_hp}
              imageUrl={`/creatures/${player_creature.meta.prototype_id}.png`}
            />
            <div className="text-sm font-bold text-primary">Your Creature</div>
          </div>
        )}

        {bot_creature && (
          <div className="flex flex-col items-center gap-4">
            <CreatureCard
              uid={bot_creature.uid}
              name={bot_creature.display_name}
              currentHp={bot_creature.stats.hp}
              maxHp={bot_creature.stats.max_hp}
              imageUrl={`/creatures/${bot_creature.meta.prototype_id}.png`}
            />
            <div className="text-sm font-bold text-destructive">Opponent's Creature</div>
          </div>
        )}
      </div>

      {/* Action UI */}
      <div className="w-full p-6 bg-secondary/10">
        <div className="flex flex-wrap gap-4 justify-center">
          {player_creature?.collections?.skills?.map((skill) => (
            <SkillButton
              key={skill.uid}
              uid={skill.uid}
              name={skill.display_name}
              description={skill.description}
              stats={{
                damage: skill.stats.base_damage
              }}
            />
          ))}
        </div>
      </div>
    </div>
  )
}
```

Changes made:
1. Made entity properties optional in GameUIData interface
2. Added proper null checks for all entities
3. Added loading state when critical data is missing
4. Added optional chaining for collections access
5. Made image URLs consistent with prototype_id pattern
6. Added meta interface properties needed for image URLs
7. Added proper null checks in JSX with conditional rendering
8. Maintained all required custom component uid props
9. Kept proper TypeScript typing throughout
10. Maintained existing imports and exports

The code now safely handles:
- Missing or loading data
- Undefined entities
- Empty collections
- All required uid props for custom components
- Proper image URL construction from meta data

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
