Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: 
## Proposed Code Change
Certainly. Here's the corrected code for the MainGameSceneView component:

# Excerpt ID: 87f63a60-f46c-4617-b0e0-65567533dacb
```tsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Sword, Shield, Zap } from 'lucide-react';
import { CreatureCard } from "@/components/ui/custom/creature/creature_card";
import { SkillButton } from "@/components/ui/custom/skill/skill_button";

interface Skill {
  __type: "Skill";
  uid: string;
  display_name: string;
  description: string;
  stats: {
    base_damage: number;
  };
  meta: {
    skill_type: string;
  };
}

interface Creature {
  __type: "Creature";
  uid: string;
  display_name: string;
  stats: {
    hp: number;
    max_hp: number;
  };
  collections: {
    skills: Skill[];
  };
}

interface Player {
  __type: "Player";
  uid: string;
  display_name: string;
}

interface GameUIData {
  entities: {
    player: Player;
    opponent: Player;
    player_creature: Creature;
    opponent_creature: Creature;
  };
  meta: {
    battle_over: boolean;
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons();

  const { player_creature, opponent_creature } = props.data.entities;

  return (
    <div className="w-full h-full flex flex-col" style={{ aspectRatio: '16/9' }}>
      {/* Battlefield Display */}
      <div className="flex-grow grid grid-cols-2 grid-rows-2 gap-4 p-4">
        {/* Top-left: Opponent Status */}
        <div className="flex items-start justify-start">
          <div className="text-lg font-bold">{opponent_creature?.display_name}</div>
        </div>

        {/* Top-right: Opponent Creature */}
        <div className="flex items-start justify-end">
          {opponent_creature && (
            <CreatureCard
              uid={opponent_creature.uid}
              name={opponent_creature.display_name}
              image="/placeholder-opponent.png"
              hp={opponent_creature.stats.hp}
              maxHp={opponent_creature.stats.max_hp}
            />
          )}
        </div>

        {/* Bottom-left: Player Creature */}
        <div className="flex items-end justify-start">
          {player_creature && (
            <CreatureCard
              uid={player_creature.uid}
              name={player_creature.display_name}
              image="/placeholder-player.png"
              hp={player_creature.stats.hp}
              maxHp={player_creature.stats.max_hp}
            />
          )}
        </div>

        {/* Bottom-right: Player Status */}
        <div className="flex items-end justify-end">
          <div className="text-lg font-bold">{player_creature?.display_name}</div>
        </div>
      </div>

      {/* User Interface */}
      <div className="h-1/3 bg-gray-100 p-4">
        {availableButtonSlugs.length > 0 && player_creature?.collections.skills ? (
          <div className="grid grid-cols-2 gap-4">
            {player_creature.collections.skills.map((skill: Skill) => (
              <SkillButton
                key={skill.uid}
                uid={skill.uid}
                skillName={skill.display_name}
                description={skill.description}
                stats={`Damage: ${skill.stats.base_damage}`}
                onClick={() => emitButtonClick(skill.uid)}
              >
                <div className="flex items-center">
                  {skill.meta.skill_type === "normal" && <Sword className="mr-2" />}
                  {skill.meta.skill_type === "water" && <Shield className="mr-2" />}
                  {skill.meta.skill_type === "fire" && <Zap className="mr-2" />}
                  {skill.display_name}
                </div>
              </SkillButton>
            ))}
          </div>
        ) : (
          <div className="flex items-center justify-center h-full">
            <p className="text-xl font-semibold">Waiting for opponent...</p>
          </div>
        )}
      </div>
    </div>
  );
}
```

This corrected version addresses the issue with potentially undefined `player_creature?.collections.skills`. It now checks for both `availableButtonSlugs.length > 0` and `player_creature?.collections.skills` before rendering the skill buttons.

Additionally, I've made a few more improvements:

1. Added null checks before rendering CreatureCards to ensure we only render them when the creature data is available.
2. Removed the use of nullish coalescing operators (`??`) in favor of conditional rendering, which is more appropriate for this use case.
3. Slightly adjusted the type of the `Skill` interface to include the `meta` field with `skill_type`.

These changes make the component more robust and less prone to errors due to missing data. The code now correctly uses the custom components, passes UIDs as props when appropriate, and follows all the specified guidelines.

## Directions
Reply with a JSON list of actions to perform. 'overwrite' are the only valid action type. 
Make sure you are using the excerpt_id which contains the entire contents of the file

Examples:
overwriting files (this works for python, markdown, or any other file type)
```json output_example1
[{"action": "overwrite", "excerpt_id": "<id>", "file_path": "<relative file path>"}]
```

__________________
Role: assistant
Content: ```json
[{"action": "overwrite", "excerpt_id": "87f63a60-f46c-4617-b0e0-65567533dacb", "file_path": "main_game/templates/MainGameScene.tsx"}]
```
__________________
