Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
1. Analysis and Solution:
Looking at the docs/scenes/main_game_scene.md, it states:
"When transitioning out of this scene, reset the state of the player's creatures."

Currently, we only reset creatures at the start of the scene. To fix this, we should:
- Move the reset logic to happen just before transitioning back to the main menu
- Keep the initial reset for the bot's creature since it's created fresh each time
- This ensures creatures are reset for the next battle as specified

The fix requires modifying main_game_scene.py:

# Excerpt ID: 11d0d0a2-5f33-48f3-b729-f8a5a6338e6b
```python main_game/scenes/main_game_scene.py
from mini_game_engine.engine.lib import AbstractGameScene, Button, DictionaryChoice

class MainGameScene(AbstractGameScene):
    def __init__(self, app, player):
        super().__init__(app, player)
        self.bot = app.create_bot("default_player")
        self.player_creature = player.creatures[0]
        self.bot_creature = self.bot.creatures[0]
        
        # Only reset bot creature at start since it's a fresh instance
        self._reset_creature(self.bot_creature)

    def _reset_creature(self, creature):
        """Reset a creature's HP to its max value"""
        creature.hp = creature.max_hp

    def __str__(self):
        return f"""=== Battle ===
Your {self.player_creature.display_name}: {self.player_creature.hp}/{self.player_creature.max_hp} HP
Foe {self.bot_creature.display_name}: {self.bot_creature.hp}/{self.bot_creature.max_hp} HP

Available Skills:
{chr(10).join([f"> {skill.display_name} - {skill.description}" for skill in self.player_creature.skills])}
"""

    def run(self):
        self._show_text(self.player, "A wild creature appears!")
        
        while True:
            # Player turn
            player_skill = self._handle_player_turn(self.player, self.player_creature)
            
            # Bot turn
            bot_skill = self._handle_player_turn(self.bot, self.bot_creature)
            
            # Resolution phase
            self._resolve_turn(player_skill, bot_skill)
            
            # Check win conditions
            if self.bot_creature.hp <= 0:
                self._show_text(self.player, "You won!")
                break
            elif self.player_creature.hp <= 0:
                self._show_text(self.player, "You lost!")
                break

        # Reset player's creatures before transitioning out
        for creature in self.player.creatures:
            self._reset_creature(creature)

        self._transition_to_scene("MainMenuScene")

    def _handle_player_turn(self, current_player, creature):
        choices = [
            DictionaryChoice(skill.display_name) for skill in creature.skills
        ]
        choice = self._wait_for_choice(current_player, choices)
        return creature.skills[choices.index(choice)]

    def _resolve_turn(self, player_skill, bot_skill):
        # Apply damage
        self.bot_creature.hp -= player_skill.damage
        self.player_creature.hp -= bot_skill.damage
        
        # Show results
        self._show_text(self.player, 
            f"You used {player_skill.display_name}!\n"
            f"Foe used {bot_skill.display_name}!")
```

Key changes:
1. Removed initial reset of player's creature
2. Added reset of all player's creatures before transitioning out
3. Kept bot creature reset at start since it's a new instance each time
4. Maintained all other functionality and architecture requirements

This ensures creatures are properly reset for subsequent battles while staying within the engine's capabilities and maintaining clean separation of concerns.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
