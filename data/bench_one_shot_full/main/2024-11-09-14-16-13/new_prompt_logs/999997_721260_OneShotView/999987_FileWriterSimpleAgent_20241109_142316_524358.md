Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and propose a solution.

DIAGNOSIS:
Looking at the image and comparing it to the code, I notice several issues:

1. The skill buttons are visible but not interactive - the timeout error suggests the buttons aren't properly hooked up to the event system
2. The emitButtonClick function from useCurrentButtons isn't being used in the SkillButton components
3. The error indicates a timeout after 120s, suggesting the UI simulator couldn't interact with the choices

PROPOSED SOLUTION:
1. Add onClick handler to SkillButton components that uses emitButtonClick
2. Pass the skill's uid as the button slug to emitButtonClick
3. Ensure buttons are only clickable when they appear in availableButtonSlugs

Here's the implementation:

# Excerpt ID: 3a8b6017-e1fb-44bd-a91a-19f1ecd45a1d
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Shield, Swords } from 'lucide-react';
import { CreatureCard } from "@/components/ui/custom/creature/creature_card";
import { PlayerCard } from "@/components/ui/custom/player/player_card";
import { SkillButton } from "@/components/ui/custom/skill/skill_button";

interface Skill {
  __type: "Skill";
  uid: string;
  display_name: string;
  description: string;
  stats: {
    damage: number;
  };
}

interface Creature {
  __type: "Creature";
  uid: string;
  display_name: string;
  description: string;
  stats: {
    hp: number;
    max_hp: number;
  };
  collections: {
    skills: Skill[];
  };
  meta: {
    prototype_id: string;
  };
}

interface Player {
  __type: "Player";
  uid: string;
  display_name: string;
  collections: {
    creatures: Creature[];
  };
  meta: {
    prototype_id: string;
  };
}

interface GameUIData {
  entities: {
    player: Player;
    bot: Player;
    player_creature: Creature;
    bot_creature: Creature;
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons();

  if (!props.data?.entities) {
    return <div className="h-screen w-full flex items-center justify-center">Loading...</div>;
  }

  const { player, bot, player_creature, bot_creature } = props.data.entities;

  const handleSkillClick = (skillUid: string) => {
    if (availableButtonSlugs.includes(skillUid)) {
      emitButtonClick(skillUid);
    }
  };

  return (
    <div className="flex flex-col h-screen w-full bg-background">
      <nav className="h-16 border-b flex items-center justify-between px-4 bg-card">
        <div className="flex items-center gap-2">
          <Shield className="h-6 w-6" />
          <span className="font-bold">Battle Arena</span>
        </div>
        <div className="flex gap-4">
          {player && player.__type === "Player" && (
            <PlayerCard
              uid={player.uid}
              name={player.display_name}
              imageUrl={`/avatars/${player.meta.prototype_id || 'default'}`}
            />
          )}
          {bot && bot.__type === "Player" && (
            <PlayerCard
              uid={bot.uid}
              name={bot.display_name}
              imageUrl={`/avatars/${bot.meta.prototype_id || 'default'}`}
            />
          )}
        </div>
      </nav>

      <main className="flex-grow flex flex-col">
        <div className="flex-grow flex items-center justify-between px-8 bg-muted/20">
          <div className="flex flex-col items-center gap-4">
            <div className="text-sm font-medium">Player's Creature</div>
            {player_creature && player_creature.__type === "Creature" && (
              <CreatureCard
                uid={player_creature.uid}
                name={player_creature.display_name}
                hp={player_creature.stats.hp}
                maxHp={player_creature.stats.max_hp}
                imageUrl={`/creatures/${player_creature.meta.prototype_id || 'default'}`}
              />
            )}
          </div>

          <Swords className="h-8 w-8 text-muted-foreground" />

          <div className="flex flex-col items-center gap-4">
            <div className="text-sm font-medium">Opponent's Creature</div>
            {bot_creature && bot_creature.__type === "Creature" && (
              <CreatureCard
                uid={bot_creature.uid}
                name={bot_creature.display_name}
                hp={bot_creature.stats.hp}
                maxHp={bot_creature.stats.max_hp}
                imageUrl={`/creatures/${bot_creature.meta.prototype_id || 'default'}`}
              />
            )}
          </div>
        </div>

        <div className="h-1/3 border-t bg-card p-4">
          <div className="grid grid-cols-3 gap-4 h-full">
            {player_creature?.collections.skills
              .filter(skill => skill.__type === "Skill")
              .map((skill) => (
                <SkillButton
                  key={skill.uid}
                  uid={skill.uid}
                  name={skill.display_name}
                  description={skill.description}
                  stats={`Damage: ${skill.stats.damage}`}
                  disabled={!availableButtonSlugs.includes(skill.uid)}
                  onClick={() => handleSkillClick(skill.uid)}
                />
            ))}
          </div>
        </div>
      </main>
    </div>
  );
}
```

The key changes made are:
1. Added handleSkillClick function to manage skill button clicks
2. Added onClick prop to SkillButton component that calls handleSkillClick
3. Maintained the disabled state based on availableButtonSlugs

This should resolve the timeout issue by properly connecting the UI interaction with the game's choice system.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
