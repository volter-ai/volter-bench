Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and propose a solution.

**Issue Description:**
Looking at the image and comparing it to the code and error, there appear to be several problems:

1. The UI simulator is timing out after 120s, suggesting it cannot properly interact with the buttons
2. The skill buttons in the lower section appear to be using direct UIDs for click events rather than slugs
3. The image shows a single "Tackle" button, but the code is trying to render all skills from the creature's collection
4. The button interaction isn't properly connected to the available choices system

**Proposed Solution:**
1. Modify the SkillButton click handler to use button slugs instead of UIDs
2. Add a slug property to the Skill interface to properly map skills to available choices
3. Filter skills to only show those that are in the availableButtonSlugs list
4. Ensure proper button state management by comparing against available slugs

Here's the implementation:

# Excerpt ID: c9694205-83b3-4160-a039-7f972da152ba
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Shield, Swords } from 'lucide-react'
import { CreatureCard } from "@/components/ui/custom/creature/creature_card"
import { SkillButton } from "@/components/ui/custom/skill/skill_button"

interface Skill {
  __type: "Skill"
  uid: string
  slug: string
  display_name: string
  description: string
  stats: {
    base_damage: number
  }
}

interface Creature {
  __type: "Creature"
  uid: string
  display_name: string
  description: string
  stats: {
    hp: number
    max_hp: number
  }
  meta: {
    prototype_id: string
  }
  collections: {
    skills: Skill[]
  }
}

interface Player {
  __type: "Player"
  uid: string
  display_name: string
  collections: {
    creatures: Creature[]
  }
}

interface GameUIData {
  entities: {
    player: Player
    bot: Player
    player_creature: Creature | null
    bot_creature: Creature | null
  }
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons()

  const playerCreature = props.data.entities.player_creature
  const botCreature = props.data.entities.bot_creature

  const availableSkills = playerCreature?.collections?.skills?.filter(
    skill => availableButtonSlugs.includes(skill.slug)
  ) || []

  return (
    <div className="w-full h-full flex flex-col bg-background">
      {/* HUD */}
      <div className="h-16 bg-secondary flex items-center justify-between px-4 border-b">
        <div className="flex items-center gap-2">
          <Shield className="h-5 w-5" />
          <span>Player: {props.data.entities.player?.display_name ?? 'Unknown'}</span>
        </div>
        <div className="flex items-center gap-2">
          <Swords className="h-5 w-5" />
          <span>VS</span>
        </div>
        <div className="flex items-center gap-2">
          <Shield className="h-5 w-5" />
          <span>Opponent: {props.data.entities.bot?.display_name ?? 'Unknown'}</span>
        </div>
      </div>

      {/* Battlefield */}
      <div className="flex-1 flex items-center justify-between px-16 bg-secondary/10">
        <div className="flex flex-col items-center gap-2">
          <span className="text-sm font-bold">Your Creature</span>
          {playerCreature ? (
            <CreatureCard
              uid={playerCreature.uid}
              name={playerCreature.display_name}
              currentHp={playerCreature.stats.hp}
              maxHp={playerCreature.stats.max_hp}
              imageUrl={`/assets/creatures/${playerCreature.meta.prototype_id}.png`}
            />
          ) : (
            <div className="w-[250px] h-[300px] flex items-center justify-center border-2 border-dashed rounded-lg">
              No Creature Selected
            </div>
          )}
        </div>

        <div className="flex flex-col items-center gap-2">
          <span className="text-sm font-bold">Opponent's Creature</span>
          {botCreature ? (
            <CreatureCard
              uid={botCreature.uid}
              name={botCreature.display_name}
              currentHp={botCreature.stats.hp}
              maxHp={botCreature.stats.max_hp}
              imageUrl={`/assets/creatures/${botCreature.meta.prototype_id}.png`}
            />
          ) : (
            <div className="w-[250px] h-[300px] flex items-center justify-center border-2 border-dashed rounded-lg">
              No Creature Present
            </div>
          )}
        </div>
      </div>

      {/* Action UI */}
      <div className="h-48 bg-secondary/20 p-4 border-t">
        <div className="grid grid-cols-2 gap-4 max-w-xl mx-auto">
          {availableSkills.length > 0 ? (
            availableSkills.map((skill) => (
              <SkillButton
                key={skill.uid}
                uid={skill.uid}
                skillName={skill.display_name}
                description={skill.description}
                stats={{
                  damage: skill.stats.base_damage
                }}
                onClick={() => emitButtonClick(skill.slug)}
              />
            ))
          ) : (
            <div className="col-span-2 text-center text-muted-foreground">
              No skills available
            </div>
          )}
        </div>
      </div>
    </div>
  )
}
```

The main changes are:
1. Added `slug` to the Skill interface
2. Created an `availableSkills` filtered list based on `availableButtonSlugs`
3. Modified the SkillButton click handler to emit the skill's slug instead of its UID
4. Removed the disabled prop since we're now filtering unavailable skills
5. Changed the skills rendering logic to use the filtered `availableSkills` list

These changes should resolve the timeout issue by properly connecting the UI elements to the game's choice system.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
