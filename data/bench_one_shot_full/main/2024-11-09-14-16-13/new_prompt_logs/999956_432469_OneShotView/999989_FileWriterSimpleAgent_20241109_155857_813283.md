Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
# Excerpt ID: f27a736b-2444-4e1f-9232-2cff329ab3d4
```tsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { CreatureCard } from "@/components/ui/custom/creature/creature_card";
import { SkillButton } from "@/components/ui/custom/skill/skill_button";
import { PlayerCard } from "@/components/ui/custom/player/player_card";

interface Skill {
  __type: "Skill";
  uid: string;
  display_name: string;
  description: string;
  stats: {
    base_damage: number;
  };
  meta: {
    skill_type: string;
  };
}

interface Creature {
  __type: "Creature";
  uid: string;
  display_name: string;
  description: string;
  stats: {
    hp: number;
    max_hp: number;
  };
  collections: {
    skills: Skill[];
  };
  meta: {
    image_front?: string;
    image_back?: string;
  };
}

interface Player {
  __type: "Player";
  uid: string;
  display_name: string;
  collections: {
    creatures: Creature[];
  };
  meta: {
    image_url?: string;
  };
}

interface GameUIData {
  entities: {
    player: Player;
    opponent: Player;
    player_creature: Creature;
    opponent_creature: Creature;
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons();

  const { player, opponent, player_creature, opponent_creature } = props.data.entities;

  if (!player_creature || !opponent_creature || !player || !opponent) {
    return <div className="w-full h-full flex items-center justify-center">
      Loading battle...
    </div>;
  }

  return (
    <div className="h-screen w-screen flex flex-col">
      {/* Battlefield Area (upper 2/3) */}
      <div className="h-2/3 grid grid-cols-2 gap-4 p-4 bg-gradient-to-b from-sky-100 to-sky-300">
        {/* Top Left - Opponent Status */}
        <div className="flex flex-col gap-4">
          <PlayerCard
            uid={opponent.uid}
            name={opponent.display_name}
            imageUrl={opponent.meta.image_url || "/default_opponent.png"}
          />
          <CreatureCard
            uid={opponent_creature.uid}
            name={opponent_creature.display_name}
            hp={opponent_creature.stats.hp}
            maxHp={opponent_creature.stats.max_hp}
            imageUrl={opponent_creature.meta.image_front || `/creatures/default_front.png`}
          />
        </div>

        {/* Top Right - Opponent Creature */}
        <div className="flex justify-end items-start">
          <div className="relative">
            <div className="absolute bottom-0 w-32 h-8 bg-black/20 rounded-full blur-sm" />
            <img
              src={opponent_creature.meta.image_front || `/creatures/default_front.png`}
              alt={opponent_creature.display_name}
              className="w-48 h-48 object-contain"
            />
          </div>
        </div>

        {/* Bottom Left - Player Creature */}
        <div className="flex justify-start items-end">
          <div className="relative">
            <div className="absolute bottom-0 w-32 h-8 bg-black/20 rounded-full blur-sm" />
            <img
              src={player_creature.meta.image_back || `/creatures/default_back.png`}
              alt={player_creature.display_name}
              className="w-48 h-48 object-contain"
            />
          </div>
        </div>

        {/* Bottom Right - Player Status */}
        <div className="flex flex-col gap-4 items-end">
          <PlayerCard
            uid={player.uid}
            name={player.display_name}
            imageUrl={player.meta.image_url || "/default_player.png"}
          />
          <CreatureCard
            uid={player_creature.uid}
            name={player_creature.display_name}
            hp={player_creature.stats.hp}
            maxHp={player_creature.stats.max_hp}
            imageUrl={player_creature.meta.image_front || `/creatures/default_front.png`}
          />
        </div>
      </div>

      {/* UI Area (lower 1/3) */}
      <div className="h-1/3 grid grid-cols-2 gap-4 p-4 bg-white/80">
        {player_creature.collections.skills.map((skill) => (
          <SkillButton
            key={skill.uid}
            uid={skill.uid}
            skillName={skill.display_name}
            description={skill.description}
            damage={skill.stats.base_damage}
            type={skill.meta.skill_type}
          />
        ))}
      </div>
    </div>
  );
}
```

Key corrections made:
1. Added PlayerCard components for both player and opponent
2. Fixed height proportions using h-2/3 and h-1/3 instead of flex-grow
3. Added proper typing for Player with __type
4. Added image URL handling from meta data with fallbacks
5. Properly structured the status areas to show both player and creature cards
6. Added proper null checks for all entity types
7. Ensured all custom components receive their required uid props
8. Added proper fallback image paths for when meta data is missing

The layout now properly shows:
- Player and opponent cards
- Creature cards with status
- Creature battle positions with shadows
- Skills in the bottom area
- Proper height proportions
- All required custom components with proper props

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
