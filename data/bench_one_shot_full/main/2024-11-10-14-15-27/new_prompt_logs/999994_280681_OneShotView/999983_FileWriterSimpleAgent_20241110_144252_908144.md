Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
From the error message and the blank image provided, it appears there are several critical issues:

1. The component is not rendering at all, as evidenced by the completely blank image
2. There's a connection refused error when trying to load source maps
3. The UI simulator is timing out after 120 seconds, suggesting the component isn't properly initializing

The main issues appear to be:
1. The useCurrentButtons hook may not be properly initialized or is failing silently
2. The error handling in the useEffect might be insufficient
3. The component might be failing to mount properly

Proposed Solution:
1. Add proper error boundary and initialization checks for the useCurrentButtons hook
2. Improve error handling in useEffect
3. Add defensive checks for button click handlers
4. Ensure the component properly mounts by adding a cleanup function to useEffect

Here's the implemented solution:

# Excerpt ID: 2cad815e-db53-4baf-b00c-b926cecabb45
```jsx main_game/templates/MainMenuScene.tsx
import { useCurrentButtons } from "@/lib/useChoices";
import { Play, XCircle } from 'lucide-react';
import { useEffect, useState } from 'react';

interface ExamplePlayer {
    uid: string,
    stats: {
        stat1: number,
    },
}

interface GameUIData {
    entities: {
        player: ExamplePlayer
    }
}

export function MainMenuSceneView(props: { data: GameUIData }) {
    const [isLoading, setIsLoading] = useState(true);
    const [error, setError] = useState<string | null>(null);
    
    const {
        availableButtonSlugs = ['play', 'quit'],
        emitButtonClick
    } = useCurrentButtons() || {};

    useEffect(() => {
        let mounted = true;

        const initializeComponent = async () => {
            try {
                if (!emitButtonClick) {
                    throw new Error('Button handlers not initialized');
                }
                
                if (mounted) {
                    setIsLoading(false);
                }
            } catch (err) {
                if (mounted) {
                    setError(err instanceof Error ? err.message : 'Failed to initialize menu');
                    console.error(err);
                }
            }
        };

        initializeComponent();

        return () => {
            mounted = false;
        };
    }, [emitButtonClick]);

    const handleButtonClick = (slug: string) => {
        if (!emitButtonClick || !availableButtonSlugs?.includes(slug)) {
            console.error(`Invalid button click: ${slug}`);
            return;
        }
        emitButtonClick(slug);
    };

    if (error) {
        return (
            <div className="w-full h-full flex items-center justify-center bg-slate-900">
                <p className="text-red-500">Error: {error}</p>
            </div>
        );
    }

    if (isLoading) {
        return (
            <div className="w-full h-full flex items-center justify-center bg-slate-900">
                <p className="text-white">Loading...</p>
            </div>
        );
    }

    return (
        <div className="w-full h-full overflow-hidden">
            <div className="w-full h-full relative bg-slate-900">
                <div className="absolute inset-0 flex flex-col items-center justify-between py-12 aspect-video max-h-full max-w-full mx-auto">
                    <div className="flex-1 flex items-center justify-center">
                        <h1 className="text-6xl font-bold text-white tracking-wider">
                            GAME TITLE
                        </h1>
                    </div>

                    <div className="flex flex-col gap-4 items-center mb-8">
                        {availableButtonSlugs?.includes('play') && (
                            <button
                                onClick={() => handleButtonClick('play')}
                                className="flex items-center gap-2 px-8 py-4 bg-green-600 hover:bg-green-700 text-white rounded-lg text-xl transition-colors"
                                aria-label="Play Game"
                                role="button"
                                tabIndex={0}
                            >
                                <Play size={24} />
                                <span>Play Game</span>
                            </button>
                        )}

                        {availableButtonSlugs?.includes('quit') && (
                            <button
                                onClick={() => handleButtonClick('quit')}
                                className="flex items-center gap-2 px-8 py-4 bg-red-600 hover:bg-red-700 text-white rounded-lg text-xl transition-colors"
                                aria-label="Quit Game"
                                role="button"
                                tabIndex={0}
                            >
                                <XCircle size={24} />
                                <span>Quit</span>
                            </button>
                        )}
                    </div>
                </div>
            </div>
        </div>
    );
}
```

The key changes include:
1. Added proper null checking for useCurrentButtons hook
2. Implemented a cleanup function in useEffect to prevent memory leaks
3. Added a separate handleButtonClick function with validation
4. Improved error handling and initialization checks
5. Added proper type safety and null checks throughout the component

These changes should help resolve the connection and timeout issues while ensuring the component renders properly.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
