Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and propose a solution.

**Issue Description:**
Looking at the image and error, there appear to be several problems:
1. The UI simulator is timing out after 120s, suggesting it cannot interact with the buttons properly
2. The skill buttons appear to be rendered, but may not be properly clickable
3. The error suggests connection issues with source maps, but this is likely a secondary effect
4. The layout appears correct visually, but the interaction layer may be broken

The main issue seems to be that the skill buttons aren't properly hooked up to the game event system, causing the timeout when the simulator tries to interact with them.

**Proposed Solution:**
1. Modify the SkillButton click handler to properly emit the skill's uid as a button slug
2. Ensure the button grid is properly accessible and clickable
3. Add proper button state handling for available/unavailable skills
4. Ensure the skills array is properly mapped and rendered

**Implementation:**
Here's the corrected code:

# Excerpt ID: d3785666-4526-4015-9af1-3b0c8f13ec71
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices";
import { Shield, Swords } from 'lucide-react';
import { CreatureCard } from "@/components/ui/custom/creature/creature_card";
import { PlayerCard } from "@/components/ui/custom/player/player_card";
import { SkillButton } from "@/components/ui/custom/skill/skill_button";

interface Skill {
  __type: "Skill";
  uid: string;
  display_name: string;
  description: string;
  stats: {
    damage: number;
  };
  meta: {
    prototype_id: string;
  };
}

interface Creature {
  __type: "Creature";
  uid: string;
  display_name: string;
  description: string;
  stats: {
    hp: number;
    max_hp: number;
  };
  meta: {
    prototype_id: string;
  };
  collections: {
    skills: Skill[];
  };
}

interface Player {
  __type: "Player";
  uid: string;
  display_name: string;
  meta: {
    prototype_id: string;
  };
  collections: {
    creatures: Creature[];
  };
}

interface GameUIData {
  entities: {
    player: Player;
    bot: Player;
    player_creature: Creature;
    bot_creature: Creature;
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons();

  const { player, bot, player_creature, bot_creature } = props.data.entities;

  const getImageUrl = (prototypeId: string) => `/assets/${prototypeId}.png`;

  const handleSkillClick = (skillUid: string) => {
    if (availableButtonSlugs.includes(skillUid)) {
      emitButtonClick(skillUid);
    }
  };

  return (
    <div className="h-screen w-screen flex flex-col bg-background">
      <nav className="w-full h-20 bg-primary/10 flex items-center justify-between px-6 border-b">
        {player && (
          <PlayerCard
            uid={player.uid}
            name={player.display_name}
            imageUrl={getImageUrl(player.meta.prototype_id)}
          />
        )}
        <div className="flex items-center gap-2">
          <Swords className="h-6 w-6" />
          <span className="text-lg font-semibold">Battle Phase</span>
        </div>
        {bot && (
          <PlayerCard
            uid={bot.uid}
            name={bot.display_name}
            imageUrl={getImageUrl(bot.meta.prototype_id)}
          />
        )}
      </nav>

      <div className="flex-grow flex justify-between items-center px-12">
        {player_creature && (
          <div className="flex flex-col items-center gap-4">
            <span className="text-lg font-bold text-primary">Your Creature</span>
            <CreatureCard
              uid={player_creature.uid}
              name={player_creature.display_name}
              hp={player_creature.stats.hp}
              maxHp={player_creature.stats.max_hp}
              imageUrl={getImageUrl(player_creature.meta.prototype_id)}
            />
          </div>
        )}

        {bot_creature && (
          <div className="flex flex-col items-center gap-4">
            <span className="text-lg font-bold text-destructive">Opponent's Creature</span>
            <CreatureCard
              uid={bot_creature.uid}
              name={bot_creature.display_name}
              hp={bot_creature.stats.hp}
              maxHp={bot_creature.stats.max_hp}
              imageUrl={getImageUrl(bot_creature.meta.prototype_id)}
            />
          </div>
        )}
      </div>

      <div className="h-48 bg-primary/5 border-t p-4">
        <div className="grid grid-cols-4 gap-4" role="group" aria-label="Skill buttons">
          {player_creature?.collections.skills.map((skill) => (
            <SkillButton
              key={skill.uid}
              uid={skill.uid}
              name={skill.display_name}
              description={skill.description}
              stats={`Damage: ${skill.stats.damage}`}
              disabled={!availableButtonSlugs.includes(skill.uid)}
              onClick={() => handleSkillClick(skill.uid)}
            />
          ))}
        </div>
      </div>
    </div>
  );
}
```

Key changes made:
1. Added role="group" and aria-label to the skills container for better accessibility
2. Simplified the skill button click handler to ensure proper event emission
3. Ensured proper typing and prop passing for all components
4. Maintained consistent structure for button interaction handling

These changes should resolve the timeout issue by ensuring the buttons are properly interactive and correctly emit events to the game system.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
