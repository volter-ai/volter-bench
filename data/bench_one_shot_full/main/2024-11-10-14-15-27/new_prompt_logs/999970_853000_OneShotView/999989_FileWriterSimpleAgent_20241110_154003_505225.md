Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
I'll help design and implement the MainGameScene component. Let me outline the architecture first:

Architecture Plan:

1. Layout Structure:
- Use CSS Grid for the main layout division (top HUD, middle battlefield, bottom UI)
- Flexbox for horizontal arrangement of creatures in battlefield
- The layout will be responsive using Tailwind's responsive classes

2. Component Organization:
- Main container with grid layout (grid-rows-[auto_1fr_auto])
- HUD section at top
- Battlefield section in middle
- UI/Controls section at bottom

3. Data Handling:
- Create interfaces for Creature, Skill, and Player types based on the view data
- Use optional chaining for safe data access
- Implement type guards where needed

4. Styling Strategy:
- Use Tailwind classes for layout and spacing
- Grid for main sections: h-screen grid grid-rows-[auto_1fr_auto]
- Battlefield: flex justify-between items-center
- UI area: flex flex-col for stacking buttons/text

5. Custom Components Usage:
- CreatureCard for both player and opponent creatures
- SkillButton for player's available skills
- PlayerCard for player/opponent info in HUD

Here's the implementation:

# Excerpt ID: ed1959cf-035b-479b-8274-0ec7f855037b
```tsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Sword, Shield, Zap } from 'lucide-react'
import { CreatureCard } from "@/components/ui/custom/creature/creature_card"
import { PlayerCard } from "@/components/ui/custom/player/player_card"
import { SkillButton } from "@/components/ui/custom/skill/skill_button"

interface Skill {
  __type: "Skill"
  uid: string
  display_name: string
  description: string
  stats: {
    base_damage: number
  }
}

interface Creature {
  __type: "Creature"
  uid: string
  display_name: string
  description: string
  stats: {
    hp: number
    max_hp: number
    attack: number
    defense: number
    speed: number
  }
  collections: {
    skills: Skill[]
  }
}

interface Player {
  __type: "Player"
  uid: string
  display_name: string
  collections: {
    creatures: Creature[]
  }
}

interface GameUIData {
  entities: {
    player: Player
    opponent: Player
    player_creature: Creature
    opponent_creature: Creature
  }
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons()

  const { player_creature, opponent_creature, player, opponent } = props.data.entities

  return (
    <div className="h-screen w-full grid grid-rows-[auto_1fr_auto] bg-background">
      {/* HUD */}
      <nav className="w-full p-4 bg-muted/50 flex justify-between items-center">
        <PlayerCard
          uid={player.uid}
          name={player.display_name}
          imageUrl="/placeholder-player.png"
        />
        <PlayerCard
          uid={opponent.uid}
          name={opponent.display_name}
          imageUrl="/placeholder-opponent.png"
        />
      </nav>

      {/* Battlefield */}
      <main className="flex justify-between items-center px-16 py-8">
        {player_creature && (
          <div className="flex flex-col items-center gap-4">
            <CreatureCard
              uid={player_creature.uid}
              name={player_creature.display_name}
              currentHp={player_creature.stats.hp}
              maxHp={player_creature.stats.max_hp}
              imageUrl="/placeholder-creature.png"
            />
            <div className="flex gap-2">
              <div className="flex items-center gap-1">
                <Sword className="w-4 h-4" />
                <span>{player_creature.stats.attack}</span>
              </div>
              <div className="flex items-center gap-1">
                <Shield className="w-4 h-4" />
                <span>{player_creature.stats.defense}</span>
              </div>
              <div className="flex items-center gap-1">
                <Zap className="w-4 h-4" />
                <span>{player_creature.stats.speed}</span>
              </div>
            </div>
          </div>
        )}

        {opponent_creature && (
          <div className="flex flex-col items-center gap-4">
            <CreatureCard
              uid={opponent_creature.uid}
              name={opponent_creature.display_name}
              currentHp={opponent_creature.stats.hp}
              maxHp={opponent_creature.stats.max_hp}
              imageUrl="/placeholder-creature.png"
            />
            <div className="flex gap-2">
              <div className="flex items-center gap-1">
                <Sword className="w-4 h-4" />
                <span>{opponent_creature.stats.attack}</span>
              </div>
              <div className="flex items-center gap-1">
                <Shield className="w-4 h-4" />
                <span>{opponent_creature.stats.defense}</span>
              </div>
              <div className="flex items-center gap-1">
                <Zap className="w-4 h-4" />
                <span>{opponent_creature.stats.speed}</span>
              </div>
            </div>
          </div>
        )}
      </main>

      {/* Controls */}
      <div className="bg-muted/50 p-4">
        <div className="flex flex-wrap gap-2 justify-center">
          {player_creature?.collections.skills.map((skill) => (
            <SkillButton
              key={skill.uid}
              uid={skill.uid}
              name={skill.display_name}
              description={skill.description}
              damage={skill.stats.base_damage}
            />
          ))}
        </div>
      </div>
    </div>
  )
}
```

This implementation:
1. Creates proper TypeScript interfaces for the data structure
2. Uses a grid layout for the main sections
3. Implements all required custom components
4. Handles missing data with optional chaining
5. Uses Tailwind for responsive layout
6. Includes stats display with Lucide icons
7. Creates a clean battle layout with creatures facing each other
8. Implements the skill button area at the bottom

Note: I've used placeholder image URLs - you'll need to replace these with actual image paths from your asset system.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
