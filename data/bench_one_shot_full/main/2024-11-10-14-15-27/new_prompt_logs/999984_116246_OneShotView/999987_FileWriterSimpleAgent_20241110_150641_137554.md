Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and propose a solution.

**Problem Description:**
1. The error indicates a timeout after 120s, suggesting the UI simulator couldn't complete its intended interactions
2. Looking at the image, I can see:
   - The battlefield layout is correct with two creatures (Bubwool and Scizard)
   - The HP bars are visible
   - Only one skill button ("Tackle") is visible in the bottom section
3. The main issue appears to be that the skill buttons aren't properly connecting to the game events system, causing the timeout

**Proposed Solution:**
1. The skill buttons need to be properly connected to the game events system through the `availableButtonSlugs`
2. The current code is mapping over creature skills directly, but should instead map over available button slugs
3. We need to match available slugs with creature skills to display the correct buttons
4. The emitButtonClick should only be called with available slugs

Here's the implementation:

# Excerpt ID: 10b8c4cd-7bf2-4f9a-86fc-428b5b71b9d9
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Shield, Swords } from 'lucide-react'
import { CreatureCard } from "@/components/ui/custom/creature/creature_card"
import { SkillButton } from "@/components/ui/custom/skill/skill_button"
import { PlayerCard } from "@/components/ui/custom/player/player_card"

interface Skill {
  __type: "Skill"
  uid: string
  display_name: string
  description: string
  stats: {
    base_damage: number
  }
}

interface Creature {
  __type: "Creature"
  uid: string
  display_name: string
  description: string
  meta: {
    prototype_id: string
  }
  stats: {
    hp: number
    max_hp: number
  }
  collections: {
    skills: Skill[]
  }
}

interface Player {
  __type: "Player"
  uid: string
  display_name: string
  meta: {
    prototype_id: string
  }
  collections: {
    creatures: Creature[]
  }
}

interface GameUIData {
  entities: {
    player: Player
    bot: Player
    player_creature: Creature
    bot_creature: Creature
  }
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons()

  const { player, bot, player_creature, bot_creature } = props.data.entities

  // Map available slugs to skills
  const availableSkills = player_creature?.collections.skills.filter(skill => 
    availableButtonSlugs.includes(skill.uid)
  ) || []

  return (
    <div className="h-screen w-screen flex flex-col bg-background">
      {/* HUD */}
      <nav className="h-[10%] flex items-center justify-between px-6 border-b">
        {player && (
          <PlayerCard
            uid={player.uid}
            name={player.display_name}
            imageUrl={`/players/${player.meta?.prototype_id || 'default'}.png`}
          />
        )}
        {bot && (
          <PlayerCard
            uid={bot.uid}
            name={bot.display_name}
            imageUrl={`/players/${bot.meta?.prototype_id || 'default'}.png`}
          />
        )}
      </nav>

      {/* Battlefield */}
      <div className="h-[60%] flex justify-between items-center px-12">
        <div className="flex flex-col items-center gap-4">
          <span className="text-lg font-bold">Your Creature</span>
          {player_creature && (
            <CreatureCard
              uid={player_creature.uid}
              name={player_creature.display_name}
              currentHp={player_creature.stats.hp}
              maxHp={player_creature.stats.max_hp}
              imageUrl={`/creatures/${player_creature.meta?.prototype_id || 'default'}.png`}
            />
          )}
        </div>

        <div className="flex flex-col items-center gap-4">
          <span className="text-lg font-bold">Opponent's Creature</span>
          {bot_creature && (
            <CreatureCard
              uid={bot_creature.uid}
              name={bot_creature.display_name}
              currentHp={bot_creature.stats.hp}
              maxHp={bot_creature.stats.max_hp}
              imageUrl={`/creatures/${bot_creature.meta?.prototype_id || 'default'}.png`}
            />
          )}
        </div>
      </div>

      {/* Skills/Controls */}
      <div className="h-[30%] flex flex-col items-center justify-center p-6 border-t">
        <div className="grid grid-cols-2 gap-4">
          {availableSkills.map((skill) => (
            <SkillButton
              key={skill.uid}
              uid={skill.uid}
              skillName={skill.display_name}
              description={skill.description}
              stats={{
                damage: skill.stats.base_damage
              }}
              onClick={() => emitButtonClick(skill.uid)}
            />
          ))}
        </div>
      </div>
    </div>
  )
}
```

Key changes made:
1. Added `availableSkills` mapping that filters skills based on `availableButtonSlugs`
2. Changed the skills rendering to use `availableSkills` instead of all skills
3. Removed the `disabled` prop since we're now only showing available skills
4. Simplified the click handler to directly emit the skill uid as the button slug

These changes ensure that only available skills are shown and that clicks properly trigger the game events system, which should resolve the timeout issue.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
