Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue:

1. Problem Description:
The image shows the battlefield layout with player and opponent cards, but there's a noticeable absence of the skill buttons that should appear in the lower section. According to the design document, there should be a text-box like area with buttons representing the player's available choices. The timeout error suggests that the UI simulator couldn't find or interact with these buttons, leading to the test failure.

2. Proposed Solution:
The main issues appear to be:
a) The skills UI section might be hidden or not properly rendered
b) The grid layout might be pushing content off-screen
c) The button click handling might not be working correctly

Changes needed:
1. Ensure the skills UI section is always visible by adjusting the grid layout
2. Add proper conditional rendering for the skills section
3. Improve the button click handler to properly work with the available button slugs

Here's the corrected implementation:

# Excerpt ID: a1493183-3d14-4777-aafc-90a0f7d2a6f6
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Shield, Swords } from 'lucide-react'
import { CreatureCard } from "@/components/ui/custom/creature/creature_card"
import { PlayerCard } from "@/components/ui/custom/player/player_card"
import { SkillButton } from "@/components/ui/custom/skill/skill_button"

interface Skill {
  __type: "Skill"
  uid: string
  display_name: string
  description: string
  stats: {
    base_damage: number
  }
}

interface Creature {
  __type: "Creature"
  uid: string
  display_name: string
  stats: {
    hp: number
    max_hp: number
  }
  collections: {
    skills: Skill[]
  }
}

interface Player {
  __type: "Player"
  uid: string
  display_name: string
}

interface GameUIData {
  entities: {
    player: Player
    opponent: Player
    player_creature: Creature
    opponent_creature: Creature
  }
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons()

  const { player_creature, opponent_creature, player, opponent } = props.data.entities

  const handleSkillClick = (skillUid: string) => {
    const buttonSlug = availableButtonSlugs.find(slug => slug.includes(skillUid))
    if (buttonSlug) {
      emitButtonClick(buttonSlug)
    }
  }

  return (
    <div className="w-full h-full flex flex-col bg-background">
      {/* HUD */}
      <nav className="p-4 border-b flex justify-between items-center">
        <div className="flex items-center gap-2">
          <Shield className="h-5 w-5" />
          <span>{player?.display_name}</span>
        </div>
        <div className="flex items-center gap-2">
          <Swords className="h-5 w-5" />
          <span>{opponent?.display_name}</span>
        </div>
      </nav>

      {/* Battlefield */}
      <div className="flex-1 flex justify-between items-center p-8 gap-8">
        <div className="flex flex-col items-center gap-4">
          {player && (
            <PlayerCard
              uid={player.uid}
              name={player.display_name}
              imageUrl="/placeholder-player.png"
            />
          )}
          {player_creature && (
            <CreatureCard
              uid={player_creature.uid}
              name={player_creature.display_name}
              currentHp={player_creature.stats.hp}
              maxHp={player_creature.stats.max_hp}
              imageUrl="/placeholder-creature.png"
            />
          )}
        </div>

        <div className="flex flex-col items-center gap-4">
          {opponent && (
            <PlayerCard
              uid={opponent.uid}
              name={opponent.display_name}
              imageUrl="/placeholder-opponent.png"
            />
          )}
          {opponent_creature && (
            <CreatureCard
              uid={opponent_creature.uid}
              name={opponent_creature.display_name}
              currentHp={opponent_creature.stats.hp}
              maxHp={opponent_creature.stats.max_hp}
              imageUrl="/placeholder-creature.png"
            />
          )}
        </div>
      </div>

      {/* Skills UI */}
      {player_creature && availableButtonSlugs.length > 0 && (
        <div className="p-4 border-t mt-auto">
          <div className="grid grid-cols-2 gap-4 max-w-md mx-auto">
            {player_creature.collections.skills
              .filter(skill => availableButtonSlugs.some(slug => slug.includes(skill.uid)))
              .map((skill) => (
                <SkillButton
                  key={skill.uid}
                  uid={skill.uid}
                  name={skill.display_name}
                  description={skill.description}
                  damage={skill.stats.base_damage}
                  onClick={() => handleSkillClick(skill.uid)}
                />
              ))}
          </div>
        </div>
      )}
    </div>
  )
}
```

Key changes made:
1. Changed the grid layout to a flex layout to ensure proper content distribution
2. Added conditional rendering for the skills UI section based on both player_creature existence and availableButtonSlugs
3. Added mt-auto to the skills UI section to ensure it stays at the bottom
4. Simplified the layout structure to prevent content from being pushed off-screen
5. Made the battlefield section flex-1 to take up available space

These changes should ensure that all elements are visible and properly interactive, resolving the timeout issue in the UI simulator.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
