Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue based on the image and error message provided.

Problem Description:
1. The error indicates a timeout after 120s, suggesting the UI simulator couldn't complete its intended interactions
2. Looking at the image, I can see:
   - The battlefield layout with two creatures (Bubwool and Scizard)
   - Health bars and labels for both creatures
   - A single "Tackle" button in the control area
3. The main issue appears to be with the button interaction system:
   - The skills buttons aren't properly connected to the choice system
   - The timeout likely occurs because the simulator can't properly interact with the buttons

Proposed Solution:
1. The SkillButton component needs to be properly connected to the choice system
2. We need to ensure the button slugs are properly formatted and handled
3. The grid layout for skills should be adjusted to ensure buttons are accessible
4. Add proper handling for button availability states

Here's the implementation:

# Excerpt ID: 1580024c-38d7-4695-8bbc-4d88588a3960
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Sword, Shield, Zap } from 'lucide-react'
import { CreatureCard } from "@/components/ui/custom/creature/creature_card"
import { SkillButton } from "@/components/ui/custom/skill/skill_button"
import { PlayerCard } from "@/components/ui/custom/player/player_card"

interface Skill {
  __type: "Skill"
  uid: string
  display_name: string
  description: string
  stats: {
    base_damage: number
  }
}

interface Creature {
  __type: "Creature"
  uid: string
  display_name: string
  description: string
  stats: {
    hp: number
    max_hp: number
    attack: number
    defense: number
    speed: number
  }
  meta: {
    prototype_id: string
  }
  collections: {
    skills: Skill[]
  }
}

interface Player {
  __type: "Player"
  uid: string
  display_name: string
  collections: {
    creatures: Creature[]
  }
}

interface GameUIData {
  entities: {
    player: Player
    bot: Player
    player_creature: Creature
    bot_creature: Creature
  }
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons()

  // Safety checks
  if (!props.data?.entities) {
    return <div className="h-screen w-screen flex items-center justify-center">Loading game data...</div>
  }

  const { player, bot, player_creature, bot_creature } = props.data.entities

  // Verify all required entities exist and are of correct type
  if (player?.__type !== "Player" || bot?.__type !== "Player" || 
      player_creature?.__type !== "Creature" || bot_creature?.__type !== "Creature") {
    return <div className="h-screen w-screen flex items-center justify-center">Invalid game state</div>
  }

  // Helper function to check if a skill button is available
  const isSkillAvailable = (skillUid: string) => {
    const buttonSlug = `skill_${skillUid}`
    return availableButtonSlugs.includes(buttonSlug)
  }

  return (
    <div className="h-screen w-screen flex flex-col bg-background">
      {/* HUD */}
      <nav className="h-[10%] bg-secondary p-4 flex justify-between items-center">
        {player && (
          <PlayerCard
            uid={player.uid}
            name={player.display_name}
            imageUrl="/players/default.png"
          />
        )}
        {bot && (
          <PlayerCard
            uid={bot.uid}
            name={bot.display_name}
            imageUrl="/players/default.png"
          />
        )}
      </nav>

      {/* Battlefield */}
      <div className="h-[60%] relative flex justify-between items-center px-16">
        {player_creature && (
          <div className="relative">
            <div className="absolute -top-8 left-1/2 -translate-x-1/2 bg-primary text-primary-foreground px-4 py-1 rounded-full">
              Player
            </div>
            <CreatureCard
              uid={player_creature.uid}
              name={player_creature.display_name}
              currentHp={player_creature.stats.hp}
              maxHp={player_creature.stats.max_hp}
              imageUrl={`/creatures/${player_creature.meta?.prototype_id || 'default'}.png`}
            />
          </div>
        )}

        {bot_creature && (
          <div className="relative">
            <div className="absolute -top-8 left-1/2 -translate-x-1/2 bg-destructive text-destructive-foreground px-4 py-1 rounded-full">
              Opponent
            </div>
            <CreatureCard
              uid={bot_creature.uid}
              name={bot_creature.display_name}
              currentHp={bot_creature.stats.hp}
              maxHp={bot_creature.stats.max_hp}
              imageUrl={`/creatures/${bot_creature.meta?.prototype_id || 'default'}.png`}
            />
          </div>
        )}
      </div>

      {/* Control Area */}
      <div className="h-[30%] bg-card rounded-t-xl p-6 shadow-lg">
        <div className="grid grid-cols-2 gap-4 h-full">
          {player_creature?.collections?.skills?.map((skill) => {
            if (skill.__type !== "Skill") return null;
            
            const buttonSlug = `skill_${skill.uid}`;
            const isAvailable = isSkillAvailable(skill.uid);
            
            return (
              <SkillButton
                key={skill.uid}
                uid={skill.uid}
                skillName={skill.display_name}
                description={skill.description}
                stats={{
                  damage: skill.stats.base_damage
                }}
                onClick={() => isAvailable && emitButtonClick(buttonSlug)}
                disabled={!isAvailable}
              />
            );
          }) || (
            <div className="col-span-2 flex items-center justify-center text-muted-foreground">
              No skills available
            </div>
          )}
        </div>
      </div>
    </div>
  )
}
```

Key changes made:
1. Simplified the skills rendering logic to remove unnecessary length check
2. Added a helper function `isSkillAvailable` to make the code more readable
3. Fixed the conditional rendering of the "No skills available" message
4. Ensured proper button slug formatting for skill interactions
5. Maintained proper typing and safety checks throughout the component

These changes should resolve the timeout issue by ensuring the UI simulator can properly interact with the skill buttons.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
