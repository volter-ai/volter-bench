Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
# Excerpt ID: 416d4025-5e88-4cf4-ac7b-54451151f9e6
```tsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Sword, Shield, Zap } from 'lucide-react'
import { CreatureCard } from "@/components/ui/custom/creature/creature_card"
import { PlayerCard } from "@/components/ui/custom/player/player_card"
import { SkillButton } from "@/components/ui/custom/skill/skill_button"

interface Skill {
  __type: "Skill"
  uid: string
  display_name: string
  description: string
  stats: {
    base_damage: number
  }
  meta: {
    prototype_id: string
  }
}

interface Creature {
  __type: "Creature"
  uid: string
  display_name: string
  description: string
  stats: {
    hp: number
    max_hp: number
    attack: number
    defense: number
    speed: number
  }
  meta: {
    prototype_id: string
  }
  collections: {
    skills: Skill[]
  }
}

interface Player {
  __type: "Player"
  uid: string
  display_name: string
  meta: {
    prototype_id: string
  }
  collections: {
    creatures: Creature[]
  }
}

interface GameUIData {
  entities: {
    player: Player
    opponent: Player
    player_creature: Creature
    opponent_creature: Creature
  }
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons()

  const { player, opponent, player_creature, opponent_creature } = props.data.entities

  if (!player || !opponent) {
    return <div className="h-screen bg-slate-900 text-white flex items-center justify-center">
      Loading players...
    </div>
  }

  return (
    <div className="grid grid-rows-[auto_1fr_auto] h-screen bg-slate-900 text-white">
      {/* HUD */}
      <nav className="bg-slate-800 p-4 flex justify-between items-center">
        <div className="flex items-center gap-4">
          <PlayerCard
            uid={player.uid}
            name={player.display_name}
            imageUrl={`/assets/players/${player.meta.prototype_id}.png`}
          />
        </div>
        <div className="flex items-center gap-4">
          <PlayerCard
            uid={opponent.uid}
            name={opponent.display_name}
            imageUrl={`/assets/players/${opponent.meta.prototype_id}.png`}
          />
        </div>
      </nav>

      {/* Battlefield */}
      <main className="flex justify-between items-center p-8 bg-slate-700">
        <div className="flex-1 flex justify-center">
          {player_creature && (
            <CreatureCard
              uid={player_creature.uid}
              name={player_creature.display_name}
              currentHp={player_creature.stats.hp}
              maxHp={player_creature.stats.max_hp}
              imageUrl={`/assets/creatures/${player_creature.meta.prototype_id}.png`}
            />
          )}
        </div>

        {player_creature && (
          <div className="flex gap-4">
            <div className="flex flex-col items-center gap-2">
              <Sword className="w-6 h-6" />
              <span>{player_creature.stats.attack}</span>
            </div>
            <div className="flex flex-col items-center gap-2">
              <Shield className="w-6 h-6" />
              <span>{player_creature.stats.defense}</span>
            </div>
            <div className="flex flex-col items-center gap-2">
              <Zap className="w-6 h-6" />
              <span>{player_creature.stats.speed}</span>
            </div>
          </div>
        )}

        <div className="flex-1 flex justify-center">
          {opponent_creature && (
            <CreatureCard
              uid={opponent_creature.uid}
              name={opponent_creature.display_name}
              currentHp={opponent_creature.stats.hp}
              maxHp={opponent_creature.stats.max_hp}
              imageUrl={`/assets/creatures/${opponent_creature.meta.prototype_id}.png`}
            />
          )}
        </div>
      </main>

      {/* UI Controls */}
      <div className="bg-slate-800 rounded-t-lg p-4">
        {player_creature?.collections.skills && player_creature.collections.skills.length > 0 ? (
          <div className="grid grid-cols-2 gap-4">
            {player_creature.collections.skills.map((skill) => (
              <SkillButton
                key={skill.uid}
                uid={skill.uid}
                name={skill.display_name}
                description={skill.description}
                damage={skill.stats.base_damage}
              />
            ))}
          </div>
        ) : (
          <div className="text-center py-4 text-slate-400">
            No skills available
          </div>
        )}
      </div>
    </div>
  )
}
```

Changes made:
1. Added proper interfaces including meta data with prototype_id
2. Image URLs now use prototype_id from meta data
3. Added null checks for player/opponent with loading state
4. Added proper null checking for creatures and skills
5. Added empty state for when no skills are available
6. Destructured entities at the start for cleaner code
7. Stats section only shows when player_creature exists
8. Removed hardcoded image paths in favor of structured asset paths
9. All custom components receive their uid props directly from the data

The code now properly handles:
- Missing data
- Empty states
- Proper image asset paths
- Type safety
- Consistent uid prop passing

All custom components (PlayerCard, CreatureCard, SkillButton) receive their required uid props directly from the data structure's uid field, maintaining the component contract.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
