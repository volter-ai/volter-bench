Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and provide a solution.

**Issue Description:**
1. The UI simulator is timing out after 120s, suggesting that the interactive elements (buttons) are not properly functioning
2. Looking at the image, I can see the skill button "Tackle" is visible but appears to be in a disabled state (gray)
3. The code shows that skill buttons should be clickable when their UIDs are in `availableButtonSlugs`, but the click handling is not implemented

The main problem appears to be that while we're checking if buttons should be disabled, we're not actually implementing the click handler to emit the button clicks.

**Proposed Solution:**
1. Add an `onClick` handler to the `SkillButton` component that calls `emitButtonClick` with the skill's UID when clicked
2. Ensure the button is only clickable when it's enabled (in `availableButtonSlugs`)
3. Maintain all existing functionality while adding this critical interaction piece

Here's the complete implementation:

# Excerpt ID: 4c05b6d1-7537-4c1e-b758-be925478f4c2
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Shield, Swords } from 'lucide-react'
import { CreatureCard } from "@/components/ui/custom/creature/creature_card"
import { SkillButton } from "@/components/ui/custom/skill/skill_button"
import { PlayerCard } from "@/components/ui/custom/player/player_card"

interface Skill {
  __type: "Skill"
  uid: string
  display_name: string
  description: string
  stats: {
    damage: number
  }
}

interface Creature {
  __type: "Creature"
  uid: string
  display_name: string
  description: string
  stats: {
    hp: number
    max_hp: number
  }
  collections: {
    skills: Skill[]
  }
}

interface Player {
  __type: "Player"
  uid: string
  display_name: string
  description: string
  collections: {
    creatures: Creature[]
  }
}

interface GameUIData {
  entities: {
    player: Player
    bot: Player
    player_creature: Creature
    bot_creature: Creature
  }
  collections: {
    queued_skills: Skill[]
  }
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons()

  const { player, bot, player_creature, bot_creature } = props.data?.entities || {}

  if (!player || !bot || !player_creature || !bot_creature) {
    return <div className="text-center p-4">Loading battle...</div>
  }

  const handleSkillClick = (skillUid: string) => {
    if (availableButtonSlugs.includes(skillUid)) {
      emitButtonClick(skillUid)
    }
  }

  return (
    <div className="h-screen w-screen bg-background">
      <div className="container mx-auto aspect-video">
        <div className="grid grid-rows-[auto_1fr_auto] h-full">
          {/* Top HUD */}
          <div className="flex justify-between items-center p-4 bg-muted">
            <PlayerCard
              uid={player.uid}
              name={player.display_name}
              imageUrl="/placeholder-player.png"
            />
            <div className="flex items-center gap-2">
              <Shield className="w-6 h-6" />
              <span>Battle Scene</span>
            </div>
            <PlayerCard
              uid={bot.uid}
              name={bot.display_name}
              imageUrl="/placeholder-bot.png"
            />
          </div>

          {/* Battlefield */}
          <div className="flex justify-between items-center px-8 py-4">
            <div className="relative">
              <CreatureCard
                uid={player_creature.uid}
                name={player_creature.display_name}
                hp={player_creature.stats.hp}
                maxHp={player_creature.stats.max_hp}
                imageUrl="/placeholder-creature.png"
                className="relative"
              />
              <div className="absolute -bottom-6 left-1/2 -translate-x-1/2 bg-primary text-primary-foreground px-3 py-1 rounded-full">
                Player
              </div>
            </div>

            <Swords className="w-8 h-8" />

            <div className="relative">
              <CreatureCard
                uid={bot_creature.uid}
                name={bot_creature.display_name}
                hp={bot_creature.stats.hp}
                maxHp={bot_creature.stats.max_hp}
                imageUrl="/placeholder-creature.png"
                className="relative"
              />
              <div className="absolute -bottom-6 left-1/2 -translate-x-1/2 bg-destructive text-destructive-foreground px-3 py-1 rounded-full">
                Opponent
              </div>
            </div>
          </div>

          {/* Skills UI */}
          <div className="p-4 bg-muted">
            <div className="grid grid-cols-4 gap-4">
              {player_creature.collections?.skills?.length > 0 ? (
                player_creature.collections.skills.map((skill: Skill) => (
                  <SkillButton
                    key={skill.uid}
                    uid={skill.uid}
                    name={skill.display_name}
                    description={skill.description}
                    stats={`Damage: ${skill.stats.damage}`}
                    disabled={!availableButtonSlugs.includes(skill.uid)}
                    onClick={() => handleSkillClick(skill.uid)}
                  />
                ))
              ) : (
                <div className="col-span-4 text-center text-muted-foreground">
                  No skills available
                </div>
              )}
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}
```

The key changes made are:
1. Added a `handleSkillClick` function that checks if the skill is available before emitting the click
2. Added an `onClick` prop to the `SkillButton` component that calls `handleSkillClick`
3. Maintained all existing functionality while adding the critical click handling

This should resolve the timeout issue by properly implementing the button interaction that the UI simulator is expecting.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
