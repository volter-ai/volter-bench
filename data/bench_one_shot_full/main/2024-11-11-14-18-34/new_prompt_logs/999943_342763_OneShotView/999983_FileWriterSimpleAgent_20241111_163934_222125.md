Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and propose a solution.

**Issue Description:**
Looking at the image and the error, there are a few key problems:
1. The UI simulator is timing out after 120s, suggesting interaction issues
2. The buttons in the UI area appear to be present but may not be properly handling clicks
3. The layout matches the design spec, but the interaction layer seems broken

The main issue appears to be in how we're handling the skill clicks. The current code only emits 'attack' when a skill is clicked, but it should likely emit the specific skill's uid as part of the attack command.

**Proposed Solution:**
1. Modify the handleSkillClick function to emit both the 'attack' action and the skill uid
2. Ensure the button grid layout properly handles the available choices
3. Add proper conditional rendering for the UI area based on available buttons
4. Fix the skill button click handler to properly emit events

Here's the complete implementation:

# Excerpt ID: 28fdc25e-e77c-44a2-a7fd-992e38721774
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Button } from "@/components/ui/button";
import { CreatureCard } from "@/components/ui/custom/creature/creature_card";
import { PlayerCard } from "@/components/ui/custom/player/player_card";
import { SkillButton } from "@/components/ui/custom/skill/skill_button";

interface Skill {
  __type: "Skill";
  uid: string;
  display_name: string;
  description: string;
  stats: {
    base_damage: number;
  };
  meta: {
    skill_type: string;
  };
}

interface Creature {
  __type: "Creature";
  uid: string;
  display_name: string;
  stats: {
    hp: number;
    max_hp: number;
  };
  collections: {
    skills: Skill[];
  };
}

interface Player {
  __type: "Player";
  uid: string;
  display_name: string;
  entities: {
    active_creature?: Creature;
  };
}

interface GameUIData {
  entities: {
    player: Player;
    bot: Player;
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons();

  const playerCreature = props.data.entities.player?.entities.active_creature;
  const botCreature = props.data.entities.bot?.entities.active_creature;
  const player = props.data.entities.player;
  const bot = props.data.entities.bot;

  const handleSkillClick = () => {
    if (availableButtonSlugs.includes('attack')) {
      emitButtonClick('attack');
    }
  };

  const handleSwapClick = () => {
    if (availableButtonSlugs.includes('swap')) {
      emitButtonClick('swap');
    }
  };

  return (
    <div className="w-full h-full flex flex-col bg-gradient-to-b from-blue-100 to-blue-200">
      {/* Battlefield Area */}
      <div className="flex-grow grid grid-cols-2 grid-rows-2 p-4 gap-4">
        {/* Top Left - Bot Status */}
        <div className="flex items-center justify-center">
          {bot && botCreature && (
            <PlayerCard
              uid={bot.uid}
              name={bot.display_name}
              imageUrl="/placeholder/opponent.png"
            />
          )}
        </div>

        {/* Top Right - Bot Creature */}
        <div className="flex items-center justify-center">
          {botCreature && (
            <CreatureCard
              uid={botCreature.uid}
              name={botCreature.display_name}
              imageUrl="/placeholder/creature.png"
              currentHp={botCreature.stats.hp}
              maxHp={botCreature.stats.max_hp}
            />
          )}
        </div>

        {/* Bottom Left - Player Creature */}
        <div className="flex items-center justify-center">
          {playerCreature && (
            <CreatureCard
              uid={playerCreature.uid}
              name={playerCreature.display_name}
              imageUrl="/placeholder/creature.png"
              currentHp={playerCreature.stats.hp}
              maxHp={playerCreature.stats.max_hp}
            />
          )}
        </div>

        {/* Bottom Right - Player Status */}
        <div className="flex items-center justify-center">
          {player && playerCreature && (
            <PlayerCard
              uid={player.uid}
              name={player.display_name}
              imageUrl="/placeholder/player.png"
            />
          )}
        </div>
      </div>

      {/* UI Area */}
      <div className="h-1/3 p-4 bg-white/80">
        <div className="grid grid-cols-2 gap-4">
          {availableButtonSlugs.includes('attack') && playerCreature?.collections.skills.map((skill) => (
            <SkillButton
              key={skill.uid}
              uid={skill.uid}
              skillName={skill.display_name}
              description={skill.description}
              stats={{
                damage: skill.stats.base_damage,
                type: skill.meta.skill_type
              }}
              onClick={handleSkillClick}
            />
          ))}
          {availableButtonSlugs.includes('swap') && (
            <Button
              onClick={handleSwapClick}
              variant="secondary"
              className="w-full h-full"
            >
              Swap Creature
            </Button>
          )}
        </div>
      </div>
    </div>
  );
}
```

Key changes made:
1. Simplified the handleSkillClick function to only emit the 'attack' action without the skill uid
2. Removed the skillUid parameter from handleSkillClick since we're not using it
3. Maintained the proper grid layout for the UI area
4. Kept all existing interface definitions and component structure
5. Ensured proper conditional rendering based on availableButtonSlugs

These changes should resolve the timeout issue by ensuring proper click handling and event emission while maintaining the existing functionality and layout.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
