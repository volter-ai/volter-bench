Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and propose a solution.

**Issue Description:**
Looking at the image and the error, there appear to be several problems:
1. The UI simulator is timing out after 120s, suggesting it can't find or interact with clickable elements
2. The bottom third of the screen, which should show the skill buttons in a 2x2 grid, appears to be empty
3. The creature images and status cards are visible but seem to be positioned incorrectly
4. The layout doesn't match the design document's specifications for the battlefield display

**Proposed Solution:**
1. Fix the skill buttons rendering logic - the current OR condition with the empty div is causing issues
2. Adjust the grid layout to properly position elements according to the design document
3. Ensure proper z-indexing and positioning of elements
4. Add proper error handling for the skills collection

Here's the implementation:

# Excerpt ID: 16a3336d-a93d-450e-8b46-6a0bbbcee443
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Shield, Sword } from 'lucide-react'
import { CreatureCard } from "@/components/ui/custom/creature/creature_card"
import { SkillButton } from "@/components/ui/custom/skill/skill_button"
import { PlayerCard } from "@/components/ui/custom/player/player_card"

interface Creature {
  __type: "Creature"
  uid: string
  display_name: string
  description: string
  stats: {
    hp: number
    max_hp: number
  }
  meta: {
    creature_type: string
  }
  collections?: {
    skills?: Skill[]
  }
}

interface Skill {
  __type: "Skill"
  uid: string
  display_name: string
  description: string
  stats: {
    base_damage: number
  }
  meta: {
    skill_type: string
  }
}

interface Player {
  __type: "Player"
  uid: string
  display_name: string
}

interface GameUIData {
  entities: {
    player: Player
    opponent: Player
    player_creature?: Creature
    opponent_creature?: Creature
  }
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons()

  const { player, opponent, player_creature, opponent_creature } = props.data.entities

  if (!player_creature || !opponent_creature) {
    return <div className="w-full h-full flex items-center justify-center">
      Loading battle...
    </div>
  }

  const handleSkillClick = (skillUid: string) => {
    if (availableButtonSlugs.includes(skillUid)) {
      emitButtonClick(skillUid)
    }
  }

  return (
    <div className="relative w-full h-full flex flex-col overflow-hidden">
      {/* Battlefield Area */}
      <div className="flex-grow grid grid-cols-2 grid-rows-2 p-4 gap-4 bg-gradient-to-b from-sky-900/20 to-sky-800/20">
        {/* Opponent Status (Top Left) */}
        <div className="flex flex-col gap-2 items-start justify-start">
          <PlayerCard
            uid={opponent.uid}
            name={opponent.display_name}
            imageUrl="/players/opponent.png"
            className="w-full max-w-[250px]"
          />
          <CreatureCard
            uid={opponent_creature.uid}
            name={opponent_creature.display_name}
            image={`/creatures/${opponent_creature.meta.creature_type}.png`}
            currentHp={opponent_creature.stats.hp}
            maxHp={opponent_creature.stats.max_hp}
            className="w-full max-w-[250px]"
          />
        </div>

        {/* Opponent Creature (Top Right) */}
        <div className="flex items-center justify-center">
          <div className="relative w-40 h-40">
            <img 
              src={`/creatures/${opponent_creature.meta.creature_type}_front.png`}
              alt={opponent_creature.display_name}
              className="w-full h-full object-contain"
              onError={(e) => {
                e.currentTarget.src = "/creatures/fallback.png"
              }}
            />
            <div className="absolute bottom-0 w-full h-4 bg-black/20 rounded-full blur-sm transform translate-y-2" />
          </div>
        </div>

        {/* Player Creature (Bottom Left) */}
        <div className="flex items-center justify-center">
          <div className="relative w-40 h-40">
            <img 
              src={`/creatures/${player_creature.meta.creature_type}_back.png`}
              alt={player_creature.display_name}
              className="w-full h-full object-contain"
              onError={(e) => {
                e.currentTarget.src = "/creatures/fallback.png"
              }}
            />
            <div className="absolute bottom-0 w-full h-4 bg-black/20 rounded-full blur-sm transform translate-y-2" />
          </div>
        </div>

        {/* Player Status (Bottom Right) */}
        <div className="flex flex-col gap-2 items-end justify-end">
          <PlayerCard
            uid={player.uid}
            name={player.display_name}
            imageUrl="/players/player.png"
            className="w-full max-w-[250px]"
          />
          <CreatureCard
            uid={player_creature.uid}
            name={player_creature.display_name}
            image={`/creatures/${player_creature.meta.creature_type}.png`}
            currentHp={player_creature.stats.hp}
            maxHp={player_creature.stats.max_hp}
            className="w-full max-w-[250px]"
          />
        </div>
      </div>

      {/* UI Area */}
      <div className="h-1/3 min-h-[200px] grid grid-cols-2 gap-4 p-4 bg-gray-900/20">
        {(player_creature.collections?.skills?.length ?? 0) > 0 ? (
          player_creature.collections?.skills?.map((skill: Skill) => (
            <SkillButton
              key={skill.uid}
              uid={skill.uid}
              skillName={skill.display_name}
              description={skill.description}
              damage={skill.stats.base_damage}
              type={skill.meta.skill_type}
              className="w-full h-full max-h-24"
              disabled={!availableButtonSlugs.includes(skill.uid)}
              onClick={() => handleSkillClick(skill.uid)}
            />
          ))
        ) : (
          <div className="col-span-2 flex items-center justify-center text-gray-400">
            No skills available
          </div>
        )}
      </div>
    </div>
  )
}
```

Key changes made:
1. Fixed the skills rendering logic to properly handle the empty case
2. Adjusted creature positioning with better flex alignment
3. Increased creature image sizes for better visibility
4. Removed overflow-hidden from status containers
5. Improved conditional rendering of skills section

These changes should resolve the timeout issue by ensuring the UI elements are properly rendered and interactive.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
