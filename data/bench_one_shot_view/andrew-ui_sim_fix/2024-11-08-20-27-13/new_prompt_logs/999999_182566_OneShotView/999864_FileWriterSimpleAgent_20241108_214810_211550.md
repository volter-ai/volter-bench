Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and propose a solution.

**Issue Description:**
Looking at the image and error, there appear to be several problems:
1. The UI simulator is timing out after 120s, suggesting it can't interact with the buttons properly
2. The skill buttons in the bottom UI area don't seem to be properly handling click events
3. The layout appears to be missing the skill buttons or they're not visible/clickable

The main issue seems to be that the SkillButton components aren't properly connected to the click handling system, which is causing the UI simulator to fail because it can't interact with the choices.

**Proposed Solution:**
1. Add onClick handlers to the SkillButton components that use emitButtonClick
2. Ensure the skill buttons are properly rendered and clickable
3. Add proper handling for the skill button states based on availableButtonSlugs

Here's the implementation:

# Excerpt ID: 3fcd7500-57fc-413b-884f-87a3b872c9ba
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Shield, Sword } from 'lucide-react'
import { CreatureCard } from "@/components/ui/custom/creature/creature_card"
import { SkillButton } from "@/components/ui/custom/skill/skill_button"
import { PlayerCard } from "@/components/ui/custom/player/player_card"

interface Creature {
  __type: "Creature"
  uid: string
  display_name: string
  description: string
  stats: {
    hp: number
    max_hp: number
  }
  meta: {
    creature_type: string
  }
  collections?: {
    skills?: Skill[]
  }
}

interface Skill {
  __type: "Skill"
  uid: string
  display_name: string
  description: string
  stats: {
    base_damage: number
  }
  meta: {
    skill_type: string
  }
}

interface Player {
  __type: "Player"
  uid: string
  display_name: string
}

interface GameUIData {
  entities: {
    player: Player
    opponent: Player
    player_creature?: Creature
    opponent_creature?: Creature
  }
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons()

  const { player, opponent, player_creature, opponent_creature } = props.data.entities

  if (!player_creature || !opponent_creature) {
    return <div className="w-full h-full flex items-center justify-center">
      Loading battle...
    </div>
  }

  const handleSkillClick = (skillUid: string) => {
    if (availableButtonSlugs.includes(skillUid)) {
      emitButtonClick(skillUid)
    }
  }

  return (
    <div className="relative w-full h-full flex flex-col">
      {/* Battlefield Area */}
      <div className="flex-grow grid grid-cols-2 grid-rows-2 p-4 gap-4 bg-gradient-to-b from-sky-900/20 to-sky-800/20">
        {/* Opponent Status (Top Left) */}
        <div className="flex flex-col gap-2 items-start justify-start">
          <PlayerCard
            uid={opponent.uid}
            name={opponent.display_name}
            imageUrl="/players/opponent.png"
            className="w-[250px]"
          />
          <CreatureCard
            uid={opponent_creature.uid}
            name={opponent_creature.display_name}
            image={`/creatures/${opponent_creature.meta.creature_type}.png`}
            currentHp={opponent_creature.stats.hp}
            maxHp={opponent_creature.stats.max_hp}
            className="w-[250px]"
          />
        </div>

        {/* Opponent Creature (Top Right) */}
        <div className="flex items-start justify-end">
          <div className="relative">
            <img 
              src={`/creatures/${opponent_creature.meta.creature_type}_front.png`}
              alt={opponent_creature.display_name}
              className="w-48 h-48 object-contain"
              onError={(e) => {
                e.currentTarget.src = "/creatures/fallback.png"
              }}
            />
            <div className="absolute bottom-0 w-full h-8 bg-black/20 rounded-full blur-sm transform translate-y-2" />
          </div>
        </div>

        {/* Player Creature (Bottom Left) */}
        <div className="flex items-end justify-start">
          <div className="relative">
            <img 
              src={`/creatures/${player_creature.meta.creature_type}_back.png`}
              alt={player_creature.display_name}
              className="w-48 h-48 object-contain"
              onError={(e) => {
                e.currentTarget.src = "/creatures/fallback.png"
              }}
            />
            <div className="absolute bottom-0 w-full h-8 bg-black/20 rounded-full blur-sm transform translate-y-2" />
          </div>
        </div>

        {/* Player Status (Bottom Right) */}
        <div className="flex flex-col gap-2 items-end justify-end">
          <PlayerCard
            uid={player.uid}
            name={player.display_name}
            imageUrl="/players/player.png"
            className="w-[250px]"
          />
          <CreatureCard
            uid={player_creature.uid}
            name={player_creature.display_name}
            image={`/creatures/${player_creature.meta.creature_type}.png`}
            currentHp={player_creature.stats.hp}
            maxHp={player_creature.stats.max_hp}
            className="w-[250px]"
          />
        </div>
      </div>

      {/* UI Area */}
      <div className="h-1/3 grid grid-cols-2 gap-4 p-4 bg-gray-900/20">
        {player_creature.collections?.skills?.map((skill: Skill) => (
          <SkillButton
            key={skill.uid}
            uid={skill.uid}
            skillName={skill.display_name}
            description={skill.description}
            damage={skill.stats.base_damage}
            type={skill.meta.skill_type}
            className="w-full h-full text-lg"
            disabled={!availableButtonSlugs.includes(skill.uid)}
            onClick={() => handleSkillClick(skill.uid)}
          />
        )) || (
          <div className="col-span-2 flex items-center justify-center text-gray-400">
            No skills available
          </div>
        )}
      </div>
    </div>
  )
}
```

Key changes made:
1. Added handleSkillClick function to properly handle skill button clicks
2. Removed the unnecessary type check for skill.__type === "Skill"
3. Added onClick handler to SkillButton components
4. Simplified the skills mapping logic

These changes should resolve the timeout issue by properly connecting the skill buttons to the click handling system and ensuring they're properly rendered and interactive.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
