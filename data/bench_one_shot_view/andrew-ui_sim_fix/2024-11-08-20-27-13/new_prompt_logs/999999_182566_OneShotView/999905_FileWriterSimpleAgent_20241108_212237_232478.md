Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and propose a solution.

**Problem Description:**
Looking at the image and the error, there are a few key issues:
1. The skills UI section at the bottom appears to be empty or not rendering properly
2. The timeout error suggests that the UI simulator couldn't find clickable elements
3. The creature stats cards are visible but might not be properly positioned
4. The error indicates connection issues with source maps, but this is likely unrelated to the UI functionality

The main functional issue seems to be that the skills buttons are not being properly rendered or are not clickable, leading to the timeout error in the UI simulator.

**Proposed Solution:**
1. Add a fallback for when there are no available skills to prevent an empty UI
2. Ensure the skills grid is properly visible and accessible
3. Add proper button accessibility attributes
4. Improve the layout structure to ensure all elements are properly positioned
5. Add error boundaries for skill rendering

Here's the implementation:

# Excerpt ID: eccee85b-2988-4574-8090-50645a83cb6a
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Sword, Shield, Zap, Heart } from 'lucide-react';
import { Card } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Progress } from "@/components/ui/progress";

interface Creature {
  uid: string;
  display_name: string;
  description: string;
  stats: {
    hp: number;
    max_hp: number;
    attack: number;
    defense: number;
    speed: number;
  };
  collections: {
    skills: Skill[];
  };
}

interface Skill {
  uid: string;
  display_name: string;
  description: string;
  stats: {
    base_damage: number;
  };
  meta: {
    prototype_id: string;
  };
}

interface GameUIData {
  entities: {
    player: {
      uid: string;
      stats: Record<string, number>;
    };
    opponent: {
      uid: string;
      stats: Record<string, number>;
    };
    player_creature: Creature;
    opponent_creature: Creature;
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons();

  const playerCreature = props.data?.entities?.player_creature;
  const opponentCreature = props.data?.entities?.opponent_creature;

  if (!playerCreature || !opponentCreature) {
    return <div className="w-full h-screen flex items-center justify-center">
      Loading battle...
    </div>;
  }

  const renderCreatureStats = (creature: Creature, isPlayer: boolean) => (
    <Card className={`p-4 ${isPlayer ? 'mr-8' : 'ml-8'} w-64`}>
      <div className="flex flex-col gap-2">
        <h2 className="text-xl font-bold">{creature.display_name}</h2>
        <div className="w-full">
          <Progress 
            value={(creature.stats.hp / creature.stats.max_hp) * 100}
            className="h-2"
          />
          <span className="text-sm">
            {creature.stats.hp}/{creature.stats.max_hp} HP
          </span>
        </div>
        <div className="flex gap-4 mt-2">
          <div className="flex items-center">
            <Sword className="w-4 h-4 mr-1" />
            {creature.stats.attack}
          </div>
          <div className="flex items-center">
            <Shield className="w-4 h-4 mr-1" />
            {creature.stats.defense}
          </div>
          <div className="flex items-center">
            <Zap className="w-4 h-4 mr-1" />
            {creature.stats.speed}
          </div>
        </div>
      </div>
    </Card>
  );

  const availableSkills = playerCreature.collections.skills.filter(skill => 
    availableButtonSlugs.includes(`skill-${skill.meta.prototype_id}`)
  );

  return (
    <div className="w-full h-screen flex flex-col">
      {/* HUD */}
      <Card className="w-full p-4 rounded-none bg-black/30">
        <div className="flex justify-between items-center">
          <span className="text-white">Battle Scene</span>
          <Heart className="text-red-500" />
        </div>
      </Card>

      {/* Battlefield */}
      <div className="flex-1 flex items-center justify-center gap-24 bg-gradient-to-b from-blue-900 to-blue-800">
        <div className="flex items-center">
          {renderCreatureStats(playerCreature, true)}
        </div>
        <div className="flex items-center">
          {renderCreatureStats(opponentCreature, false)}
        </div>
      </div>

      {/* Skills UI */}
      <Card className="min-h-[250px] bg-black/40 p-4 rounded-t-xl rounded-b-none">
        {availableSkills.length > 0 ? (
          <div className="grid grid-cols-2 gap-4">
            {availableSkills.map((skill) => (
              <Button
                key={skill.uid}
                onClick={() => emitButtonClick(`skill-${skill.meta.prototype_id}`)}
                variant="secondary"
                className="h-auto flex flex-col items-start p-4"
                role="button"
                aria-label={`Use ${skill.display_name}`}
              >
                <h3 className="font-bold">{skill.display_name}</h3>
                <p className="text-sm opacity-80">{skill.description}</p>
                <span className="text-xs">Damage: {skill.stats.base_damage}</span>
              </Button>
            ))}
          </div>
        ) : (
          <div className="flex items-center justify-center h-full">
            <p className="text-gray-400">Waiting for available actions...</p>
          </div>
        )}
      </Card>
    </div>
  );
}
```

Key changes made:
1. Moved background gradient to battlefield section only
2. Added proper accessibility attributes to buttons
3. Pre-filtered available skills
4. Added fallback UI for when no skills are available
5. Improved button click handling
6. Added proper role and aria-label attributes for accessibility

These changes should resolve the timeout issues by ensuring the skills are properly rendered and clickable, while maintaining the existing functionality and design.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
