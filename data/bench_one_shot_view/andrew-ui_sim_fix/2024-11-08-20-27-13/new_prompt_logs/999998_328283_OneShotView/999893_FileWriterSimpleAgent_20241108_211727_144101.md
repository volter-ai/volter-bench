Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and propose a solution.

DIAGNOSIS:
Looking at the image and comparing it to the code, there are several issues:

1. The creature cards are not properly positioned - they should be on opposite sides but appear to be overlapping or misaligned
2. The skills UI section at the bottom appears to be missing or not visible
3. The timeout error suggests that the UI simulator cannot find clickable elements, likely because the skill buttons are not properly rendered or accessible

The main problems appear to be:

1. Layout issues in the battlefield section - the flex layout is not correctly spacing the creatures
2. The skills UI may be getting cut off due to the fixed height (h-2/5)
3. The button rendering logic may be preventing buttons from appearing

PROPOSED SOLUTION:

1. Fix the battlefield layout by:
   - Adjusting the flex container to use proper spacing
   - Moving the labels (Player/Opponent) into the cards
   - Using proper margin/padding

2. Adjust the skills UI by:
   - Making the height more flexible
   - Ensuring buttons are always rendered if they exist
   - Removing the conditional rendering based on availableButtonSlugs

3. Improve button accessibility by:
   - Ensuring buttons have proper sizing and spacing
   - Making the click targets more accessible

Here's the implementation:

# Excerpt ID: 746c0c88-e869-48b9-902f-1528f61a9b6f
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Sword, Shield, Zap, Heart } from 'lucide-react';
import { Card } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Progress } from "@/components/ui/progress";

interface Creature {
  uid: string;
  display_name: string;
  description: string;
  stats: {
    hp: number;
    max_hp: number;
    attack: number;
    defense: number;
    speed: number;
  };
  collections: {
    skills: Skill[];
  };
}

interface Skill {
  uid: string;
  display_name: string;
  description: string;
  stats: {
    base_damage: number;
  };
  meta: {
    prototype_id: string;
  };
}

interface GameUIData {
  entities: {
    player: {
      uid: string;
      stats: Record<string, number>;
    };
    opponent: {
      uid: string;
      stats: Record<string, number>;
    };
    player_creature: Creature;
    opponent_creature: Creature;
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons();

  const playerCreature = props.data?.entities?.player_creature;
  const opponentCreature = props.data?.entities?.opponent_creature;

  if (!playerCreature || !opponentCreature) {
    return <div className="w-full h-screen flex items-center justify-center">
      Loading battle...
    </div>;
  }

  const renderCreatureStats = (creature: Creature, isPlayer: boolean) => (
    <Card className={`p-4 ${isPlayer ? 'mr-auto' : 'ml-auto'} w-[300px]`}>
      <div className="flex flex-col gap-2">
        <div className="text-center mb-2">{isPlayer ? "Player" : "Opponent"}</div>
        <h2 className="text-xl font-bold">{creature.display_name}</h2>
        <div className="w-full">
          <Progress 
            value={(creature.stats.hp / creature.stats.max_hp) * 100}
            className="h-2"
          />
          <span className="text-sm">
            {creature.stats.hp}/{creature.stats.max_hp} HP
          </span>
        </div>
        <div className="flex gap-4 mt-2">
          <div className="flex items-center">
            <Sword className="w-4 h-4 mr-1" />
            {creature.stats.attack}
          </div>
          <div className="flex items-center">
            <Shield className="w-4 h-4 mr-1" />
            {creature.stats.defense}
          </div>
          <div className="flex items-center">
            <Zap className="w-4 h-4 mr-1" />
            {creature.stats.speed}
          </div>
        </div>
      </div>
    </Card>
  );

  return (
    <div className="w-full h-screen flex flex-col bg-gradient-to-b from-blue-900 to-blue-800">
      <Card className="w-full rounded-none bg-black/30">
        <div className="flex justify-between items-center p-4">
          <span className="text-white">Battle Scene</span>
          <Heart className="text-red-500" />
        </div>
      </Card>

      <div className="flex-1 flex items-center px-8">
        <div className="w-1/2 flex justify-start">
          {renderCreatureStats(playerCreature, true)}
        </div>
        <div className="w-1/2 flex justify-end">
          {renderCreatureStats(opponentCreature, false)}
        </div>
      </div>

      <Card className="min-h-[200px] max-h-[40vh] bg-black/40 rounded-t-xl rounded-b-none overflow-y-auto">
        <div className="grid grid-cols-2 gap-4 p-4">
          {playerCreature.collections.skills.map((skill) => {
            const buttonId = `-${skill.meta.prototype_id}`;
            const isAvailable = availableButtonSlugs.includes(buttonId);
            
            return (
              <Button
                key={skill.uid}
                onClick={() => isAvailable && emitButtonClick(buttonId)}
                variant="secondary"
                className="h-auto flex flex-col items-start p-4"
                disabled={!isAvailable}
              >
                <h3 className="font-bold">{skill.display_name}</h3>
                <p className="text-sm opacity-80">{skill.description}</p>
                <span className="text-xs">Damage: {skill.stats.base_damage}</span>
              </Button>
            );
          })}
        </div>
      </Card>
    </div>
  );
}
```

These changes should resolve the UI simulator issues by making the layout more robust and the buttons more accessible.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
