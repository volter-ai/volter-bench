Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and propose a solution.

**Issue Description:**
Looking at the image and error, there appear to be several problems:

1. The UI simulator is timing out after 120s, suggesting it cannot interact with the buttons properly
2. The skills section shows only one button ("Tackle") when there should potentially be more
3. The error suggests connection issues with source maps, but this is likely a symptom rather than the core issue
4. The layout appears correct, but the interaction layer seems to be failing

The main issue appears to be related to the button interaction system. The `handleSkillClick` function may not be properly handling the button clicks or the `availableButtonSlugs` might not be properly synchronized.

**Proposed Solution:**

1. Modify the skill button rendering to ensure proper click handling
2. Add proper null checks for the skills array
3. Ensure the button slugs are properly mapped to skills
4. Add error boundaries around the skills section
5. Ensure the grid layout properly contains all buttons

**Implementation:**

# Excerpt ID: 81cbba4b-454a-4459-814e-fdf6a48c49cb
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Sword, Shield } from 'lucide-react';
import { CreatureCard } from "@/components/ui/custom/creature/creature_card";
import { PlayerCard } from "@/components/ui/custom/player/player_card";
import { SkillButton } from "@/components/ui/custom/skill/skill_button";

interface Skill {
  __type: "Skill";
  uid: string;
  display_name: string;
  description: string;
  stats: {
    damage: number;
  };
  meta: {
    prototype_id: string;
  };
}

interface Creature {
  __type: "Creature";
  uid: string;
  display_name: string;
  description: string;
  stats: {
    hp: number;
    max_hp: number;
  };
  collections: {
    skills: Skill[];
  };
  meta: {
    prototype_id: string;
  };
}

interface Player {
  __type: "Player";
  uid: string;
  display_name: string;
  collections: {
    creatures: Creature[];
  };
  meta: {
    prototype_id: string;
  };
}

interface GameUIData {
  entities: {
    player: Player;
    foe: Player;
    player_creature: Creature;
    foe_creature: Creature;
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons();

  const { player, foe, player_creature, foe_creature } = props.data.entities;

  const getImageUrl = (type: string, id: string) => `/assets/${type}/${id}.png`;

  const handleSkillClick = (skillUid: string) => {
    if (availableButtonSlugs?.includes(skillUid)) {
      emitButtonClick(skillUid);
    }
  };

  const renderSkills = () => {
    const skills = player_creature?.collections?.skills;
    
    if (!Array.isArray(skills) || skills.length === 0) {
      return (
        <div className="col-span-3 text-center text-white">
          No skills available
        </div>
      );
    }

    return (
      <div className="grid grid-cols-3 gap-4 w-full">
        {skills.map((skill) => (
          <SkillButton
            key={skill.uid}
            uid={skill.uid}
            name={skill.display_name}
            description={skill.description}
            stats={`Damage: ${skill.stats.damage}`}
            disabled={!availableButtonSlugs?.includes(skill.uid)}
            onClick={() => handleSkillClick(skill.uid)}
          />
        ))}
      </div>
    );
  };

  return (
    <div className="h-screen w-screen bg-slate-900">
      <div className="container mx-auto h-full aspect-video grid grid-rows-[auto_1fr_auto] gap-4 p-4">
        {/* HUD */}
        <nav className="flex justify-between items-center bg-slate-800 rounded-lg p-4">
          {player && (
            <PlayerCard
              uid={player.uid}
              name={player.display_name}
              imageUrl={getImageUrl('player', player.meta.prototype_id)}
            />
          )}
          <div className="flex gap-4">
            <Sword className="w-6 h-6 text-white" />
            <Shield className="w-6 h-6 text-white" />
          </div>
          {foe && (
            <PlayerCard
              uid={foe.uid}
              name={foe.display_name}
              imageUrl={getImageUrl('player', foe.meta.prototype_id)}
            />
          )}
        </nav>

        {/* Battlefield */}
        <div className="flex justify-between items-center px-8">
          {player_creature && (
            <div className="relative">
              <span className="absolute -top-8 left-1/2 -translate-x-1/2 text-white">Player</span>
              <CreatureCard
                uid={player_creature.uid}
                name={player_creature.display_name}
                hp={player_creature.stats.hp}
                maxHp={player_creature.stats.max_hp}
                imageUrl={getImageUrl('creature', player_creature.meta.prototype_id)}
              />
            </div>
          )}

          {foe_creature && (
            <div className="relative">
              <span className="absolute -top-8 left-1/2 -translate-x-1/2 text-white">Opponent</span>
              <CreatureCard
                uid={foe_creature.uid}
                name={foe_creature.display_name}
                hp={foe_creature.stats.hp}
                maxHp={foe_creature.stats.max_hp}
                imageUrl={getImageUrl('creature', foe_creature.meta.prototype_id)}
              />
            </div>
          )}
        </div>

        {/* Skills UI */}
        <div className="bg-slate-800 rounded-lg p-4">
          {renderSkills()}
        </div>
      </div>
    </div>
  );
}
```

Key changes made:
1. Added proper null checking for `availableButtonSlugs`
2. Restructured the skills rendering to ensure proper grid layout
3. Added proper type checking for the skills array
4. Improved the button container layout
5. Added text color to the HUD icons
6. Simplified the skills grid structure

These changes should resolve the timeout issues by ensuring the buttons are properly rendered and clickable, while maintaining the existing functionality and layout.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
