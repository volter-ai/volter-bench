Role: system
Content: You are an expert front-end dev who specializes in debugging React UIs.

Your first and foremost concern is to return all code to functional parity. You will have an issue shown to you, with a
picture, please diagnose and fix the code while leaving it as close to the original as possible.
__________________
Role: user
Content: Here is the current state of my file:

import { useCurrentButtons, useThingInteraction } from "@/lib/useChoices.ts";
import { Card } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Alert, AlertTitle, AlertDescription } from "@/components/ui/alert";
import { Sword, ArrowLeft, Repeat } from 'lucide-react';

interface Creature {
  uid: string;
  display_name: string;
  stats: {
    hp: number;
    max_hp: number;
  };
  meta: {
    creature_type: string;
  };
}

interface Player {
  uid: string;
  entities: {
    active_creature: Creature;
  };
}

interface GameUIData {
  entities: {
    player: Player;
    bot: Player;
  };
}

const CreatureDisplay: React.FC<{ creature: Creature; isPlayer: boolean }> = ({ creature, isPlayer }) => (
  <div className={`flex flex-col items-center ${isPlayer ? 'justify-end' : 'justify-start'}`}>
    <div className="w-32 h-32 bg-gray-300 rounded-full mb-2"></div>
    <div className="text-center">
      <p className="font-bold">{creature.display_name}</p>
      <p>Type: {creature.meta.creature_type}</p>
    </div>
  </div>
);

const CreatureStatus: React.FC<{ creature: Creature }> = ({ creature }) => (
  <Card className="p-4">
    <h3 className="font-bold">{creature.display_name}</h3>
    <div className="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700">
      <div 
        className="bg-blue-600 h-2.5 rounded-full" 
        style={{ width: `${(creature.stats.hp / creature.stats.max_hp) * 100}%` }}
      ></div>
    </div>
    <p>{creature.stats.hp} / {creature.stats.max_hp} HP</p>
  </Card>
);

const ActionButtons: React.FC<{ availableButtons: string[]; onButtonClick: (slug: string) => void }> = 
  ({ availableButtons, onButtonClick }) => (
  <div className="grid grid-cols-2 gap-4">
    {availableButtons.includes('attack') && (
      <Button onClick={() => onButtonClick('attack')}>
        <Sword className="mr-2 h-4 w-4" /> Attack
      </Button>
    )}
    {availableButtons.includes('swap') && (
      <Button onClick={() => onButtonClick('swap')}>
        <Repeat className="mr-2 h-4 w-4" /> Swap
      </Button>
    )}
    {availableButtons.includes('back') && (
      <Button onClick={() => onButtonClick('back')}>
        <ArrowLeft className="mr-2 h-4 w-4" /> Back
      </Button>
    )}
  </div>
);

export function MainGameSceneView(props: { data: GameUIData }) {
  const { availableButtonSlugs, emitButtonClick } = useCurrentButtons();
  const { availableInteractiveThingIds, emitThingClick } = useThingInteraction();

  const playerCreature = props.data.entities.player.entities.active_creature;
  const botCreature = props.data.entities.bot.entities.active_creature;

  return (
    <div className="@container w-full h-full flex flex-col">
      <div className="flex-grow flex flex-col @[900px]:flex-row">
        <div className="flex-1 p-4 flex flex-col justify-between">
          <CreatureStatus creature={botCreature} />
          <CreatureDisplay creature={botCreature} isPlayer={false} />
        </div>
        <div className="flex-1 p-4 flex flex-col justify-between">
          <CreatureDisplay creature={playerCreature} isPlayer={true} />
          <CreatureStatus creature={playerCreature} />
        </div>
      </div>
      <div className="h-1/3 p-4 bg-gray-100">
        <ActionButtons 
          availableButtons={availableButtonSlugs} 
          onButtonClick={emitButtonClick} 
        />
      </div>
    </div>
  );
}


Can you please fix the following issue?

On the game screen, there are supposed to be choices allowing to the user to do the following:

[ERROR-001] Could not find or select the choices: [CHOICE 0: {"id":"f3ddafc7-aba3-a7bf-296d-228c5f000b2f","label":"","select_action_type":"Select","thing":{"__type":"Creature","stats":{"hp":17,"max_hp":17,"attack":7,"defense":9,"sp_attack":7,"sp_defense":4,"speed":17},"meta":{"prototype_id":"dumbird","category":"Creature","creature_type":"normal"},"entities":{},"collections":{"skills":[{"__type":"Skill","stats":{"base_damage":7},"meta":{"prototype_id":"tackle","category":"Skill","skill_type":"normal","is_physical":true},"entities":{},"collections":{},"uid":"3025181c-f11f-7c22-19de-739e70c166b2","display_name":"Tackle","description":"Throw yourself at a foe, dealing damage."}]},"uid":"dc0e8b3e-67d4-793d-3935-b30212de2e17","display_name":"Dumbird","description":"A normal-type creature"},"__type":"SelectThing","display_name":"SelectThing(Creature(dumbird))"}] on the UI'}]

Error in main process: Error: [ERROR-001] Could not find or select the choices: [CHOICE 0: {"id":"f3ddafc7-aba3-a7bf-296d-228c5f000b2f","label":"","select_action_type":"Select","thing":{"__type":"Creature","stats":{"hp":17,"max_hp":17,"attack":7,"defense":9,"sp_attack":7,"sp_defense":4,"speed":17},"meta":{"prototype_id":"dumbird","category":"Creature","creature_type":"normal"},"entities":{},"collections":{"skills":[{"__type":"Skill","stats":{"base_damage":7},"meta":{"prototype_id":"tackle","category":"Skill","skill_type":"normal","is_physical":true},"entities":{},"collections":{},"uid":"3025181c-f11f-7c22-19de-739e70c166b2","display_name":"Tackle","description":"Throw yourself at a foe, dealing damage."}]},"uid":"dc0e8b3e-67d4-793d-3935-b30212de2e17","display_name":"Dumbird","description":"A normal-type creature"},"__type":"SelectThing","display_name":"SelectThing(Creature(dumbird))"}] on the UI
at simulateGameplay (/Users/yueranyuan/volter/volter-monorepo/packages/lib-volter-mge2/mge_agents/agent_tools/ui_simulator/ui-simulator.js:139:27)
at async main (/Users/yueranyuan/volter/volter-monorepo/packages/lib-volter-mge2/mge_agents/agent_tools/ui_simulator/ui-simulator.js:224:9)



It does not appear that these choices are able to be made on the screen.



This could be because they simply aren't there, or because they have somehow not rendered (off screen, invisible,

covered, etc).  Often times they might be obscured by another element, or flowing off the screen.



Remember-- all `availableButtonSlugs` are slugs, which are different from the UID of a thing.  All thing clicks should send their associated `uid` but a button click should only send its slug.

Thanks!!!

Please write out the complete file in the format:

```jsx main_game/templates/MainGameScene.tsx
// ... entire file here ...
```

I've attached some images of the current component, rendered, for reference.

Please use the image to deduce what the problem is, create a proposed solution, and then implement it.

Images: ![MainGameScene](/Users/yueranyuan/volter/volter-monorepo/packages/lib-volter-mge2/temp/ladder_view/creature_battle_05_10/main_game/docs/views/MainGameScene.png)
__________________
Role: assistant
Content: Based on the image and the error message, it appears that the main issue is that the UI is not rendering the creature selection options. The current implementation only shows "Attack" and "Swap" buttons, but it's missing the ability to select a specific creature (in this case, "Dumbird").

To fix this issue, we need to modify the `ActionButtons` component to include creature selection options. We'll use the `availableInteractiveThingIds` to render clickable creature options.

Here's the proposed solution:

```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons, useThingInteraction } from "@/lib/useChoices.ts";
import { Card } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Alert, AlertTitle, AlertDescription } from "@/components/ui/alert";
import { Sword, ArrowLeft, Repeat } from 'lucide-react';

interface Creature {
  uid: string;
  display_name: string;
  stats: {
    hp: number;
    max_hp: number;
  };
  meta: {
    creature_type: string;
  };
}

interface Player {
  uid: string;
  entities: {
    active_creature: Creature;
  };
}

interface GameUIData {
  entities: {
    player: Player;
    bot: Player;
  };
}

const CreatureDisplay: React.FC<{ creature: Creature; isPlayer: boolean }> = ({ creature, isPlayer }) => (
  <div className={`flex flex-col items-center ${isPlayer ? 'justify-end' : 'justify-start'}`}>
    <div className="w-32 h-32 bg-gray-300 rounded-full mb-2"></div>
    <div className="text-center">
      <p className="font-bold">{creature.display_name}</p>
      <p>Type: {creature.meta.creature_type}</p>
    </div>
  </div>
);

const CreatureStatus: React.FC<{ creature: Creature }> = ({ creature }) => (
  <Card className="p-4">
    <h3 className="font-bold">{creature.display_name}</h3>
    <div className="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700">
      <div 
        className="bg-blue-600 h-2.5 rounded-full" 
        style={{ width: `${(creature.stats.hp / creature.stats.max_hp) * 100}%` }}
      ></div>
    </div>
    <p>{creature.stats.hp} / {creature.stats.max_hp} HP</p>
  </Card>
);

const ActionButtons: React.FC<{ 
  availableButtons: string[]; 
  onButtonClick: (slug: string) => void;
  availableCreatures: string[];
  onCreatureClick: (uid: string) => void;
}> = ({ availableButtons, onButtonClick, availableCreatures, onCreatureClick }) => (
  <div className="grid grid-cols-2 gap-4">
    {availableButtons.includes('attack') && (
      <Button onClick={() => onButtonClick('attack')}>
        <Sword className="mr-2 h-4 w-4" /> Attack
      </Button>
    )}
    {availableButtons.includes('swap') && (
      <Button onClick={() => onButtonClick('swap')}>
        <Repeat className="mr-2 h-4 w-4" /> Swap
      </Button>
    )}
    {availableButtons.includes('back') && (
      <Button onClick={() => onButtonClick('back')}>
        <ArrowLeft className="mr-2 h-4 w-4" /> Back
      </Button>
    )}
    {availableCreatures.map((creatureUid) => (
      <Button key={creatureUid} onClick={() => onCreatureClick(creatureUid)}>
        Select Creature
      </Button>
    ))}
  </div>
);

export function MainGameSceneView(props: { data: GameUIData }) {
  const { availableButtonSlugs, emitButtonClick } = useCurrentButtons();
  const { availableInteractiveThingIds, emitThingClick } = useThingInteraction();

  const playerCreature = props.data.entities.player.entities.active_creature;
  const botCreature = props.data.entities.bot.entities.active_creature;

  return (
    <div className="@container w-full h-full flex flex-col">
      <div className="flex-grow flex flex-col @[900px]:flex-row">
        <div className="flex-1 p-4 flex flex-col justify-between">
          <CreatureStatus creature={botCreature} />
          <CreatureDisplay creature={botCreature} isPlayer={false} />
        </div>
        <div className="flex-1 p-4 flex flex-col justify-between">
          <CreatureDisplay creature={playerCreature} isPlayer={true} />
          <CreatureStatus creature={playerCreature} />
        </div>
      </div>
      <div className="h-1/3 p-4 bg-gray-100">
        <ActionButtons 
          availableButtons={availableButtonSlugs} 
          onButtonClick={emitButtonClick}
          availableCreatures={availableInteractiveThingIds}
          onCreatureClick={emitThingClick}
        />
      </div>
    </div>
  );
}
```

The main changes are:

1. Modified the `ActionButtons` component to accept `availableCreatures` and `onCreatureClick` props.
2. Added a new section in the `ActionButtons` component to render buttons for each available creature.
3. Updated the `MainGameSceneView` to pass `availableInteractiveThingIds` and `emitThingClick` to the `ActionButtons` component.

These changes should allow the user to select specific creatures, addressing the error message about not being able to find or select the choices. The "Select Creature" button will now appear alongside the "Attack" and "Swap" buttons, allowing the user to interact with available creatures.
__________________
