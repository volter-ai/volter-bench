Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and provide a solution.

**Issue Description:**
Looking at the image and comparing it with the code, I notice that while the UI elements are visible, the UI simulator is failing without capturing any errors. This typically indicates an issue with event handling or button accessibility. The main menu appears to render correctly with:
1. A game title placeholder at the top
2. Play and Quit buttons at the bottom
3. Proper styling and layout

However, the lack of error messages while failing suggests the buttons may not be properly hooked up to the event system, despite being visually present.

**Proposed Solution:**
The issue likely stems from the button click handlers not being properly integrated with the game's event system. To fix this, we should:

1. Add proper keyboard handling for accessibility and testing
2. Ensure the buttons are properly initialized in the event system
3. Add proper focus management for the buttons
4. Add proper initialization check for availableButtonSlugs

**Implementation:**
Here's the corrected code:

# Excerpt ID: bdc08a0a-5b49-4812-8012-0594292dd4c1
```jsx main_game/templates/MainMenuScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Play, XCircle } from 'lucide-react';
import { Card } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { useEffect } from 'react';

interface GameStats {
  [key: string]: number;
}

interface GameMeta {
  prototype_id: string;
  category: string;
}

interface Skill {
  __type: "Skill";
  stats: {
    damage: number;
  };
  meta: GameMeta;
  entities: Record<string, any>;
  collections: Record<string, any>;
  uid: string;
  display_name: string;
  description: string;
}

interface Creature {
  __type: "Creature";
  stats: {
    hp: number;
    max_hp: number;
  };
  meta: GameMeta;
  entities: Record<string, any>;
  collections: {
    skills: Skill[];
  };
  uid: string;
  display_name: string;
  description: string;
}

interface Player {
  __type: "Player";
  stats: GameStats;
  meta: GameMeta;
  entities: Record<string, any>;
  collections: {
    creatures: Creature[];
  };
  uid: string;
  display_name: string;
  description: string;
}

interface GameUIData {
  entities: {
    player: Player;
  };
  stats: Record<string, any>;
  meta: Record<string, any>;
  collections: Record<string, any>;
  uid: string;
  display_name: string;
  description: string;
}

export function MainMenuSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons();

  const handleKeyPress = (e: KeyboardEvent, slug: string) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      emitButtonClick(slug);
    }
  };

  useEffect(() => {
    const playButton = document.querySelector('[data-testid="play-button"]');
    if (playButton) {
      playButton.focus();
    }
  }, []);

  return (
    <Card className="w-full h-full relative overflow-hidden" style={{ aspectRatio: '16/9' }}>
      <div className="absolute inset-0 bg-gradient-to-b from-slate-800 to-slate-900">
        <div className="h-full flex flex-col items-center justify-between p-8">
          {/* Title Image Section */}
          <div className="flex-1 flex items-center justify-center w-full">
            <div className="w-96 h-32 bg-slate-700 flex items-center justify-center rounded-lg">
              <span className="text-4xl font-bold text-white opacity-50">
                Game Title Image
              </span>
            </div>
          </div>

          {/* Button Container */}
          <div className="flex flex-col gap-4 w-full max-w-md">
            {availableButtonSlugs?.includes('play') && (
              <Button
                onClick={() => emitButtonClick('play')}
                onKeyDown={(e) => handleKeyPress(e as unknown as KeyboardEvent, 'play')}
                className="w-full h-14 text-xl"
                variant="default"
                role="button"
                aria-label="Play Game"
                data-testid="play-button"
                tabIndex={0}
              >
                <Play className="w-6 h-6 mr-2" />
                Play Game
              </Button>
            )}

            {availableButtonSlugs?.includes('quit') && (
              <Button
                onClick={() => emitButtonClick('quit')}
                onKeyDown={(e) => handleKeyPress(e as unknown as KeyboardEvent, 'quit')}
                className="w-full h-14 text-xl"
                variant="destructive"
                role="button"
                aria-label="Quit Game"
                data-testid="quit-button"
                tabIndex={0}
              >
                <XCircle className="w-6 h-6 mr-2" />
                Quit
              </Button>
            )}
          </div>
        </div>
      </div>
    </Card>
  );
}
```

The key changes made are:
1. Added optional chaining for availableButtonSlugs checks to prevent undefined errors
2. Added keyboard event handling for better accessibility and testing
3. Added auto-focus on the play button for better UX and testing
4. Added proper event handlers for both click and keyboard interactions

These changes should resolve the UI simulator issues by ensuring the buttons are properly accessible and integrated with the game's event system.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
