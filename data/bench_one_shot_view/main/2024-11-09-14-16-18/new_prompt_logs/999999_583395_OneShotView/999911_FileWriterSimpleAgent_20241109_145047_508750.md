Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
# Excerpt ID: 9fbd5ccc-48ba-4cc3-b0e1-669e65daa266
```tsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Sword, Shield, Zap } from 'lucide-react';
import { Card } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { ScrollArea } from "@/components/ui/scroll-area";

interface Skill {
  uid: string;
  display_name: string;
  description: string;
  stats: {
    base_damage: number;
  };
}

interface Creature {
  uid: string;
  display_name: string;
  description: string;
  stats: {
    hp: number;
    max_hp: number;
    attack: number;
    defense: number;
    speed: number;
  };
  collections: {
    skills: Skill[];
  };
}

interface GameUIData {
  entities: {
    player_creature: Creature;
    opponent_creature: Creature;
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons();

  const playerCreature = props.data.entities.player_creature;
  const opponentCreature = props.data.entities.opponent_creature;

  const CreatureDisplay = ({ creature, isPlayer }: { creature: Creature, isPlayer: boolean }) => (
    <Card key={creature.uid} className="p-4 w-64">
      <div className="flex flex-col gap-2">
        <div className="text-lg font-bold">{creature.display_name}</div>
        <div className="text-sm text-muted-foreground">
          {isPlayer ? "Your Creature" : "Opponent's Creature"}
        </div>
        <div className="relative w-full h-4 bg-secondary rounded-full overflow-hidden">
          <div 
            className="absolute h-full bg-primary transition-all duration-300"
            style={{ width: `${(creature.stats.hp / creature.stats.max_hp) * 100}%` }}
          />
        </div>
        <div className="text-sm text-muted-foreground">
          {creature.stats.hp}/{creature.stats.max_hp} HP
        </div>
        <div className="flex gap-4 mt-2">
          <div className="flex items-center">
            <Sword className="w-4 h-4 mr-1" /> 
            <span className="text-sm">{creature.stats.attack}</span>
          </div>
          <div className="flex items-center">
            <Shield className="w-4 h-4 mr-1" /> 
            <span className="text-sm">{creature.stats.defense}</span>
          </div>
          <div className="flex items-center">
            <Zap className="w-4 h-4 mr-1" /> 
            <span className="text-sm">{creature.stats.speed}</span>
          </div>
        </div>
      </div>
    </Card>
  );

  return (
    <div className="w-full h-full flex flex-col">
      {/* HUD */}
      <Card className="w-full h-[10%] flex items-center px-6 rounded-none border-b">
        <h1 className="text-xl font-bold">Battle Arena</h1>
      </Card>

      {/* Battlefield */}
      <div className="h-[50%] flex justify-between items-center px-16 bg-gradient-to-b from-background to-secondary/20">
        {playerCreature && <CreatureDisplay creature={playerCreature} isPlayer={true} />}
        {opponentCreature && <CreatureDisplay creature={opponentCreature} isPlayer={false} />}
      </div>

      {/* UI Area */}
      <Card className="h-[40%] rounded-none border-t">
        <div className="h-full flex flex-col p-4 gap-4">
          {/* Game Text Display */}
          <ScrollArea className="flex-1 rounded-md border p-4">
            <p className="text-muted-foreground">
              What will {playerCreature?.display_name} do?
            </p>
          </ScrollArea>

          {/* Skills Grid */}
          <div className="grid grid-cols-2 gap-4">
            {playerCreature?.collections.skills.map(skill => (
              availableButtonSlugs.includes(skill.display_name.toLowerCase()) && (
                <Button
                  key={skill.uid}
                  variant="secondary"
                  onClick={() => emitButtonClick(skill.display_name.toLowerCase())}
                  className="h-auto flex flex-col items-start p-4"
                >
                  <span className="font-semibold">{skill.display_name}</span>
                  <span className="text-sm text-muted-foreground">{skill.description}</span>
                </Button>
              )
            ))}
          </div>
        </div>
      </Card>
    </div>
  );
}
```

Key improvements in this version:
1. Uses shadcn components: Card, Button, and ScrollArea
2. Properly handles UIDs for all components
3. Adds a text display area as specified in the requirements
4. Uses shadcn's built-in styling system with proper variants
5. Maintains consistent styling with the rest of the application
6. Includes proper null checks and safety
7. Uses semantic HTML structure
8. Implements proper layout as per the VIEW_SUMMARY
9. Uses proper color tokens (primary, secondary, muted-foreground, etc.)
10. Maintains responsive design principles

The component now better aligns with the design system while maintaining all the required functionality.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
