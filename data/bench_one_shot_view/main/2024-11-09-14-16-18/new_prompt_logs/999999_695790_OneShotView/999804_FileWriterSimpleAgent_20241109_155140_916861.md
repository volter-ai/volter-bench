Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and provide a solution.

**Problem Description:**
1. The UI simulator is timing out after 120s, suggesting that the interactive elements aren't properly functioning
2. Looking at the image, we can see skill buttons ("Tackle", "Lick") and a "Swap" button in the UI area
3. The code shows that we're not properly handling the skill button clicks - there's no onClick handler for the SkillButton components
4. The error suggests that the game events aren't being properly triggered, which is likely due to missing click handlers

**Proposed Solution:**
1. Add click handlers to the SkillButton components to emit the appropriate button clicks
2. When a skill is clicked, we should emit an 'attack' event with the skill's uid
3. Ensure the layout matches the design document by adjusting the grid structure
4. Fix the positioning of creatures and their status displays to match the design spec

Here's the implementation:

# Excerpt ID: d10211a0-6558-4723-9bf1-945690f00ccd
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts"
import { Shield, Sword, ArrowLeft } from 'lucide-react'
import { CreatureCard } from "@/components/ui/custom/creature/creature_card"
import { SkillButton } from "@/components/ui/custom/skill/skill_button"
import { PlayerCard } from "@/components/ui/custom/player/player_card"
import { Button } from "@/components/ui/button"

interface Skill {
  __type: "Skill"
  uid: string
  display_name: string
  description: string
  stats: {
    base_damage: number
  }
  meta: {
    skill_type: string
  }
}

interface Creature {
  __type: "Creature"
  uid: string
  display_name: string
  description: string
  stats: {
    hp: number
    max_hp: number
  }
  collections: {
    skills: Skill[]
  }
  meta: {
    prototype_id: string
  }
}

interface Player {
  __type: "Player"
  uid: string
  display_name: string
  entities: {
    active_creature?: Creature
  }
}

interface GameUIData {
  entities: {
    player: Player
    opponent: Player
  }
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const { availableButtonSlugs, emitButtonClick } = useCurrentButtons()

  const playerCreature = props.data.entities?.player?.entities?.active_creature
  const opponentCreature = props.data.entities?.opponent?.entities?.active_creature
  const player = props.data.entities?.player
  const opponent = props.data.entities?.opponent

  if (!player || !opponent || !playerCreature || !opponentCreature) {
    return <div className="w-full h-full flex items-center justify-center">
      Loading battle...
    </div>
  }

  return (
    <div className="w-full h-full flex flex-col">
      {/* Battlefield (upper 2/3) */}
      <div className="h-2/3 grid grid-cols-2 grid-rows-2 gap-4 p-4 bg-gradient-to-b from-blue-50 to-green-50">
        {/* Top-left: Opponent Status */}
        <div className="flex flex-col items-start justify-end">
          <PlayerCard
            uid={opponent.uid}
            name={opponent.display_name}
            imageUrl={`/players/${opponent.uid}/avatar.png`}
          />
        </div>

        {/* Top-right: Opponent Creature */}
        <div className="flex items-center justify-center">
          <CreatureCard
            uid={opponentCreature.uid}
            name={opponentCreature.display_name}
            imageUrl={`/creatures/${opponentCreature.meta.prototype_id}/front.png`}
            currentHp={opponentCreature.stats.hp}
            maxHp={opponentCreature.stats.max_hp}
          />
        </div>

        {/* Bottom-left: Player Creature */}
        <div className="flex items-center justify-center">
          <CreatureCard
            uid={playerCreature.uid}
            name={playerCreature.display_name}
            imageUrl={`/creatures/${playerCreature.meta.prototype_id}/back.png`}
            currentHp={playerCreature.stats.hp}
            maxHp={playerCreature.stats.max_hp}
          />
        </div>

        {/* Bottom-right: Player Status */}
        <div className="flex flex-col items-end justify-start">
          <PlayerCard
            uid={player.uid}
            name={player.display_name}
            imageUrl={`/players/${player.uid}/avatar.png`}
          />
        </div>
      </div>

      {/* UI Area (lower 1/3) */}
      <div className="h-1/3 p-4 bg-white border-t">
        <div className="flex flex-wrap gap-2 justify-center">
          {availableButtonSlugs.includes('attack') && playerCreature.collections.skills?.map((skill) => (
            <SkillButton
              key={skill.uid}
              uid={skill.uid}
              description={skill.description}
              stats={{
                damage: skill.stats.base_damage,
                type: skill.meta.skill_type
              }}
              onClick={() => emitButtonClick('attack')}
            >
              {skill.display_name}
            </SkillButton>
          ))}
          
          {availableButtonSlugs.includes('swap') && (
            <Button
              onClick={() => emitButtonClick('swap')}
              className="flex items-center gap-2"
            >
              <Shield className="w-4 h-4" />
              Swap
            </Button>
          )}

          {availableButtonSlugs.includes('back') && (
            <Button
              onClick={() => emitButtonClick('back')}
              variant="secondary"
              className="flex items-center gap-2"
            >
              <ArrowLeft className="w-4 h-4" />
              Back
            </Button>
          )}
        </div>
      </div>
    </div>
  )
}
```

Key changes made:
1. Added onClick handler to SkillButton components to emit 'attack' when clicked
2. Restructured the battlefield grid to use grid-rows-2 for proper 2x2 layout
3. Reorganized the positioning of creatures and status displays to match the design spec
4. Improved the layout structure with proper justification and alignment

These changes should resolve the timeout issue by ensuring that all interactive elements properly emit events when clicked.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
