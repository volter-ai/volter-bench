Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and propose a solution.

**Issue Description:**
Looking at the image and the error, there are a few key problems:
1. The UI simulator is timing out after 120s, suggesting it cannot properly interact with the buttons
2. The skill buttons are visible but may not be properly wired up to the click handler
3. The error suggests connection issues which could be related to event handling

Looking at the rendered scene:
- The HUD shows both players correctly
- The battlefield displays both creatures correctly
- The skill button is visible but may not be functioning properly

**Proposed Solution:**
The main issue appears to be that the SkillButton components aren't properly connected to the emitButtonClick handler. We need to:

1. Add onClick handlers to the SkillButton components
2. Ensure we're only emitting the skill's uid when it's in the availableButtonSlugs list
3. Wire up the click handler properly to the emitButtonClick function

Here's the implementation:

# Excerpt ID: 2c2e3604-12e2-42ad-b7ac-59174d0d11f7
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Shield, Swords } from 'lucide-react';
import { CreatureCard } from "@/components/ui/custom/creature/creature_card";
import { PlayerCard } from "@/components/ui/custom/player/player_card";
import { SkillButton } from "@/components/ui/custom/skill/skill_button";

interface Skill {
  __type: "Skill"
  uid: string
  display_name: string
  description: string
  stats: {
    damage: number
  }
}

interface Creature {
  __type: "Creature"
  uid: string
  display_name: string
  description: string
  stats: {
    hp: number
    max_hp: number
  }
  collections: {
    skills: Skill[]
  }
  meta: {
    prototype_id: string
  }
}

interface Player {
  __type: "Player"
  uid: string
  display_name: string
  collections: {
    creatures: Creature[]
  }
  meta: {
    prototype_id: string
  }
}

interface GameUIData {
  entities: {
    player: Player
    foe: Player
    player_creature: Creature
    foe_creature: Creature
  }
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons()

  const { player, foe, player_creature, foe_creature } = props.data.entities

  const handleSkillClick = (skillUid: string) => {
    if (availableButtonSlugs.includes(skillUid)) {
      emitButtonClick(skillUid)
    }
  }

  return (
    <div className="w-full h-full aspect-video bg-background flex flex-col">
      {/* HUD */}
      <nav className="w-full p-4 bg-muted flex justify-between items-center">
        {player && (
          <PlayerCard
            uid={player.uid}
            name={player.display_name}
            imageUrl={`/players/${player.meta.prototype_id}.png`}
          />
        )}
        <div className="flex items-center gap-2">
          <Swords className="w-5 h-5" />
          <span>Battle Phase</span>
        </div>
        {foe && (
          <PlayerCard
            uid={foe.uid}
            name={foe.display_name}
            imageUrl={`/players/${foe.meta.prototype_id}.png`}
          />
        )}
      </nav>

      {/* Battlefield */}
      <div className="flex-1 flex justify-between items-center px-8 py-4">
        {player_creature && (
          <div className="relative">
            <span className="absolute -top-8 left-1/2 -translate-x-1/2 text-sm font-bold">
              Your Creature
            </span>
            <CreatureCard
              uid={player_creature.uid}
              name={player_creature.display_name}
              hp={player_creature.stats.hp}
              maxHp={player_creature.stats.max_hp}
              imageUrl={`/creatures/${player_creature.meta.prototype_id}.png`}
            />
          </div>
        )}

        {foe_creature && (
          <div className="relative">
            <span className="absolute -top-8 left-1/2 -translate-x-1/2 text-sm font-bold">
              Opponent's Creature
            </span>
            <CreatureCard
              uid={foe_creature.uid}
              name={foe_creature.display_name}
              hp={foe_creature.stats.hp}
              maxHp={foe_creature.stats.max_hp}
              imageUrl={`/creatures/${foe_creature.meta.prototype_id}.png`}
            />
          </div>
        )}
      </div>

      {/* Skills UI */}
      <div className="p-4 bg-muted">
        <div className="flex flex-wrap gap-2 justify-center">
          {player_creature?.collections.skills.map((skill) => (
            <SkillButton
              key={skill.uid}
              uid={skill.uid}
              name={skill.display_name}
              description={skill.description}
              stats={`Damage: ${skill.stats.damage}`}
              disabled={!availableButtonSlugs.includes(skill.uid)}
              onClick={() => handleSkillClick(skill.uid)}
            />
          ))}
        </div>
      </div>
    </div>
  )
}
```

The key changes made are:
1. Added a handleSkillClick function to manage skill button clicks
2. Added onClick handler to SkillButton components
3. Properly connected the click handler to emit button clicks only for available skills

This should resolve the timeout issue by properly handling button interactions and ensuring the UI simulator can interact with the buttons as expected.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
