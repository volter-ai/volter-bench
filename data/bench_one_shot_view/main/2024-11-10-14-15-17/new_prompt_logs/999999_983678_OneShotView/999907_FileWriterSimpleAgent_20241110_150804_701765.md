Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and propose a solution.

**Issue Description:**
Looking at the image and the error message, there are several problems:
1. The skills UI section at the bottom appears to be empty or not rendering properly
2. The timeout error suggests that the UI simulator couldn't interact with any buttons
3. The error mentions connection issues with source maps, but more importantly shows a timeout after 120s
4. The buttons that should be showing the creature's skills are not visible

The main problem seems to be that the skills buttons are not being rendered correctly, preventing the UI simulator from finding and clicking them. This is likely due to how we're handling the `availableButtonSlugs` and the button rendering logic.

**Proposed Solution:**
1. Fix the button ID generation to match the expected format
2. Modify the skills rendering logic to ensure buttons are always visible
3. Add proper null checks for the availableButtonSlugs
4. Ensure the button grid layout properly contains the buttons

Here's the implementation:

# Excerpt ID: 7646b4be-e9ba-47d0-bf60-94ebd3d23c12
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Sword, Shield, Zap, Heart } from 'lucide-react';
import { Card } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Progress } from "@/components/ui/progress";

interface Creature {
  uid: string;
  display_name: string;
  description: string;
  stats: {
    hp: number;
    max_hp: number;
    attack: number;
    defense: number;
    speed: number;
  };
  collections: {
    skills: Skill[];
  };
}

interface Skill {
  uid: string;
  display_name: string;
  description: string;
  stats: {
    base_damage: number;
  };
  meta: {
    prototype_id: string;
  };
}

interface GameUIData {
  entities: {
    player: {
      uid: string;
      stats: Record<string, number>;
    };
    opponent: {
      uid: string;
      stats: Record<string, number>;
    };
    player_creature: Creature;
    opponent_creature: Creature;
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs = [],
    emitButtonClick
  } = useCurrentButtons();

  const playerCreature = props.data?.entities?.player_creature;
  const opponentCreature = props.data?.entities?.opponent_creature;

  if (!playerCreature || !opponentCreature) {
    return <div className="w-full h-screen flex items-center justify-center">
      Loading battle...
    </div>;
  }

  const renderCreatureStats = (creature: Creature, isPlayer: boolean) => (
    <Card className={`p-4 ${isPlayer ? 'ml-auto mr-8' : 'ml-8 mr-auto'} w-64`}>
      <div className="flex flex-col gap-2">
        <h2 className="text-xl font-bold">{creature.display_name}</h2>
        <div className="w-full">
          <Progress 
            value={(creature.stats.hp / creature.stats.max_hp) * 100}
            className="h-2"
          />
          <span className="text-sm">
            {creature.stats.hp}/{creature.stats.max_hp} HP
          </span>
        </div>
        <div className="flex gap-4 mt-2">
          <div className="flex items-center">
            <Sword className="w-4 h-4 mr-1" />
            {creature.stats.attack}
          </div>
          <div className="flex items-center">
            <Shield className="w-4 h-4 mr-1" />
            {creature.stats.defense}
          </div>
          <div className="flex items-center">
            <Zap className="w-4 h-4 mr-1" />
            {creature.stats.speed}
          </div>
        </div>
      </div>
    </Card>
  );

  return (
    <div className="w-full h-screen flex flex-col bg-gradient-to-b from-blue-900 to-blue-800">
      <Card className="w-full p-4 rounded-none bg-black/30">
        <div className="flex justify-between items-center">
          <span className="text-white">Battle Scene</span>
          <Heart className="text-red-500" />
        </div>
      </Card>

      <div className="flex-1 flex items-center px-4">
        <div className="w-1/2 flex flex-col items-start">
          <div className="text-center mb-2 w-full text-white">Player</div>
          {renderCreatureStats(playerCreature, true)}
        </div>
        <div className="w-1/2 flex flex-col items-end">
          <div className="text-center mb-2 w-full text-white">Opponent</div>
          {renderCreatureStats(opponentCreature, false)}
        </div>
      </div>

      <Card className="min-h-[200px] max-h-[40vh] bg-black/40 p-4 rounded-t-xl rounded-b-none">
        <div className="grid grid-cols-2 gap-4">
          {playerCreature.collections.skills.map((skill) => {
            const buttonSlug = `skill-${skill.meta.prototype_id}`;
            const isAvailable = availableButtonSlugs.includes(buttonSlug);
            
            return (
              <Button
                key={skill.uid}
                onClick={() => isAvailable && emitButtonClick(buttonSlug)}
                variant="secondary"
                className="h-auto flex flex-col items-start p-4"
                disabled={!isAvailable}
              >
                <h3 className="font-bold">{skill.display_name}</h3>
                <p className="text-sm opacity-80">{skill.description}</p>
                <span className="text-xs">Damage: {skill.stats.base_damage}</span>
              </Button>
            );
          })}
        </div>
      </Card>
    </div>
  );
}
```

Key changes made:
1. Changed button slug format from `-${prototype_id}` to `skill-${prototype_id}`
2. Removed the conditional rendering with `isAvailable &&` and replaced it with `disabled={!isAvailable}`
3. Added default empty array for availableButtonSlugs
4. Simplified the grid layout by removing the h-full class
5. Added proper null check for emitButtonClick to only trigger when button is available

These changes ensure that:
- Buttons are always visible but disabled when unavailable
- The UI simulator can find and interact with the buttons
- The button slugs match the expected format
- The layout remains stable and visible

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
