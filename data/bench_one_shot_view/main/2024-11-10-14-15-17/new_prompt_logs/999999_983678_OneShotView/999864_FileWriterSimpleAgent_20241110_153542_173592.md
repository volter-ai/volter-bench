Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and propose a solution.

**Problem Description:**
Looking at the image and the error, there are a few key issues:
1. The UI simulator is timing out after 120s, suggesting it cannot interact with the buttons properly
2. The SkillButtons in the lower UI area are visible but may not be properly connected to the button click system
3. The code is not utilizing the `availableButtonSlugs` and `emitButtonClick` from `useCurrentButtons`

The main issue appears to be that while the skill buttons are rendered, they're not properly hooked up to the game's choice system, preventing the UI simulator from progressing through the game flow.

**Proposed Solution:**
1. Add click handlers to the SkillButtons that use `emitButtonClick`
2. Filter the skills shown based on `availableButtonSlugs`
3. Ensure each skill has a corresponding slug for the button system

Here's the implementation:

# Excerpt ID: 15c76d31-562c-4e75-ad2d-30ad4b32410a
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Shield, Sword } from 'lucide-react'
import { CreatureCard } from "@/components/ui/custom/creature/creature_card"
import { SkillButton } from "@/components/ui/custom/skill/skill_button"

interface Skill {
  __type: "Skill"
  uid: string
  display_name: string
  description: string
  stats: {
    base_damage: number
  }
  meta: {
    skill_type: string
  }
}

interface Creature {
  __type: "Creature"
  uid: string
  display_name: string
  description: string
  stats: {
    hp: number
    max_hp: number
  }
  collections: {
    skills: Skill[]
  }
}

interface GameUIData {
  entities: {
    player_creature: Creature
    opponent_creature: Creature
  }
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons()

  const playerCreature = props.data?.entities?.player_creature
  const opponentCreature = props.data?.entities?.opponent_creature

  if (!playerCreature || !opponentCreature) {
    return <div className="w-screen h-screen flex items-center justify-center">
      Loading...
    </div>
  }

  // Filter skills based on available button slugs
  const availableSkills = playerCreature.collections.skills.filter(skill => 
    availableButtonSlugs.includes(`skill_${skill.uid}`)
  )

  const handleSkillClick = (skillUid: string) => {
    emitButtonClick(`skill_${skillUid}`)
  }

  return (
    <div className="w-screen h-screen flex flex-col bg-gradient-to-b from-sky-100 to-sky-300">
      {/* Battlefield Area (upper 2/3) */}
      <div className="flex-grow-[2] grid grid-cols-2 relative p-4 gap-4">
        {/* Top Left - Opponent Status */}
        <div className="flex items-start justify-start">
          <CreatureCard
            uid={opponentCreature.uid}
            name={opponentCreature.display_name}
            imageUrl={`/creatures/${opponentCreature.meta?.prototype_id || 'default'}_front.png`}
            currentHp={opponentCreature.stats.hp}
            maxHp={opponentCreature.stats.max_hp}
          />
        </div>

        {/* Top Right - Opponent Creature */}
        <div className="flex items-end justify-end">
          <div className="relative">
            <img
              src={`/creatures/${opponentCreature.meta?.prototype_id || 'default'}_front.png`}
              alt={opponentCreature.display_name}
              className="w-48 h-48 object-contain"
            />
            <div className="absolute bottom-0 w-full h-4 bg-black/20 rounded-full blur-sm" />
          </div>
        </div>

        {/* Bottom Left - Player Creature */}
        <div className="flex items-end justify-start">
          <div className="relative">
            <img
              src={`/creatures/${playerCreature.meta?.prototype_id || 'default'}_back.png`}
              alt={playerCreature.display_name}
              className="w-48 h-48 object-contain"
            />
            <div className="absolute bottom-0 w-full h-4 bg-black/20 rounded-full blur-sm" />
          </div>
        </div>

        {/* Bottom Right - Player Status */}
        <div className="flex items-end justify-end">
          <CreatureCard
            uid={playerCreature.uid}
            name={playerCreature.display_name}
            imageUrl={`/creatures/${playerCreature.meta?.prototype_id || 'default'}_front.png`}
            currentHp={playerCreature.stats.hp}
            maxHp={playerCreature.stats.max_hp}
          />
        </div>
      </div>

      {/* UI Area (lower 1/3) */}
      <div className="flex-grow-[1] grid grid-cols-2 gap-4 p-4 bg-white/80">
        {availableSkills.map((skill) => (
          <SkillButton
            key={skill.uid}
            uid={skill.uid}
            skillName={skill.display_name}
            description={skill.description}
            damage={skill.stats.base_damage}
            type={skill.meta.skill_type}
            onClick={() => handleSkillClick(skill.uid)}
          />
        ))}
      </div>
    </div>
  )
}
```

The key changes made are:
1. Added filtering of skills based on `availableButtonSlugs`
2. Added a `handleSkillClick` function that properly emits button clicks with the correct slug format
3. Only showing skills that are currently available as choices
4. Added onClick handler to SkillButton components

These changes should allow the UI simulator to properly interact with the skill buttons and progress through the game flow.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
