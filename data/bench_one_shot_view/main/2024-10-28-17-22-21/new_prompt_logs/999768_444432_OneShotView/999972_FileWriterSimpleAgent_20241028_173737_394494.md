Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: 
## Proposed Code Change
Based on the provided image and the error message, it appears that the scene is not rendering correctly. The image shows only a "Something went wrong" message with a "Reload?" button, indicating that the component is failing to render properly.

The main issue seems to be that the component is not handling the case where the data prop might be undefined or null. This could be causing the component to crash when trying to access properties of undefined objects.

Proposed solution:
1. Add null checks for the props.data and its nested properties.
2. Implement error boundaries or fallback UI for when data is not available.
3. Ensure that the availableButtonSlugs are being used correctly in the SkillButton components.

Here's the implementation of the proposed solution:

# Excerpt ID: f9d5c2c1-f175-4e93-a624-ded43f3afebe
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { CreatureCard } from "@/components/ui/custom/creature/creature_card";
import { SkillButton } from "@/components/ui/custom/skill/skill_button";
import { Shield, Zap } from 'lucide-react';

interface Creature {
  uid: string;
  display_name: string;
  stats: {
    hp: number;
    max_hp: number;
    attack: number;
    defense: number;
    sp_attack: number;
    sp_defense: number;
    speed: number;
  };
  meta: {
    creature_type: string;
  };
  skills: Skill[];
}

interface Skill {
  uid: string;
  display_name: string;
  description: string;
  stats: {
    base_damage: number;
  };
  meta: {
    skill_type: string;
    is_physical: boolean;
  };
}

interface Player {
  uid: string;
  display_name: string;
}

interface GameUIData {
  entities: {
    player: Player;
    opponent: Player;
    player_creature: Creature;
    opponent_creature: Creature;
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons();

  if (!props.data || !props.data.entities) {
    return <div className="text-center text-lg">Loading game data...</div>;
  }

  const { player_creature, opponent_creature } = props.data.entities;

  if (!player_creature || !opponent_creature) {
    return <div className="text-center text-lg">Waiting for creatures...</div>;
  }

  return (
    <div className="w-full h-full flex flex-col">
      {/* Battlefield Display */}
      <div className="flex-grow grid grid-cols-2 grid-rows-2 gap-4 p-4">
        {/* Opponent Status */}
        <div className="flex justify-start items-start">
          <CreatureCard
            uid={opponent_creature.uid}
            name={opponent_creature.display_name}
            image={`/images/creatures/${opponent_creature.meta.creature_type}.png`}
            hp={opponent_creature.stats.hp}
            maxHp={opponent_creature.stats.max_hp}
          />
        </div>

        {/* Opponent Creature */}
        <div className="flex justify-end items-start">
          <img
            src={`/images/creatures/${opponent_creature.meta.creature_type}_front.png`}
            alt={opponent_creature.display_name}
            className="w-48 h-48 object-contain"
          />
        </div>

        {/* Player Creature */}
        <div className="flex justify-start items-end">
          <img
            src={`/images/creatures/${player_creature.meta.creature_type}_back.png`}
            alt={player_creature.display_name}
            className="w-48 h-48 object-contain"
          />
        </div>

        {/* Player Status */}
        <div className="flex justify-end items-end">
          <CreatureCard
            uid={player_creature.uid}
            name={player_creature.display_name}
            image={`/images/creatures/${player_creature.meta.creature_type}.png`}
            hp={player_creature.stats.hp}
            maxHp={player_creature.stats.max_hp}
          />
        </div>
      </div>

      {/* User Interface */}
      <div className="h-1/3 bg-gray-100 p-4">
        {player_creature.skills && player_creature.skills.length > 0 ? (
          <div className="grid grid-cols-2 gap-4">
            {player_creature.skills.map((skill: Skill) => (
              <SkillButton
                key={skill.uid}
                uid={skill.uid}
                skillName={skill.display_name}
                description={skill.description}
                stats={`Damage: ${skill.stats.base_damage}`}
                onClick={() => availableButtonSlugs.includes(skill.uid) && emitButtonClick(skill.uid)}
                disabled={!availableButtonSlugs.includes(skill.uid)}
              >
                <div className="flex items-center">
                  {skill.meta.is_physical ? <Shield className="mr-2" /> : <Zap className="mr-2" />}
                  {skill.display_name}
                </div>
              </SkillButton>
            ))}
          </div>
        ) : (
          <div className="text-center text-lg">Waiting for action...</div>
        )}
      </div>
    </div>
  );
}
```

Changes made:
1. Added null checks for `props.data` and `props.data.entities` at the beginning of the component.
2. Added a check for `player_creature` and `opponent_creature` to ensure they exist before rendering.
3. Removed the unnecessary `skillSlugs` variable as it wasn't being used.
4. Updated the `SkillButton` `onClick` handler to only emit the button click if the skill's uid is in the `availableButtonSlugs` array.
5. Added a `disabled` prop to the `SkillButton` component to visually indicate which skills are currently available.

These changes should prevent the component from crashing when data is not available and ensure that only available skills can be clicked. This should resolve the timeout issue by making sure the UI is always in a valid state for interaction.

## Directions
Reply with a JSON list of actions to perform. 'overwrite' are the only valid action type. 
Make sure you are using the excerpt_id which contains the entire contents of the file

Examples:
overwriting files (this works for python, markdown, or any other file type)
```json output_example1
[{"action": "overwrite", "excerpt_id": "<id>", "file_path": "<relative file path>"}]
```

__________________
Role: assistant
Content: ```json
[{"action": "overwrite", "excerpt_id": "f9d5c2c1-f175-4e93-a624-ded43f3afebe", "file_path": "main_game/templates/MainGameScene.tsx"}]
```
__________________
