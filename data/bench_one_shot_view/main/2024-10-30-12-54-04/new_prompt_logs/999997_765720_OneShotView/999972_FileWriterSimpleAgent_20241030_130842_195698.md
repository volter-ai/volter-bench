Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: 
## Proposed Code Change
Based on the image and the error message provided, it appears that the main issue is a timeout after 120 seconds. This suggests that the UI is not responding or updating as expected, which could be due to a lack of interactive elements or a problem with the game state management.

Looking at the image, we can see that the basic structure of the game scene is present, including:
1. The "Battle Arena" header
2. Two creature cards (both named "Bubwool") representing the player and opponent
3. A "Waiting for game action..." message in the lower part of the screen

The problem seems to be that there are no interactive elements (buttons) visible in the UI, which would explain why the UI simulator is unable to progress and eventually times out.

Proposed solution:
1. Ensure that the `availableButtonSlugs` array is being populated correctly.
2. Add a fallback UI for when there are no available buttons but the player skills exist.
3. Improve error handling and logging to help diagnose issues in the future.

Here's the implementation of the proposed solution:

# Excerpt ID: 2dfbd918-39ef-4e27-83eb-2163161555cc
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { CreatureCard } from "@/components/ui/custom/creature/creature_card";
import { SkillButton } from "@/components/ui/custom/skill/skill_button";
import { Shield } from 'lucide-react';

interface Skill {
  __type: "Skill";
  uid: string;
  display_name: string;
  description: string;
  stats: {
    damage: number;
  };
}

interface Creature {
  __type: "Creature";
  uid: string;
  display_name: string;
  stats: {
    hp: number;
    max_hp: number;
  };
}

interface Player {
  __type: "Player";
  uid: string;
  display_name: string;
  collections: {
    creatures: Creature[];
  };
}

interface GameUIData {
  entities: {
    player: Player;
    foe: Player;
    player_creature: Creature;
    foe_creature: Creature;
  };
  collections: {
    player_skill_queue: Skill[];
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const { availableButtonSlugs, emitButtonClick } = useCurrentButtons();

  const playerCreature = props.data.entities.player_creature;
  const foeCreature = props.data.entities.foe_creature;
  const playerSkills = props.data.collections.player_skill_queue || [];

  const getSkillByUid = (uid: string) => playerSkills.find(skill => skill.uid === uid);

  console.log("Available button slugs:", availableButtonSlugs);
  console.log("Player skills:", playerSkills);

  return (
    <div className="w-full h-full flex flex-col bg-gray-100">
      {/* HUD */}
      <nav className="bg-blue-600 text-white p-2">
        <h1 className="text-xl font-bold">Battle Arena</h1>
      </nav>

      {/* Battlefield */}
      <div className="flex-grow flex justify-between items-center p-4">
        <div className="flex flex-col items-center">
          <CreatureCard
            uid={playerCreature.uid}
            name={playerCreature.display_name}
            imageUrl="/placeholder-creature.jpg"
            hp={playerCreature.stats.hp}
          />
          <div className="mt-2 flex items-center">
            <Shield className="w-4 h-4 mr-1 text-blue-500" />
            <span className="text-sm font-bold">Player</span>
          </div>
        </div>
        <div className="flex flex-col items-center">
          <CreatureCard
            uid={foeCreature.uid}
            name={foeCreature.display_name}
            imageUrl="/placeholder-creature.jpg"
            hp={foeCreature.stats.hp}
          />
          <div className="mt-2 flex items-center">
            <Shield className="w-4 h-4 mr-1 text-red-500" />
            <span className="text-sm font-bold">Opponent</span>
          </div>
        </div>
      </div>

      {/* User Interface */}
      <div className="bg-white p-4 border-t-2 border-gray-200">
        {availableButtonSlugs.length > 0 ? (
          <div className="flex flex-wrap gap-2">
            {availableButtonSlugs.map((slug) => {
              const skill = getSkillByUid(slug);
              if (!skill) {
                console.warn(`Skill not found for UID: ${slug}`);
                return null;
              }
              return (
                <SkillButton
                  key={skill.uid}
                  uid={skill.uid}
                  skillName={skill.display_name}
                  description={skill.description}
                  stats={`Damage: ${skill.stats.damage}`}
                  onClick={() => emitButtonClick(slug)}
                />
              );
            })}
          </div>
        ) : playerSkills.length > 0 ? (
          <div className="bg-yellow-100 p-4 rounded-md">
            <p className="text-yellow-700">Skills available, but no actions can be taken at this time.</p>
          </div>
        ) : (
          <div className="bg-gray-100 p-4 rounded-md">
            <p className="text-gray-700">Waiting for game action...</p>
          </div>
        )}
      </div>
    </div>
  );
}
```

Changes made:

1. Added console.log statements to help diagnose issues with `availableButtonSlugs` and `playerSkills`.
2. Modified the conditional rendering in the User Interface section:
   - Now it first checks if there are `availableButtonSlugs`.
   - If not, it checks if there are `playerSkills` and displays a message indicating that skills are available but no actions can be taken.
   - If neither condition is met, it shows the "Waiting for game action..." message.
3. Removed the check for `playerSkills.length > 0` when rendering skill buttons, as this was redundant with the `availableButtonSlugs` check.

These changes should help ensure that the UI always displays something interactive or informative, potentially resolving the timeout issue. The added logging will also help in diagnosing any future problems with the game state.

## Directions
Reply with a JSON list of actions to perform. 'overwrite' are the only valid action type. 
Make sure you are using the excerpt_id which contains the entire contents of the file

Examples:
overwriting files (this works for python, markdown, or any other file type)
```json output_example1
[{"action": "overwrite", "excerpt_id": "<id>", "file_path": "<relative file path>"}]
```

__________________
Role: assistant
Content: ```json
[{"action": "overwrite", "excerpt_id": "2dfbd918-39ef-4e27-83eb-2163161555cc", "file_path": "main_game/templates/MainGameScene.tsx"}]
```
__________________
