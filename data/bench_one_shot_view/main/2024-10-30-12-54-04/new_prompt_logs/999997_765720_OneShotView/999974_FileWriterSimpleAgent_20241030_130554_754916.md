Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: 
## Proposed Code Change
After analyzing the image and the provided code, I can identify the following issues:

1. The scene is rendering correctly, showing the battlefield with two creatures (Bubwool) and their respective health points.
2. The HUD (Battle Arena) is visible at the top of the screen.
3. The User Interface area is showing the "Waiting for game action..." message.

The main problem appears to be that no skill buttons are being rendered, which is likely causing the timeout error. This could be because:

1. The `availableButtonSlugs` array is empty.
2. The `getSkillByUid` function is not finding matching skills.

To resolve this issue, we need to make the following changes:

1. Add a check to ensure that `playerSkills` is not empty before trying to render skill buttons.
2. Add error handling for cases where a skill is not found for a given UID.
3. Ensure that the `availableButtonSlugs` are correctly populated from the `useCurrentButtons` hook.

Here's the implementation of the proposed solution:

# Excerpt ID: dda9d69a-8a52-4abb-a857-9ffc732eb9fb
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { CreatureCard } from "@/components/ui/custom/creature/creature_card";
import { SkillButton } from "@/components/ui/custom/skill/skill_button";
import { Shield } from 'lucide-react';

interface Skill {
  __type: "Skill";
  uid: string;
  display_name: string;
  description: string;
  stats: {
    damage: number;
  };
}

interface Creature {
  __type: "Creature";
  uid: string;
  display_name: string;
  stats: {
    hp: number;
    max_hp: number;
  };
}

interface Player {
  __type: "Player";
  uid: string;
  display_name: string;
  collections: {
    creatures: Creature[];
  };
}

interface GameUIData {
  entities: {
    player: Player;
    foe: Player;
    player_creature: Creature;
    foe_creature: Creature;
  };
  collections: {
    player_skill_queue: Skill[];
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const { availableButtonSlugs, emitButtonClick } = useCurrentButtons();

  const playerCreature = props.data.entities.player_creature;
  const foeCreature = props.data.entities.foe_creature;
  const playerSkills = props.data.collections.player_skill_queue || [];

  const getSkillByUid = (uid: string) => playerSkills.find(skill => skill.uid === uid);

  return (
    <div className="w-full h-full flex flex-col bg-gray-100">
      {/* HUD */}
      <nav className="bg-blue-600 text-white p-2">
        <h1 className="text-xl font-bold">Battle Arena</h1>
      </nav>

      {/* Battlefield */}
      <div className="flex-grow flex justify-between items-center p-4">
        <div className="flex flex-col items-center">
          <CreatureCard
            uid={playerCreature.uid}
            name={playerCreature.display_name}
            imageUrl="/placeholder-creature.jpg"
            hp={playerCreature.stats.hp}
          />
          <div className="mt-2 flex items-center">
            <Shield className="w-4 h-4 mr-1 text-blue-500" />
            <span className="text-sm font-bold">Player</span>
          </div>
        </div>
        <div className="flex flex-col items-center">
          <CreatureCard
            uid={foeCreature.uid}
            name={foeCreature.display_name}
            imageUrl="/placeholder-creature.jpg"
            hp={foeCreature.stats.hp}
          />
          <div className="mt-2 flex items-center">
            <Shield className="w-4 h-4 mr-1 text-red-500" />
            <span className="text-sm font-bold">Opponent</span>
          </div>
        </div>
      </div>

      {/* User Interface */}
      <div className="bg-white p-4 border-t-2 border-gray-200">
        {availableButtonSlugs.length > 0 && playerSkills.length > 0 ? (
          <div className="flex flex-wrap gap-2">
            {availableButtonSlugs.map((slug) => {
              const skill = getSkillByUid(slug);
              if (!skill) {
                console.warn(`Skill not found for UID: ${slug}`);
                return null;
              }
              return (
                <SkillButton
                  key={skill.uid}
                  uid={skill.uid}
                  skillName={skill.display_name}
                  description={skill.description}
                  stats={`Damage: ${skill.stats.damage}`}
                  onClick={() => emitButtonClick(slug)}
                />
              );
            })}
          </div>
        ) : (
          <div className="bg-gray-100 p-4 rounded-md">
            <p className="text-gray-700">Waiting for game action...</p>
          </div>
        )}
      </div>
    </div>
  );
}
```

The main changes made are:

1. Added a check for `playerSkills.length > 0` in the condition for rendering skill buttons.
2. Added a console warning if a skill is not found for a given UID.
3. Kept the existing "Waiting for game action..." message when there are no available buttons or skills.

These changes should help prevent the timeout error by ensuring that the skill buttons are only rendered when both `availableButtonSlugs` and `playerSkills` are populated. If there are still issues, it may be worth investigating the `useCurrentButtons` hook to ensure it's correctly populating the `availableButtonSlugs` array.

## Directions
Reply with a JSON list of actions to perform. 'overwrite' are the only valid action type. 
Make sure you are using the excerpt_id which contains the entire contents of the file

Examples:
overwriting files (this works for python, markdown, or any other file type)
```json output_example1
[{"action": "overwrite", "excerpt_id": "<id>", "file_path": "<relative file path>"}]
```

__________________
Role: assistant
Content: ```json
[{"action": "overwrite", "excerpt_id": "dda9d69a-8a52-4abb-a857-9ffc732eb9fb", "file_path": "main_game/templates/MainGameScene.tsx"}]
```
__________________
