Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue based on the image and error provided:

1. Problem Description:
- The UI simulator is timing out after 120s, suggesting interaction issues
- The error indicates connection issues with source maps, but more importantly shows the UI is not properly interactive
- Looking at the image, I can see:
  - The player and opponent cards are visible
  - The creatures are displayed with HP bars
  - Only one skill button ("Tackle") is visible in the footer
  - The layout matches the design spec but may have interaction issues

2. Proposed Solution:
The main issues appear to be:
1. The skill buttons may not be properly handling clicks due to incorrect event handling
2. The grid layout in the footer might be constraining button visibility
3. The click handler needs to ensure it's properly emitting available button slugs

Changes needed:
1. Modify the handleSkillClick function to properly handle skill clicks
2. Adjust the footer grid layout to ensure all buttons are visible
3. Add proper button state handling

Here's the corrected code:

# Excerpt ID: 851af698-3518-4cef-9604-8d10ffc22080
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Sword, Shield } from 'lucide-react';
import { CreatureCard } from "@/components/ui/custom/creature/creature_card";
import { PlayerCard } from "@/components/ui/custom/player/player_card";
import { SkillButton } from "@/components/ui/custom/skill/skill_button";

interface Skill {
  __type: "Skill";
  uid: string;
  display_name: string;
  description: string;
  stats: {
    damage: number;
  };
}

interface Creature {
  __type: "Creature";
  uid: string;
  display_name: string;
  description: string;
  stats: {
    hp: number;
    max_hp: number;
  };
  collections: {
    skills: Skill[];
  };
  meta: {
    prototype_id: string;
  };
}

interface Player {
  __type: "Player";
  uid: string;
  display_name: string;
  collections: {
    creatures: Creature[];
  };
  meta: {
    prototype_id: string;
  };
}

interface GameUIData {
  entities: {
    player: Player;
    foe: Player;
    player_creature: Creature;
    foe_creature: Creature;
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons();

  const { player, foe, player_creature, foe_creature } = props.data.entities;

  const getImageUrl = (entity: { meta: { prototype_id: string }}) => 
    `/assets/sprites/${entity.meta.prototype_id}.png`;

  const handleSkillClick = (skillUid: string) => {
    // Only emit if the skill's uid is in the available buttons
    if (availableButtonSlugs.includes(skillUid)) {
      emitButtonClick(skillUid);
    }
  };

  return (
    <div className="h-screen w-full grid grid-rows-[auto_1fr_auto]">
      {/* HUD */}
      <nav className="bg-slate-800 p-4 flex justify-between items-center">
        <div className="flex items-center gap-4">
          {player && (
            <PlayerCard
              uid={player.uid}
              name={player.display_name}
              imageUrl={getImageUrl(player)}
            />
          )}
        </div>
        <div className="flex items-center gap-4">
          {foe && (
            <PlayerCard
              uid={foe.uid}
              name={foe.display_name}
              imageUrl={getImageUrl(foe)}
            />
          )}
        </div>
      </nav>

      {/* Battlefield */}
      <main className="flex justify-between items-center px-16 bg-slate-900">
        {player_creature && (
          <div className="relative">
            <span className="absolute -top-8 left-1/2 -translate-x-1/2 text-green-500">
              Player
            </span>
            <CreatureCard
              uid={player_creature.uid}
              name={player_creature.display_name}
              hp={player_creature.stats.hp}
              maxHp={player_creature.stats.max_hp}
              imageUrl={getImageUrl(player_creature)}
            />
          </div>
        )}

        {foe_creature && (
          <div className="relative">
            <span className="absolute -top-8 left-1/2 -translate-x-1/2 text-red-500">
              Opponent
            </span>
            <CreatureCard
              uid={foe_creature.uid}
              name={foe_creature.display_name}
              hp={foe_creature.stats.hp}
              maxHp={foe_creature.stats.max_hp}
              imageUrl={getImageUrl(foe_creature)}
            />
          </div>
        )}
      </main>

      {/* Skills UI */}
      <footer className="bg-slate-700 p-4">
        <div className="flex flex-wrap gap-4">
          {player_creature?.collections.skills?.map((skill) => (
            <div key={skill.uid} className="flex-1 min-w-[200px]">
              <SkillButton
                uid={skill.uid}
                name={skill.display_name}
                description={skill.description}
                stats={`Damage: ${skill.stats.damage}`}
                disabled={!availableButtonSlugs.includes(skill.uid)}
                onClick={() => handleSkillClick(skill.uid)}
              />
            </div>
          ))}
        </div>
      </footer>
    </div>
  );
}
```

Key changes made:
1. Changed the footer grid layout from `grid-cols-4` to a more flexible `flex flex-wrap` layout
2. Added minimum width to skill buttons to ensure they're visible and clickable
3. Simplified the skill button click handler to ensure proper event emission
4. Wrapped skill buttons in flex containers to ensure proper spacing and visibility

These changes should resolve the timeout issues by ensuring all buttons are visible and properly interactive.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
