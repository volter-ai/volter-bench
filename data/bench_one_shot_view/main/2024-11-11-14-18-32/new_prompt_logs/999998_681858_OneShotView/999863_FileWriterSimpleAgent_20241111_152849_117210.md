Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
Let me analyze the issue and propose a solution.

**Problem Description:**
1. The UI simulator is timing out after 120s, suggesting it's unable to complete the intended interactions
2. Looking at the image, I notice:
   - The creatures' stats are displayed correctly
   - The battlefield layout is proper
   - However, the skills UI section at the bottom appears empty or is not properly rendering the buttons
3. The error suggests connection issues, but the core problem appears to be with the button rendering and interaction logic

**Key Issues:**
1. The skill button rendering logic has a potential issue with the buttonId construction
2. The condition for rendering buttons might be too restrictive
3. The layout might be causing buttons to be hidden or inaccessible

**Proposed Solution:**
1. Fix the buttonId construction:
   - Current: `-${skill.meta.prototype_id}`
   - Should be: `skill.meta.prototype_id`
2. Modify the button rendering condition to ensure buttons are always visible
3. Adjust the skills UI container to ensure proper overflow handling
4. Add error boundaries for debugging

Here's the implementation:

# Excerpt ID: b9182770-1e34-4912-b0f4-e312cf9100d7
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Sword, Shield, Zap, Heart } from 'lucide-react';
import { Card } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Progress } from "@/components/ui/progress";

interface Creature {
  uid: string;
  display_name: string;
  description: string;
  stats: {
    hp: number;
    max_hp: number;
    attack: number;
    defense: number;
    speed: number;
  };
  collections: {
    skills: Skill[];
  };
}

interface Skill {
  uid: string;
  display_name: string;
  description: string;
  stats: {
    base_damage: number;
  };
  meta: {
    prototype_id: string;
  };
}

interface GameUIData {
  entities: {
    player: {
      uid: string;
      stats: Record<string, number>;
    };
    opponent: {
      uid: string;
      stats: Record<string, number>;
    };
    player_creature: Creature;
    opponent_creature: Creature;
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons();

  const playerCreature = props.data?.entities?.player_creature;
  const opponentCreature = props.data?.entities?.opponent_creature;

  if (!playerCreature || !opponentCreature) {
    return <div className="w-full h-screen flex items-center justify-center">
      Loading battle...
    </div>;
  }

  const renderCreatureStats = (creature: Creature, isPlayer: boolean) => (
    <Card className={`p-4 ${isPlayer ? 'mr-auto' : 'ml-auto'} w-64`}>
      <div className="flex flex-col gap-2">
        <h2 className="text-xl font-bold">{creature.display_name}</h2>
        <div className="w-full">
          <Progress 
            value={(creature.stats.hp / creature.stats.max_hp) * 100}
            className="h-2"
          />
          <span className="text-sm">
            {creature.stats.hp}/{creature.stats.max_hp} HP
          </span>
        </div>
        <div className="flex gap-4 mt-2">
          <div className="flex items-center">
            <Sword className="w-4 h-4 mr-1" />
            {creature.stats.attack}
          </div>
          <div className="flex items-center">
            <Shield className="w-4 h-4 mr-1" />
            {creature.stats.defense}
          </div>
          <div className="flex items-center">
            <Zap className="w-4 h-4 mr-1" />
            {creature.stats.speed}
          </div>
        </div>
      </div>
    </Card>
  );

  return (
    <div className="w-full h-screen flex flex-col bg-gradient-to-b from-blue-900 to-blue-800">
      <Card className="w-full p-4 rounded-none bg-black/30">
        <div className="flex justify-between items-center">
          <span className="text-white">Battle Scene</span>
          <Heart className="text-red-500" />
        </div>
      </Card>

      <div className="flex-1 p-8">
        <div className="flex justify-between items-center h-full">
          <div className="w-1/3 flex flex-col items-start">
            <div className="text-white text-center w-full mb-4">Player</div>
            {renderCreatureStats(playerCreature, true)}
          </div>
          <div className="w-1/3 flex flex-col items-end">
            <div className="text-white text-center w-full mb-4">Opponent</div>
            {renderCreatureStats(opponentCreature, false)}
          </div>
        </div>
      </div>

      <Card className="min-h-[200px] max-h-[40%] bg-black/40 p-4 rounded-t-xl rounded-b-none">
        <div className="grid grid-cols-2 gap-4 h-full overflow-y-auto">
          {playerCreature.collections.skills.map((skill) => {
            const buttonId = skill.meta.prototype_id;
            const isAvailable = availableButtonSlugs.includes(buttonId);
            
            return (
              <Button
                key={skill.uid}
                onClick={() => isAvailable && emitButtonClick(buttonId)}
                variant="secondary"
                className="h-auto flex flex-col items-start p-4"
                disabled={!isAvailable}
              >
                <h3 className="font-bold">{skill.display_name}</h3>
                <p className="text-sm opacity-80">{skill.description}</p>
                <span className="text-xs">Damage: {skill.stats.base_damage}</span>
              </Button>
            );
          })}
        </div>
      </Card>
    </div>
  );
}
```

Key changes made:
1. Fixed buttonId construction by removing the `-` prefix
2. Modified button rendering to always show buttons but disable unavailable ones
3. Simplified the button click logic
4. Improved the skills container layout and overflow handling

These changes should resolve the timeout issue by ensuring the buttons are properly rendered and interactive.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
