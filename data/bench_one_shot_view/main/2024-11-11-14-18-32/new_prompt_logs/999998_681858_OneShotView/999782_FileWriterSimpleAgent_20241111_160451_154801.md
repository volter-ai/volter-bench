Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: ## Proposed Code Change
# Excerpt ID: 6390cb7b-f20d-4e6f-b20d-2e176c985f9a
```tsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices"
import { Sword, ArrowLeft, SwapHorizontal } from 'lucide-react'
import { Button } from "@/components/ui/button"
import { CreatureCard } from "@/components/ui/custom/creature/creature_card"
import { PlayerCard } from "@/components/ui/custom/player/player_card"
import { SkillButton } from "@/components/ui/custom/skill/skill_button"

interface Creature {
  uid: string
  display_name: string
  description: string
  stats: {
    hp: number
    max_hp: number
    [key: string]: number
  }
  meta: {
    creature_type: string
    prototype_id: string
    [key: string]: any
  }
  collections: {
    skills: Skill[]
  }
}

interface Skill {
  uid: string
  display_name: string
  description: string
  stats: {
    base_damage: number
  }
  meta: {
    skill_type: string
    is_physical: boolean
  }
}

interface Player {
  uid: string
  display_name: string
  description: string
  meta: {
    prototype_id: string
    [key: string]: any
  }
  entities: {
    active_creature?: Creature
  }
}

interface GameUIData {
  entities: {
    player: Player
    opponent: Player
  }
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const { availableButtonSlugs, emitButtonClick } = useCurrentButtons()

  const playerCreature = props.data.entities.player?.entities?.active_creature
  const opponentCreature = props.data.entities.opponent?.entities?.active_creature
  const player = props.data.entities.player
  const opponent = props.data.entities.opponent

  if (!playerCreature || !opponentCreature || !player || !opponent) {
    return <div className="text-center p-4">Loading battle...</div>
  }

  return (
    <div className="h-screen w-screen bg-gradient-to-b from-blue-100 to-blue-200">
      <div className="grid grid-rows-[2fr_1fr] h-full">
        {/* Battlefield */}
        <div className="grid grid-cols-2 gap-4 p-4">
          {/* Opponent Status */}
          <div className="flex items-start justify-start">
            <PlayerCard
              uid={opponent.uid}
              name={opponent.display_name}
              imageUrl={`/players/${opponent.meta.prototype_id}.png`}
            />
          </div>
          
          {/* Opponent Creature */}
          <div className="flex items-center justify-center">
            <CreatureCard
              uid={opponentCreature.uid}
              name={opponentCreature.display_name}
              imageUrl={`/creatures/${opponentCreature.meta.prototype_id}.png`}
              currentHp={opponentCreature.stats.hp}
              maxHp={opponentCreature.stats.max_hp}
            />
          </div>

          {/* Player Creature */}
          <div className="flex items-center justify-center">
            <CreatureCard
              uid={playerCreature.uid}
              name={playerCreature.display_name}
              imageUrl={`/creatures/${playerCreature.meta.prototype_id}.png`}
              currentHp={playerCreature.stats.hp}
              maxHp={playerCreature.stats.max_hp}
            />
          </div>

          {/* Player Status */}
          <div className="flex items-end justify-end">
            <PlayerCard
              uid={player.uid}
              name={player.display_name}
              imageUrl={`/players/${player.meta.prototype_id}.png`}
            />
          </div>
        </div>

        {/* UI Area */}
        <div className="bg-white/90 p-4 flex flex-col gap-4">
          <div className="flex gap-4 justify-center">
            {availableButtonSlugs.includes('attack') && (
              <Button
                onClick={() => emitButtonClick('attack')}
                className="flex gap-2 items-center"
              >
                <Sword className="w-4 h-4" />
                Attack
              </Button>
            )}
            
            {availableButtonSlugs.includes('swap') && (
              <Button
                onClick={() => emitButtonClick('swap')}
                className="flex gap-2 items-center"
              >
                <SwapHorizontal className="w-4 h-4" />
                Swap
              </Button>
            )}

            {availableButtonSlugs.includes('back') && (
              <Button
                onClick={() => emitButtonClick('back')}
                className="flex gap-2 items-center"
              >
                <ArrowLeft className="w-4 h-4" />
                Back
              </Button>
            )}
          </div>

          {/* Skills */}
          {availableButtonSlugs.includes('attack') && (
            <div className="grid grid-cols-2 gap-4">
              {playerCreature.collections.skills.map((skill) => (
                <SkillButton
                  key={skill.uid}
                  uid={skill.uid}
                  description={skill.description}
                  stats={{
                    damage: skill.stats.base_damage
                  }}
                >
                  {skill.display_name}
                </SkillButton>
              ))}
            </div>
          )}
        </div>
      </div>
    </div>
  )
}
```

Key changes made:
1. Added PlayerCard components for both player and opponent
2. Removed raw img tags in favor of proper CreatureCard usage
3. Simplified image path structure (though this should be configured based on actual asset locations)
4. Added proper typing for meta fields
5. Added proper null checks for all required entities
6. Maintained consistent uid prop passing to all custom components
7. Kept the responsive layout but with more proper component usage

The code now properly utilizes all custom components while maintaining the same layout and functionality. All UIDs are properly passed through to custom components as required.

## Directions
Reply with a list of actions in the following format. The response should only contain the JSON list of actions, no other text.
Make sure you are using the excerpt_id which contains the entire contents of the file.

Each action in the list must have these fields:
- action: Must be "overwrite"
- excerpt_id: The ID of the excerpt to use
- file_path: The relative path to the file

Example format for multiple files:
[
    {
        "action": "overwrite",
        "excerpt_id": "abc1",
        "file_path": "src/main.py"
    },
    {
        "action": "overwrite",
        "excerpt_id": "def2",
        "file_path": "tests/test_main.py"
    }
]
__________________
Role: assistant
Content: 
__________________
