Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: 
## Proposed Code Change
After analyzing the image and the provided code, I can identify the following issues:

1. The scene is rendering correctly, but there are no available actions or skills for the player to choose from.
2. The "End Turn" button is visible, but it may not be functioning as expected.
3. The timeout error suggests that the game is not progressing or updating the available choices.

To resolve these issues, we need to make the following changes:

1. Ensure that the `availableButtonSlugs` array is being populated correctly.
2. Add a check to display the "End Turn" button only when there are no available actions.
3. Make sure the `handleEndTurn` function is correctly emitting the "end_turn" event.

Here's the proposed solution implemented in the code:

# Excerpt ID: 482dbef6-77d6-4745-b604-6e8fdc2de3b2
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { CreatureCard } from "@/components/ui/custom/creature/creature_card";
import { SkillButton } from "@/components/ui/custom/skill/skill_button";
import { Shield, Swords } from 'lucide-react';
import { Button } from "@/components/ui/button";

interface Skill {
  __type: "Skill";
  uid: string;
  display_name: string;
  description: string;
  stats: {
    damage: number;
  };
}

interface Creature {
  __type: "Creature";
  uid: string;
  display_name: string;
  stats: {
    hp: number;
    max_hp: number;
  };
  collections?: {
    skills?: Skill[];
  };
}

interface Player {
  __type: "Player";
  uid: string;
  display_name: string;
}

interface GameUIData {
  entities: {
    player: Player;
    foe: Player;
    player_creature: Creature;
    foe_creature: Creature;
  };
}

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons();

  const { player_creature, foe_creature } = props.data.entities;

  const handleEndTurn = () => {
    emitButtonClick("end_turn");
  };

  const availableSkills = player_creature.collections?.skills?.filter(skill => 
    availableButtonSlugs.includes(skill.uid)
  ) || [];

  return (
    <div className="w-full h-full flex flex-col bg-gray-100">
      {/* HUD */}
      <nav className="bg-blue-600 text-white p-2">
        <h1 className="text-xl font-bold">Battle Arena</h1>
      </nav>

      {/* Battlefield */}
      <div className="flex-grow flex justify-between items-center p-4">
        <div className="flex flex-col items-center">
          <Shield className="w-8 h-8 mb-2 text-green-500" />
          <CreatureCard
            uid={player_creature.uid}
            name={player_creature.display_name}
            imageUrl="/placeholder-creature.jpg"
            hp={player_creature.stats.hp}
          />
          <p className="mt-2 font-bold">Player</p>
        </div>
        <div className="flex flex-col items-center">
          <Swords className="w-8 h-8 mb-2 text-red-500" />
          <CreatureCard
            uid={foe_creature.uid}
            name={foe_creature.display_name}
            imageUrl="/placeholder-creature.jpg"
            hp={foe_creature.stats.hp}
          />
          <p className="mt-2 font-bold">Opponent</p>
        </div>
      </div>

      {/* User Interface */}
      <div className="bg-white p-4 border-t-2 border-gray-300">
        {availableSkills.length > 0 ? (
          <div className="flex flex-wrap gap-2">
            {availableSkills.map((skill) => (
              <SkillButton
                key={skill.uid}
                uid={skill.uid}
                skillName={skill.display_name}
                description={skill.description}
                stats={`Damage: ${skill.stats.damage}`}
                onClick={() => emitButtonClick(skill.uid)}
              />
            ))}
          </div>
        ) : (
          <div className="text-center">
            <p className="text-gray-600 mb-2">No actions available.</p>
            <Button onClick={handleEndTurn}>End Turn</Button>
          </div>
        )}
      </div>
    </div>
  );
}
```

The main changes made are:

1. Added a new `availableSkills` constant that filters the player's skills based on the `availableButtonSlugs`.
2. Updated the rendering logic to use `availableSkills` instead of checking both `availableButtonSlugs` and `player_creature.collections?.skills`.
3. Simplified the condition for displaying the "No actions available" message and the "End Turn" button.
4. Ensured that the `emitButtonClick` function is called with the correct skill uid when a skill button is clicked.

These changes should resolve the timeout issue by ensuring that the game state updates correctly and that the player can always take an action, even if it's just ending their turn when no skills are available.

## Directions
Reply with a JSON list of actions to perform. 'overwrite' are the only valid action type. 
Make sure you are using the excerpt_id which contains the entire contents of the file

Examples:
overwriting files (this works for python, markdown, or any other file type)
```json output_example1
[{"action": "overwrite", "excerpt_id": "<id>", "file_path": "<relative file path>"}]
```

__________________
Role: assistant
Content: ```json
[{"action": "overwrite", "excerpt_id": "482dbef6-77d6-4745-b604-6e8fdc2de3b2", "file_path": "main_game/templates/MainGameScene.tsx"}]
```
__________________
