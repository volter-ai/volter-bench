Role: system
Content: You are a helpful assistant specialized in changing files based on proposed changes.
__________________
Role: user
Content: 
## Proposed Code Change
After analyzing the image and the provided code, I can identify the following issues:

1. The scene is generally correct, but the UI simulator is timing out after 120 seconds, which suggests that the interaction with the buttons is not working as expected.
2. The buttons in the UI are visible and appear to be clickable, but the simulator is not able to interact with them successfully.

The main problem seems to be that the buttons are not properly emitting events when clicked. This could be because the `emitButtonClick` function is not being called with the correct parameters, or the `availableButtonSlugs` array is not being populated correctly.

Proposed solution:
1. Ensure that the `availableButtonSlugs` array is correctly populated with the skill UIDs.
2. Modify the button click handler to use the skill's UID directly when calling `emitButtonClick`.
3. Add a check to ensure that only available skills are clickable.

Here's the implementation of the proposed solution:

# Excerpt ID: 2cbd90ff-8907-430b-8e19-9b8584c84a44
```jsx main_game/templates/MainGameScene.tsx
import { useCurrentButtons } from "@/lib/useChoices.ts";
import { Sword, Shield, Zap } from 'lucide-react'
import { Card } from "@/components/ui/card";

interface Creature {
  uid: string;
  display_name: string;
  stats: {
    hp: number;
    max_hp: number;
    attack: number;
    defense: number;
    speed: number;
  };
  meta: {
    creature_type: string;
  };
  collections: {
    skills: Skill[];
  };
}

interface Skill {
  uid: string;
  display_name: string;
  description: string;
}

interface Player {
  uid: string;
  display_name: string;
}

interface GameUIData {
  entities: {
    player: Player;
    opponent: Player;
    player_creature: Creature;
    opponent_creature: Creature;
  };
}

const CreatureDisplay = ({ creature, isPlayer }: { creature: Creature; isPlayer: boolean }) => (
  <Card className={`flex flex-col items-center p-2 ${isPlayer ? 'order-1' : 'order-2'}`}>
    <div className="text-lg font-bold">{creature.display_name}</div>
    <div className="w-24 h-24 bg-gray-300 rounded-full mb-2"></div>
    <div className="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700">
      <div className="bg-blue-600 h-2.5 rounded-full" style={{ width: `${(creature.stats.hp / creature.stats.max_hp) * 100}%` }}></div>
    </div>
    <div className="text-sm">{`HP: ${creature.stats.hp}/${creature.stats.max_hp}`}</div>
    <div className="flex space-x-2 mt-2">
      <span title="Attack"><Sword size={16} /> {creature.stats.attack}</span>
      <span title="Defense"><Shield size={16} /> {creature.stats.defense}</span>
      <span title="Speed"><Zap size={16} /> {creature.stats.speed}</span>
    </div>
  </Card>
);

export function MainGameSceneView(props: { data: GameUIData }) {
  const {
    availableButtonSlugs,
    emitButtonClick
  } = useCurrentButtons()

  const playerCreature = props.data.entities.player_creature;
  const opponentCreature = props.data.entities.opponent_creature;

  const handleSkillClick = (skillUid: string) => {
    if (availableButtonSlugs.includes(skillUid)) {
      emitButtonClick(skillUid);
    }
  };

  return (
    <div className="flex flex-col h-screen w-full max-w-[177.78vh] mx-auto" style={{ aspectRatio: '16/9' }}>
      {/* HUD */}
      <Card className="bg-gray-800 text-white p-2 flex justify-between items-center">
        <div>{props.data.entities.player?.display_name}</div>
        <div>{props.data.entities.opponent?.display_name}</div>
      </Card>

      {/* Battlefield */}
      <div className="flex-grow flex justify-around items-center bg-green-100 p-4">
        {playerCreature && <CreatureDisplay creature={playerCreature} isPlayer={true} />}
        {opponentCreature && <CreatureDisplay creature={opponentCreature} isPlayer={false} />}
      </div>

      {/* User Interface */}
      <Card className="bg-gray-100 p-4 h-1/3">
        <div className="grid grid-cols-2 gap-4">
          {playerCreature?.collections?.skills.map((skill) => (
            <button
              key={skill.uid}
              onClick={() => handleSkillClick(skill.uid)}
              className={`font-bold py-2 px-4 rounded ${
                availableButtonSlugs.includes(skill.uid)
                  ? 'bg-blue-500 hover:bg-blue-700 text-white'
                  : 'bg-gray-300 text-gray-500 cursor-not-allowed'
              }`}
              disabled={!availableButtonSlugs.includes(skill.uid)}
            >
              {skill.display_name}
            </button>
          ))}
        </div>
        {(!playerCreature?.collections?.skills.length || availableButtonSlugs.length === 0) && (
          <div className="bg-white p-4 rounded shadow">
            Waiting for your turn...
          </div>
        )}
      </Card>
    </div>
  );
}
```

The main changes made are:

1. Created a new `handleSkillClick` function that checks if the skill's UID is in the `availableButtonSlugs` array before calling `emitButtonClick`.
2. Updated the button's `onClick` handler to use `handleSkillClick` instead of directly calling `emitButtonClick`.
3. Kept the disabled state and styling for unavailable skills.

These changes should ensure that the buttons are properly interactive and emit the correct events when clicked, which should resolve the timeout issue in the UI simulator.

## Directions
Reply with a JSON list of actions to perform. 'overwrite' are the only valid action type. 
Make sure you are using the excerpt_id which contains the entire contents of the file

Examples:
overwriting files (this works for python, markdown, or any other file type)
```json output_example1
[{"action": "overwrite", "excerpt_id": "<id>", "file_path": "<relative file path>"}]
```

__________________
Role: assistant
Content: ```json
[{"action": "overwrite", "excerpt_id": "2cbd90ff-8907-430b-8e19-9b8584c84a44", "file_path": "main_game/templates/MainGameScene.tsx"}]
```
__________________
